{"version":3,"file":"form.min.js","sources":["../../../apps/frappe/frappe/public/js/frappe/views/formview.js","../../../apps/frappe/frappe/public/js/legacy/form.js","../../../apps/frappe/frappe/public/js/legacy/client_script_helpers.js","../../../apps/frappe/frappe/public/js/frappe/form/toolbar.js","../../../apps/frappe/frappe/public/js/frappe/form/dashboard.js","../../../apps/frappe/frappe/public/js/frappe/form/document_flow.js","../../../apps/frappe/frappe/public/js/frappe/form/save.js","../../../apps/frappe/frappe/public/js/frappe/form/script_manager.js","../../../apps/frappe/frappe/public/js/frappe/form/linked_with.js","../../../apps/frappe/frappe/public/js/frappe/form/workflow.js","../../../apps/frappe/frappe/public/js/frappe/form/print.js","../../../apps/frappe/frappe/public/js/frappe/form/form_sidebar.js","../../../apps/frappe/frappe/public/js/frappe/form/user_image.js","../../../apps/frappe/frappe/public/js/frappe/form/share.js","../../../apps/frappe/frappe/public/js/frappe/form/form_viewers.js","../../../apps/frappe/frappe/public/js/frappe/form/footer/footer.js","../../../apps/frappe/frappe/public/js/frappe/form/footer/attachments.js","../../../apps/frappe/frappe/public/js/frappe/form/footer/timeline.js","../../../apps/frappe/frappe/public/js/frappe/form/footer/assign_to.js","../../../apps/frappe/frappe/public/js/frappe/form/quick_entry.js","../../../apps/frappe/frappe/public/js/frappe/form/success_action.js"],"sourcesContent":["// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide('frappe.views.formview');\n\nfrappe.views.FormFactory = class FormFactory extends frappe.views.Factory {\n\tmake(route) {\n\t\tvar me = this,\n\t\t\tdt = route[1];\n\n\t\tif(!frappe.views.formview[dt]) {\n\t\t\tfrappe.model.with_doctype(dt, function() {\n\t\t\t\tme.page = frappe.container.add_page(\"Form/\" + dt);\n\t\t\t\tfrappe.views.formview[dt] = me.page;\n\t\t\t\tme.page.frm = new _f.Frm(dt, me.page, true);\n\t\t\t\tme.show_doc(route);\n\t\t\t});\n\t\t} else {\n\t\t\tme.show_doc(route);\n\t\t}\n\n\n\t\tif(!this.initialized) {\n\t\t\t$(document).on(\"page-change\", function() {\n\t\t\t\tfrappe.ui.form.close_grid_form();\n\t\t\t});\n\n\t\t\tfrappe.realtime.on(\"new_communication\", function(data) {\n\t\t\t\tfrappe.timeline.new_communication(data);\n\t\t\t});\n\n\t\t\tfrappe.realtime.on(\"delete_communication\", function(data) {\n\t\t\t\tfrappe.timeline.delete_communication(data);\n\t\t\t});\n\n\t\t\tfrappe.realtime.on('update_communication', function(data) {\n\t\t\t\tfrappe.timeline.update_communication(data);\n\t\t\t});\n\n\t\t\tfrappe.realtime.on(\"doc_viewers\", function(data) {\n\t\t\t\tfrappe.ui.form.set_viewers(data);\n\t\t\t});\n\t\t}\n\n\n\t\tthis.initialized = true;\n\t}\n\n\tshow_doc(route) {\n\t\tvar dt = route[1],\n\t\t\tdn = route.slice(2).join(\"/\"),\n\t\t\tme = this;\n\n\t\tif(frappe.model.new_names[dn]) {\n\t\t\tdn = frappe.model.new_names[dn];\n\t\t\tfrappe.set_route(\"Form\", dt, dn);\n\t\t\treturn;\n\t\t}\n\n\t\tfrappe.model.with_doc(dt, dn, function(dn, r) {\n\t\t\tif(r && r['403']) return; // not permitted\n\n\t\t\tif(!(locals[dt] && locals[dt][dn])) {\n\t\t\t\t// doc not found, but starts with New,\n\t\t\t\t// make a new doc and set it\n\t\t\t\tvar new_str = __(\"New\") + \" \";\n\t\t\t\tif(dn && dn.substr(0, new_str.length)==new_str) {\n\t\t\t\t\tvar new_name = frappe.model.make_new_doc_and_get_name(dt, true);\n\t\t\t\t\tif(new_name===dn) {\n\t\t\t\t\t\tme.load(dt, dn);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfrappe.set_route(\"Form\", dt, new_name)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfrappe.show_not_found(route);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tme.load(dt, dn);\n\t\t});\n\t}\n\n\tload(dt, dn) {\n\t\tfrappe.container.change_to(\"Form/\" + dt);\n\t\tfrappe.views.formview[dt].frm.refresh(dn);\n\t}\n}\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\n/* Form page structure\n\n\t+ this.parent (either FormContainer or Dialog)\n\t\t+ this.wrapper\n\t\t\t+ this.toolbar\n\t\t\t+ this.form_wrapper\n\t\t\t\t\t+ this.head\n\t\t\t\t\t+ this.body\n\t\t\t\t\t\t+ this.layout\n\t\t\t\t+ this.sidebar\n\t\t\t+ this.footer\n*/\n\n/* eslint-disable no-console */\n\nfrappe.provide('_f');\nfrappe.provide('frappe.ui.form');\n\nfrappe.ui.form.Controller = Class.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\t}\n});\n\n_f.frms = {};\n\n_f.Frm = function(doctype, parent, in_form) {\n\tthis.docname = '';\n\tthis.doctype = doctype;\n\tthis.hidden = false;\n\tthis.refresh_if_stale_for = 120;\n\n\tvar me = this;\n\tthis.opendocs = {};\n\tthis.custom_buttons = {};\n\tthis.sections = [];\n\tthis.grids = [];\n\tthis.cscript = new frappe.ui.form.Controller({frm:this});\n\tthis.events = {};\n\tthis.pformat = {};\n\tthis.fetch_dict = {};\n\tthis.parent = parent;\n\tthis.tinymce_id_list = [];\n\n\tthis.setup_meta(doctype);\n\n\t// show in form instead of in dialog, when called using url (router.js)\n\tthis.in_form = in_form ? true : false;\n\n\t// notify on rename\n\t$(document).on('rename', function(event, dt, old_name, new_name) {\n\t\tif(dt==me.doctype)\n\t\t\tme.rename_notify(dt, old_name, new_name);\n\t});\n};\n\n_f.Frm.prototype.check_doctype_conflict = function(docname) {\n\tif(this.doctype=='DocType' && docname=='DocType') {\n\t\tfrappe.msgprint(__('Allowing DocType, DocType. Be careful!'));\n\t} else if(this.doctype=='DocType') {\n\t\tif (frappe.views.formview[docname] || frappe.pages['List/'+docname]) {\n\t\t\twindow.location.reload();\n\t\t\t//\tfrappe.msgprint(__(\"Cannot open {0} when its instance is open\", ['DocType']))\n\t\t\t// throw 'doctype open conflict'\n\t\t}\n\t} else {\n\t\tif (frappe.views.formview.DocType && frappe.views.formview.DocType.frm.opendocs[this.doctype]) {\n\t\t\twindow.location.reload();\n\t\t\t//\tfrappe.msgprint(__(\"Cannot open instance when its {0} is open\", ['DocType']))\n\t\t\t// throw 'doctype open conflict'\n\t\t}\n\t}\n};\n\n_f.Frm.prototype.setup = function() {\n\tthis.fields = [];\n\tthis.fields_dict = {};\n\tthis.state_fieldname = frappe.workflow.get_state_fieldname(this.doctype);\n\n\t// wrapper\n\tthis.wrapper = this.parent;\n\tthis.$wrapper = $(this.wrapper);\n\tfrappe.ui.make_app_page({\n\t\tparent: this.wrapper,\n\t\tsingle_column: this.meta.hide_toolbar\n\t});\n\tthis.page = this.wrapper.page;\n\tthis.layout_main = this.page.main.get(0);\n\n\tthis.toolbar = new frappe.ui.form.Toolbar({\n\t\tfrm: this,\n\t\tpage: this.page\n\t});\n\n\t// print layout\n\tthis.setup_print_layout();\n\n\t// 2 column layout\n\tthis.setup_std_layout();\n\n\t// client script must be called after \"setup\" - there are no fields_dict attached to the frm otherwise\n\tthis.script_manager = new frappe.ui.form.ScriptManager({\n\t\tfrm: this\n\t});\n\tthis.script_manager.setup();\n\tthis.watch_model_updates();\n\n\tif(!this.meta.hide_toolbar) {\n\t\tthis.footer = new frappe.ui.form.Footer({\n\t\t\tfrm: this,\n\t\t\tparent: $('<div>').appendTo(this.page.main.parent())\n\t\t});\n\t\t$(\"body\").attr(\"data-sidebar\", 1);\n\t}\n\tthis.setup_drag_drop();\n\n\tthis.setup_done = true;\n};\n\n_f.Frm.prototype.setup_drag_drop = function() {\n\tvar me = this;\n\tthis.$wrapper.on('dragenter dragover', false)\n\t\t.on('drop', function(e) {\n\t\t\tvar dataTransfer = e.originalEvent.dataTransfer;\n\t\t\tif (!(dataTransfer && dataTransfer.files && dataTransfer.files.length > 0)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\n\t\t\tif(me.doc.__islocal) {\n\t\t\t\tfrappe.msgprint(__(\"Please save before attaching.\"));\n\t\t\t\tthrow \"attach error\";\n\t\t\t}\n\n\t\t\tif(me.attachments.max_reached()) {\n\t\t\t\tfrappe.msgprint(__(\"Maximum Attachment Limit for this record reached.\"));\n\t\t\t\tthrow \"attach error\";\n\t\t\t}\n\n\t\t\tfrappe.upload.make({\n\t\t\t\targs: me.attachments.get_args(),\n\t\t\t\tfiles: dataTransfer.files,\n\t\t\t\tcallback: function(attachment, r) {\n\t\t\t\t\tme.attachments.attachment_uploaded(attachment, r);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n};\n\n_f.Frm.prototype.setup_print_layout = function() {\n\tvar me = this;\n\tthis.print_preview = new frappe.ui.form.PrintPreview({\n\t\tfrm: this\n\t});\n\n\t// show edit button for print view\n\tthis.page.wrapper.on('view-change', function() {\n\t\tme.toolbar.set_primary_action();\n\t});\n};\n\n_f.Frm.prototype.print_doc = function() {\n\tif(this.print_preview.wrapper.is(\":visible\")) {\n\t\tthis.hide_print();\n\t\treturn;\n\t}\n\tif(!frappe.model.can_print(this.doc.doctype, this)) {\n\t\tfrappe.msgprint(__(\"You are not allowed to print this document\"));\n\t\treturn;\n\t}\n\n\tthis.print_preview.refresh_print_options().trigger(\"change\");\n\tthis.page.set_view(\"print\");\n\tthis.print_preview.set_user_lang();\n\tthis.print_preview.set_default_print_language();\n\tthis.print_preview.preview();\n};\n\n_f.Frm.prototype.hide_print = function() {\n\tif(this.setup_done && this.page.current_view_name===\"print\") {\n\t\tthis.page.set_view(this.page.previous_view_name===\"print\" ?\n\t\t\t\"main\" : (this.page.previous_view_name || \"main\"));\n\t}\n};\n\n_f.Frm.prototype.watch_model_updates = function() {\n\t// watch model updates\n\tvar me = this;\n\n\t// on main doc\n\tfrappe.model.on(me.doctype, \"*\", function(fieldname, value, doc) {\n\t\t// set input\n\t\tif(doc.name===me.docname) {\n\t\t\tif ((value==='' || value===null) && !doc[fieldname]) {\n\t\t\t\t// both the incoming and outgoing values are falsy\n\t\t\t\t// the texteditor, summernote, changes nulls to empty strings on render,\n\t\t\t\t// so ignore those changes\n\t\t\t} else {\n\t\t\t\tme.dirty();\n\t\t\t}\n\t\t\tme.fields_dict[fieldname]\n\t\t\t\t&& me.fields_dict[fieldname].refresh(fieldname);\n\n\t\t\tme.layout.refresh_dependency();\n\t\t\tlet object = me.script_manager.trigger(fieldname, doc.doctype, doc.name);\n\t\t\treturn object;\n\t\t}\n\t});\n\n\t// on table fields\n\tvar table_fields = frappe.get_children(\"DocType\", me.doctype, \"fields\", {fieldtype:\"Table\"});\n\n\t// using $.each to preserve df via closure\n\t$.each(table_fields, function(i, df) {\n\t\tfrappe.model.on(df.options, \"*\", function(fieldname, value, doc) {\n\t\t\tif(doc.parent===me.docname && doc.parentfield===df.fieldname) {\n\t\t\t\tme.dirty();\n\t\t\t\tme.fields_dict[df.fieldname].grid.set_value(fieldname, value, doc);\n\t\t\t\tme.script_manager.trigger(fieldname, doc.doctype, doc.name);\n\t\t\t}\n\t\t});\n\t});\n};\n\n_f.Frm.prototype.setup_std_layout = function() {\n\tthis.form_wrapper \t= $('<div></div>').appendTo(this.layout_main);\n\tthis.body \t\t\t= $('<div></div>').appendTo(this.form_wrapper);\n\n\t// only tray\n\tthis.meta.section_style='Simple'; // always simple!\n\n\t// layout\n\tthis.layout = new frappe.ui.form.Layout({\n\t\tparent: this.body,\n\t\tdoctype: this.doctype,\n\t\tfrm: this,\n\t\twith_dashboard: true\n\t});\n\tthis.layout.make();\n\n\tthis.fields_dict = this.layout.fields_dict;\n\tthis.fields = this.layout.fields_list;\n\n\tthis.document_flow = new frappe.ui.form.DocumentFlow({\n\t\tfrm: this\n\t});\n\n\tthis.dashboard = new frappe.ui.form.Dashboard({\n\t\tfrm: this,\n\t});\n\n\t// state\n\tthis.states = new frappe.ui.form.States({\n\t\tfrm: this\n\t});\n};\n\n// email the form\n_f.Frm.prototype.email_doc = function(message) {\n\tnew frappe.views.CommunicationComposer({\n\t\tdoc: this.doc,\n\t\tfrm: this,\n\t\tsubject: __(this.meta.name) + ': ' + this.docname,\n\t\trecipients: this.doc.email || this.doc.email_id || this.doc.contact_email,\n\t\tattach_document_print: true,\n\t\tmessage: message,\n\t\treal_name: this.doc.real_name || this.doc.contact_display || this.doc.contact_name\n\t});\n};\n\n// rename the form\n_f.Frm.prototype.rename_doc = function() {\n\tfrappe.model.rename_doc(this.doctype, this.docname);\n};\n\n_f.Frm.prototype.share_doc = function() {\n\tthis.shared.show();\n};\n\n// notify this form of renamed records\n_f.Frm.prototype.rename_notify = function(dt, old, name) {\n\t// from form\n\tif(this.meta.istable)\n\t\treturn;\n\n\tif(this.docname == old)\n\t\tthis.docname = name;\n\telse\n\t\treturn;\n\n\t// cleanup\n\tif(this && this.opendocs[old] && frappe.meta.docfield_copy[dt]) {\n\t\t// delete docfield copy\n\t\tfrappe.meta.docfield_copy[dt][name] = frappe.meta.docfield_copy[dt][old];\n\t\tdelete frappe.meta.docfield_copy[dt][old];\n\t}\n\n\tdelete this.opendocs[old];\n\tthis.opendocs[name] = true;\n\n\tif(this.meta.in_dialog || !this.in_form) {\n\t\treturn;\n\t}\n\n\tfrappe.re_route[window.location.hash] = '#Form/' + encodeURIComponent(this.doctype) + '/' + encodeURIComponent(name);\n\tfrappe.set_route('Form', this.doctype, name);\n};\n\n// SETUP\n\n_f.Frm.prototype.setup_meta = function() {\n\tthis.meta = frappe.get_doc('DocType', this.doctype);\n\tthis.perm = frappe.perm.get_perm(this.doctype); // for create\n\tif(this.meta.istable) {\n\t\tthis.meta.in_dialog = 1;\n\t}\n};\n\n_f.Frm.prototype.refresh_header = function(is_a_different_doc) {\n\t// set title\n\t// main title\n\tif(!this.meta.in_dialog || this.in_form) {\n\t\tfrappe.utils.set_title(this.meta.issingle ? this.doctype : this.docname);\n\t}\n\n\t// show / hide buttons\n\tif(this.toolbar) {\n\t\tif (is_a_different_doc) {\n\t\t\tthis.toolbar.current_status = undefined;\n\t\t}\n\n\t\tthis.toolbar.refresh();\n\t}\n\n\tthis.document_flow.refresh();\n\tthis.dashboard.refresh();\n\n\tif(this.meta.is_submittable &&\n\t\tthis.perm[0] && this.perm[0].submit &&\n\t\t!this.is_dirty() &&\n\t\t!this.is_new() &&\n\t\tthis.doc.docstatus===0) {\n\t\tthis.dashboard.add_comment(__('Submit this document to confirm'), 'orange', true);\n\t}\n\n\tthis.clear_custom_buttons();\n\n\tthis.show_web_link();\n};\n\n_f.Frm.prototype.show_web_link = function() {\n\tvar doc = this.doc, me = this;\n\tif(!doc.__islocal && doc.__onload && doc.__onload.is_website_generator) {\n\t\tme.web_link && me.web_link.remove();\n\t\tif(doc.__onload.published) {\n\t\t\tme.add_web_link(\"/\" + doc.route);\n\t\t}\n\t}\n};\n\n_f.Frm.prototype.add_web_link = function(path, label) {\n\tlabel = label || \"See on Website\";\n\tthis.web_link = this.sidebar.add_user_action(__(label),\n\t\tfunction() {}).attr(\"href\", path || this.doc.route).attr(\"target\", \"_blank\");\n};\n\n_f.Frm.prototype.check_doc_perm = function() {\n\t// get perm\n\tvar dt = this.parent_doctype?this.parent_doctype : this.doctype;\n\tthis.perm = frappe.perm.get_perm(dt, this.doc);\n\n\tif(!this.perm[0].read) {\n\t\treturn 0;\n\t}\n\treturn 1;\n};\n\n_f.Frm.prototype.refresh = function(docname) {\n\tvar is_a_different_doc = docname ? true : false;\n\n\tif(docname) {\n\t\t// record switch\n\t\tif(this.docname != docname && (!this.meta.in_dialog || this.in_form) && !this.meta.istable) {\n\t\t\tfrappe.utils.scroll_to(0);\n\t\t\tthis.hide_print();\n\t\t}\n\t\t// reset visible columns, since column headings can change in different docs\n\t\tthis.grids.forEach(grid_obj => grid_obj.grid.visible_columns = null);\n\t\tfrappe.ui.form.close_grid_form();\n\t\tthis.docname = docname;\n\t}\n\n\tcur_frm = this;\n\n\tif(this.docname) { // document to show\n\n\t\t// set the doc\n\t\tthis.doc = frappe.get_doc(this.doctype, this.docname);\n\n\t\t// check permissions\n\t\tif(!this.check_doc_perm()) {\n\t\t\tfrappe.show_not_permitted(__(this.doctype) + \" \" + __(this.docname));\n\t\t\treturn;\n\t\t}\n\n\t\t// read only (workflow)\n\t\tthis.read_only = frappe.workflow.is_read_only(this.doctype, this.docname);\n\t\tif (this.read_only) this.set_read_only(true);\n\n\t\t// check if doctype is already open\n\t\tif (!this.opendocs[this.docname]) {\n\t\t\tthis.check_doctype_conflict(this.docname);\n\t\t} else {\n\t\t\tif(this.doc && (!this.doc.__unsaved) && this.doc.__last_sync_on &&\n\t\t\t\t(new Date() - this.doc.__last_sync_on) > (this.refresh_if_stale_for * 1000)) {\n\t\t\t\tthis.reload_doc();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// do setup\n\t\tif(!this.setup_done) {\n\t\t\tthis.setup();\n\t\t}\n\n\t\t// load the record for the first time, if not loaded (call 'onload')\n\t\tthis.cscript.is_onload = false;\n\t\tif(!this.opendocs[this.docname]) {\n\t\t\tvar me = this;\n\t\t\tthis.cscript.is_onload = true;\n\t\t\tthis.setnewdoc();\n\t\t\t$(document).trigger(\"form-load\", [this]);\n\t\t\t$(this.page.wrapper).on('hide',  function() {\n\t\t\t\t$(document).trigger(\"form-unload\", [me]);\n\t\t\t});\n\t\t} else {\n\t\t\tthis.render_form(is_a_different_doc);\n\t\t\tif (this.doc.localname) {\n\t\t\t\t// trigger form-rename and remove .localname\n\t\t\t\tdelete this.doc.localname;\n\t\t\t\t$(document).trigger(\"form-rename\", [this]);\n\t\t\t}\n\t\t}\n\n\t\t// if print format is shown, refresh the format\n\t\tif(this.print_preview.wrapper.is(\":visible\")) {\n\t\t\tthis.print_preview.preview();\n\t\t}\n\n\t\tif(is_a_different_doc) {\n\t\t\tif(this.show_print_first && this.doc.docstatus===1) {\n\t\t\t\t// show print view\n\t\t\t\tthis.print_doc();\n\t\t\t}\n\t\t}\n\n\t\t// set status classes\n\t\tthis.$wrapper.removeClass('validated-form')\n\t\t\t.toggleClass('editable-form', this.doc.docstatus===0)\n\t\t\t.toggleClass('submitted-form', this.doc.docstatus===1)\n\t\t\t.toggleClass('cancelled-form', this.doc.docstatus===2);\n\n\t\tthis.show_if_needs_refresh();\n\t}\n};\n\n_f.Frm.prototype.show_if_needs_refresh = function() {\n\tif(this.doc.__needs_refresh) {\n\t\tif(this.doc.__unsaved) {\n\t\t\tthis.dashboard.clear_headline();\n\t\t\tthis.dashboard.set_headline_alert(__(\"This form has been modified after you have loaded it\")\n\t\t\t\t+ '<a class=\"btn btn-xs btn-primary pull-right\" onclick=\"cur_frm.reload_doc()\">'\n\t\t\t\t+ __(\"Refresh\") + '</a>', \"alert-warning\");\n\t\t} else {\n\t\t\tthis.reload_doc();\n\t\t}\n\t}\n};\n\n_f.Frm.prototype.render_form = function(is_a_different_doc) {\n\tif(!this.meta.istable) {\n\t\tthis.layout.doc = this.doc;\n\t\tthis.layout.attach_doc_and_docfields();\n\n\t\tthis.sidebar = new frappe.ui.form.Sidebar({\n\t\t\tfrm: this,\n\t\t\tpage: this.page\n\t\t});\n\t\tthis.sidebar.make();\n\n\t\t// clear layout message\n\t\tthis.layout.show_message();\n\n\t\tfrappe.run_serially([\n\t\t\t// header must be refreshed before client methods\n\t\t\t// because add_custom_button\n\t\t\t() => this.refresh_header(is_a_different_doc),\n\t\t\t// trigger global trigger\n\t\t\t// to use this\n\t\t\t() => $(document).trigger('form-refresh', [this]),\n\t\t\t// fields\n\t\t\t() => this.refresh_fields(),\n\t\t\t// call trigger\n\t\t\t() => this.script_manager.trigger(\"refresh\"),\n\t\t\t// call onload post render for callbacks to be fired\n\t\t\t() => {\n\t\t\t\tif(this.cscript.is_onload) {\n\t\t\t\t\treturn this.script_manager.trigger(\"onload_post_render\");\n\t\t\t\t}\n\t\t\t},\n\t\t\t() => this.dashboard.after_refresh()\n\t\t]);\n\t\t// focus on first input\n\n\t\tif(this.is_new()) {\n\t\t\tvar first = this.form_wrapper.find('.form-layout input:first');\n\t\t\tif(!in_list([\"Date\", \"Datetime\"], first.attr(\"data-fieldtype\"))) {\n\t\t\t\tfirst.focus();\n\t\t\t}\n\t\t}\n\t} else {\n\t\tthis.refresh_header(is_a_different_doc);\n\t}\n\n\tthis.$wrapper.trigger('render_complete');\n\n\tif(!this.hidden) {\n\t\tthis.layout.show_empty_form_message();\n\t}\n\n\tthis.scroll_to_element();\n};\n\n_f.Frm.prototype.refresh_field = function(fname) {\n\tif(this.fields_dict[fname] && this.fields_dict[fname].refresh) {\n\t\tthis.fields_dict[fname].refresh();\n\t\tthis.layout.refresh_dependency();\n\t}\n};\n\n_f.Frm.prototype.refresh_fields = function() {\n\tthis.layout.refresh(this.doc);\n\tthis.layout.primary_button = this.$wrapper.find(\".btn-primary\");\n\n\t// cleanup activities after refresh\n\tthis.cleanup_refresh(this);\n};\n\n\n_f.Frm.prototype.cleanup_refresh = function() {\n\tvar me = this;\n\tif(me.fields_dict['amended_from']) {\n\t\tif (me.doc.amended_from) {\n\t\t\tunhide_field('amended_from');\n\t\t\tif (me.fields_dict['amendment_date']) unhide_field('amendment_date');\n\t\t} else {\n\t\t\thide_field('amended_from');\n\t\t\tif (me.fields_dict['amendment_date']) hide_field('amendment_date');\n\t\t}\n\t}\n\n\tif(me.fields_dict['trash_reason']) {\n\t\tif(me.doc.trash_reason && me.doc.docstatus == 2) {\n\t\t\tunhide_field('trash_reason');\n\t\t} else {\n\t\t\thide_field('trash_reason');\n\t\t}\n\t}\n\n\tif(me.meta.autoname && me.meta.autoname.substr(0,6)=='field:' && !me.doc.__islocal) {\n\t\tvar fn = me.meta.autoname.substr(6);\n\n\t\tif (me.doc[fn]) {\n\t\t\tme.toggle_display(fn, false);\n\t\t}\n\t}\n\n\tif(me.meta.autoname==\"naming_series:\" && !me.doc.__islocal) {\n\t\tme.toggle_display(\"naming_series\", false);\n\t}\n};\n\n_f.Frm.prototype.setnewdoc = function() {\n\t// moved this call to refresh function\n\t// this.check_doctype_conflict(docname);\n\tvar me = this;\n\n\t// hide any open grid\n\tthis.script_manager.trigger(\"before_load\", this.doctype, this.docname)\n\t\t.then(() => {\n\t\t\tme.script_manager.trigger(\"onload\");\n\t\t\tme.opendocs[me.docname] = true;\n\t\t\tme.render_form();\n\n\t\t\tfrappe.after_ajax(function() {\n\t\t\t\tme.trigger_link_fields();\n\t\t\t});\n\n\t\t\tfrappe.breadcrumbs.add(me.meta.module, me.doctype);\n\t\t});\n\n\t// update seen\n\tif(this.meta.track_seen) {\n\t\t$('.list-id[data-name=\"'+ me.docname +'\"]').addClass('seen');\n\t}\n};\n\n_f.Frm.prototype.trigger_link_fields = function() {\n\t// trigger link fields which have default values set\n\tif (this.is_new() && this.doc.__run_link_triggers) {\n\t\t$.each(this.fields_dict, function(fieldname, field) {\n\t\t\tif (field.df.fieldtype==\"Link\" && this.doc[fieldname]) {\n\t\t\t\t// triggers add fetch, sets value in model and runs triggers\n\t\t\t\tfield.set_value(this.doc[fieldname]);\n\t\t\t}\n\t\t});\n\n\t\tdelete this.doc.__run_link_triggers;\n\t}\n};\n\n_f.Frm.prototype.runscript = function(scriptname, callingfield, onrefresh) {\n\tvar me = this;\n\tif(this.docname) {\n\t\t// send to run\n\t\tif(callingfield)\n\t\t\t$(callingfield.input).set_working();\n\n\t\tfrappe.call({\n\t\t\tmethod: \"runserverobj\",\n\t\t\targs: {'docs':this.doc, 'method':scriptname },\n\t\t\tbtn: callingfield.$input,\n\t\t\tcallback: function(r) {\n\t\t\t\tif(!r.exc) {\n\t\t\t\t\tif(onrefresh) {\n\t\t\t\t\t\tonrefresh(r);\n\t\t\t\t\t}\n\n\t\t\t\t\tme.refresh_fields();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n};\n\n_f.Frm.prototype.copy_doc = function(onload, from_amend) {\n\tthis.validate_form_action(\"Create\");\n\tvar newdoc = frappe.model.copy_doc(this.doc, from_amend);\n\n\tnewdoc.idx = null;\n\tnewdoc.__run_link_triggers = false;\n\tif(onload) {\n\t\tonload(newdoc);\n\t}\n\tfrappe.set_route('Form', newdoc.doctype, newdoc.name);\n};\n\n_f.Frm.prototype.reload_doc = function() {\n\tthis.check_doctype_conflict(this.docname);\n\n\tvar me = this;\n\n\tif(!me.doc.__islocal) {\n\t\tfrappe.model.remove_from_locals(me.doctype, me.docname);\n\t\tfrappe.model.with_doc(me.doctype, me.docname, function() {\n\t\t\tme.refresh();\n\t\t});\n\t}\n};\n\nfrappe.validated = 0;\n// Proxy for frappe.validated\nObject.defineProperty(window, 'validated', {\n\tget: function() {\n\t\tconsole.warn('Please use `frappe.validated` instead of `validated`. It will be deprecated soon.');\n\t\treturn frappe.validated;\n\t},\n\tset: function(value) {\n\t\tconsole.warn('Please use `frappe.validated` instead of `validated`. It will be deprecated soon.');\n\t\tfrappe.validated = value;\n\t\treturn frappe.validated;\n\t}\n});\n\n_f.Frm.prototype.save = function(save_action, callback, btn, on_error) {\n\tlet me = this;\n\treturn new Promise((resolve, reject) => {\n\t\tbtn && $(btn).prop(\"disabled\", true);\n\t\t$(document.activeElement).blur();\n\n\t\tfrappe.ui.form.close_grid_form();\n\t\t// let any pending js process finish\n\t\tsetTimeout(function() {\n\t\t\tme._save(save_action, callback, btn, on_error, resolve, reject);\n\t\t}, 100);\n\t}).then(() => {\n\t\tme.show_success_action();\n\t}).catch((e) => {\n\t\tconsole.error(e);\n\t});\n};\n\n_f.Frm.prototype._save = function(save_action, callback, btn, on_error, resolve, reject) {\n\tvar me = this;\n\tif(!save_action) save_action = \"Save\";\n\tthis.validate_form_action(save_action, resolve);\n\n\tif((!this.meta.in_dialog || this.in_form) && !this.meta.istable) {\n\t\tfrappe.utils.scroll_to(0);\n\t}\n\tvar after_save = function(r) {\n\t\tif(!r.exc) {\n\t\t\tif ([\"Save\", \"Update\", \"Amend\"].indexOf(save_action)!==-1) {\n\t\t\t\tfrappe.utils.play_sound(\"click\");\n\t\t\t}\n\n\t\t\tme.script_manager.trigger(\"after_save\");\n\t\t\tme.refresh();\n\t\t} else {\n\t\t\tif(on_error) {\n\t\t\t\ton_error();\n\t\t\t\treject();\n\t\t\t}\n\t\t}\n\t\tcallback && callback(r);\n\t\tresolve();\n\t};\n\n\tvar fail = () => {\n\t\tbtn && $(btn).prop(\"disabled\", false);\n\t\tif(on_error) {\n\t\t\ton_error();\n\t\t\treject();\n\t\t}\n\t};\n\n\tif(save_action != \"Update\") {\n\t\t// validate\n\t\tfrappe.validated = true;\n\t\tfrappe.run_serially([\n\t\t\t() => this.script_manager.trigger(\"validate\"),\n\t\t\t() => this.script_manager.trigger(\"before_save\"),\n\t\t\t() => {\n\t\t\t\tif(!frappe.validated) {\n\t\t\t\t\tfail();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfrappe.ui.form.save(me, save_action, after_save, btn);\n\t\t\t}\n\t\t]).catch(fail);\n\t} else {\n\t\tfrappe.ui.form.save(me, save_action, after_save, btn);\n\t}\n};\n\n\n_f.Frm.prototype.savesubmit = function(btn, callback, on_error) {\n\tvar me = this;\n\n\tlet handle_fail = () => {\n\t\t$(btn).prop('disabled', false);\n\t\tif (on_error) {\n\t\t\ton_error();\n\t\t}\n\t};\n\n\treturn new Promise(resolve => {\n\t\tthis.validate_form_action(\"Submit\");\n\t\tfrappe.confirm(__(\"Permanently Submit {0}?\", [this.docname]), function() {\n\t\t\tfrappe.validated = true;\n\t\t\tme.script_manager.trigger(\"before_submit\").then(function() {\n\t\t\t\tif(!frappe.validated) {\n\t\t\t\t\thandle_fail();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tme.save('Submit', function(r) {\n\t\t\t\t\tif(r.exc) {\n\t\t\t\t\t\thandle_fail();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfrappe.utils.play_sound(\"submit\");\n\t\t\t\t\t\tcallback && callback();\n\t\t\t\t\t\tme.script_manager.trigger(\"on_submit\")\n\t\t\t\t\t\t\t.then(() => resolve(me));\n\t\t\t\t\t}\n\t\t\t\t}, btn, () => handle_fail(), resolve);\n\t\t\t});\n\t\t}, () => handle_fail() );\n\t});\n};\n\n_f.Frm.prototype.savecancel = function(btn, callback, on_error) {\n\tvar me = this;\n\n\tlet handle_fail = () => {\n\t\t$(btn).prop('disabled', false);\n\t\tif (on_error) {\n\t\t\ton_error();\n\t\t}\n\t};\n\n\tthis.validate_form_action('Cancel');\n\tfrappe.confirm(__(\"Permanently Cancel {0}?\", [this.docname]), function() {\n\t\tfrappe.validated = true;\n\t\tme.script_manager.trigger(\"before_cancel\").then(function() {\n\t\t\tif(!frappe.validated) {\n\t\t\t\thandle_fail();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar after_cancel = function(r) {\n\t\t\t\tif(r.exc) {\n\t\t\t\t\thandle_fail();\n\t\t\t\t} else {\n\t\t\t\t\tfrappe.utils.play_sound(\"cancel\");\n\t\t\t\t\tme.refresh();\n\t\t\t\t\tcallback && callback();\n\t\t\t\t\tme.script_manager.trigger(\"after_cancel\");\n\t\t\t\t}\n\t\t\t};\n\t\t\tfrappe.ui.form.save(me, \"cancel\", after_cancel, btn);\n\t\t});\n\t}, () => handle_fail());\n};\n\n// delete the record\n_f.Frm.prototype.savetrash = function() {\n\tthis.validate_form_action(\"Delete\");\n\tfrappe.model.delete_doc(this.doctype, this.docname, function() {\n\t\twindow.history.back();\n\t});\n};\n\n_f.Frm.prototype.amend_doc = function() {\n\tif(!this.fields_dict['amended_from']) {\n\t\talert('\"amended_from\" field must be present to do an amendment.');\n\t\treturn;\n\t}\n\tthis.validate_form_action(\"Amend\");\n\tvar me = this;\n\tvar fn = function(newdoc) {\n\t\tnewdoc.amended_from = me.docname;\n\t\tif(me.fields_dict && me.fields_dict['amendment_date'])\n\t\t\tnewdoc.amendment_date = frappe.datetime.obj_to_str(new Date());\n\t};\n\tthis.copy_doc(fn, 1);\n\tfrappe.utils.play_sound(\"click\");\n};\n\n_f.Frm.prototype.disable_save = function() {\n\t// IMPORTANT: this function should be called in refresh event\n\tthis.save_disabled = true;\n\tthis.toolbar.current_status = null;\n\tthis.page.clear_primary_action();\n};\n\n_f.Frm.prototype.enable_save = function() {\n\tthis.save_disabled = false;\n\tthis.toolbar.set_primary_action();\n};\n\n_f.Frm.prototype.save_or_update = function() {\n\tif(this.save_disabled) return;\n\n\tif(this.doc.docstatus===0) {\n\t\tthis.save();\n\t} else if(this.doc.docstatus===1 && this.doc.__unsaved) {\n\t\tthis.save(\"Update\");\n\t}\n};\n\n_f.Frm.prototype.dirty = function() {\n\tthis.doc.__unsaved = 1;\n\tthis.$wrapper.trigger('dirty');\n};\n\n_f.Frm.prototype.get_docinfo = function() {\n\treturn frappe.model.docinfo[this.doctype][this.docname];\n};\n\n_f.Frm.prototype.is_dirty = function() {\n\treturn this.doc.__unsaved;\n};\n\n_f.Frm.prototype.is_new = function() {\n\treturn this.doc.__islocal;\n};\n\n\n_f.Frm.prototype.reload_docinfo = function(callback) {\n\tvar me = this;\n\tfrappe.call({\n\t\tmethod: \"frappe.desk.form.load.get_docinfo\",\n\t\targs: {\n\t\t\tdoctype: me.doctype,\n\t\t\tname: me.doc.name\n\t\t},\n\t\tcallback: function(r) {\n\t\t\t// docinfo will be synced\n\t\t\tif(callback) callback(r.docinfo);\n\t\t\tme.timeline.refresh();\n\t\t\tme.assign_to.refresh();\n\t\t\tme.attachments.refresh();\n\t\t}\n\t});\n};\n\n\n_f.Frm.prototype.get_perm = function(permlevel, access_type) {\n\treturn this.perm[permlevel] ? this.perm[permlevel][access_type] : null;\n};\n\n\n_f.Frm.prototype.set_intro = function(txt) {\n\tthis.dashboard.set_headline_alert(txt);\n};\n\n_f.Frm.prototype.set_footnote = function(txt) {\n\tthis.footnote_area = frappe.utils.set_footnote(this.footnote_area, this.body, txt);\n};\n\n\n_f.Frm.prototype.add_custom_button = function(label, fn, group) {\n\t// temp! old parameter used to be icon\n\tif(group && group.indexOf(\"fa fa-\")!==-1) group = null;\n\tvar btn = this.page.add_inner_button(label, fn, group);\n\tif(btn) {\n\t\tthis.custom_buttons[label] = btn;\n\t}\n\treturn btn;\n};\n\n//Remove all custom buttons\n_f.Frm.prototype.clear_custom_buttons = function() {\n\tthis.page.clear_inner_toolbar();\n\tthis.page.clear_user_actions();\n\tthis.custom_buttons = {};\n};\n\n//Remove specific custom button by button Label\n_f.Frm.prototype.remove_custom_button = function(label, group) {\n\tthis.page.remove_inner_button(label, group);\n};\n\n_f.Frm.prototype.add_fetch = function(link_field, src_field, tar_field) {\n\tif(!this.fetch_dict[link_field]) {\n\t\tthis.fetch_dict[link_field] = {'columns':[], 'fields':[]};\n\t}\n\tthis.fetch_dict[link_field].columns.push(src_field);\n\tthis.fetch_dict[link_field].fields.push(tar_field);\n};\n\n_f.Frm.prototype.set_print_heading = function(txt) {\n\tthis.pformat[this.docname] = txt;\n};\n\n_f.Frm.prototype.action_perm_type_map = {\n\t\"Create\": \"create\",\n\t\"Save\": \"write\",\n\t\"Submit\": \"submit\",\n\t\"Update\": \"submit\",\n\t\"Cancel\": \"cancel\",\n\t\"Amend\": \"amend\",\n\t\"Delete\": \"delete\"\n};\n\n_f.Frm.prototype.validate_form_action = function(action, resolve) {\n\tvar perm_to_check = this.action_perm_type_map[action];\n\tvar allowed_for_workflow = false;\n\tvar perms = frappe.perm.get_perm(this.doc.doctype)[0];\n\n\t// Allow submit, write, cancel and create permissions for read only documents that are assigned by\n\t// workflows if the user already have those permissions. This is to allow for users to\n\t// continue through the workflow states and to allow execution of functions like Duplicate.\n\tif ((frappe.workflow.is_read_only(this.doctype, this.docname) && (perms[\"write\"] ||\n\t\tperms[\"create\"] || perms[\"submit\"] || perms[\"cancel\"])) || !frappe.workflow.is_read_only(this.doctype, this.docname)) {\n\t\tallowed_for_workflow = true;\n\t}\n\n\tif (!this.perm[0][perm_to_check] && !allowed_for_workflow) {\n\t\tif(resolve) {\n\t\t\t// re-enable buttons\n\t\t\tresolve();\n\t\t}\n\t\tfrappe.throw (__(\"No permission to '{0}' {1}\", [__(action), __(this.doc.doctype)]));\n\t}\n};\n\n_f.Frm.prototype.has_perm = function(ptype) {\n\treturn frappe.perm.has_perm(this.doctype, 0, ptype, this.doc);\n};\n\n_f.Frm.prototype.scroll_to_element = function() {\n\tif (frappe.route_options && frappe.route_options.scroll_to) {\n\t\tvar scroll_to = frappe.route_options.scroll_to;\n\t\tdelete frappe.route_options.scroll_to;\n\n\t\tvar selector = [];\n\t\tfor (var key in scroll_to) {\n\t\t\tvar value = scroll_to[key];\n\t\t\tselector.push(repl('[data-%(key)s=\"%(value)s\"]', {key: key, value: value}));\n\t\t}\n\n\t\tselector = $(selector.join(\" \"));\n\t\tif (selector.length) {\n\t\t\tfrappe.utils.scroll_to(selector);\n\t\t}\n\t}\n};\n\n_f.Frm.prototype.show_success_action = function() {\n\tconst route = frappe.get_route();\n\tif (route[0] !== 'Form') return;\n\tif (this.meta.is_submittable && this.doc.docstatus !== 1) return;\n\n\tconst success_action = new frappe.ui.form.SuccessAction(this);\n\tsuccess_action.show();\n};\n\n_f.Frm.prototype.is_first_creation = function() {\n\tlet { modified, creation } = this.doc;\n\n\t// strip out milliseconds\n\tmodified = modified.split('.')[0];\n\tcreation = creation.split('.')[0];\n\n\treturn modified === creation;\n};\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n/* eslint-disable no-console */\n\nwindow.get_server_fields = function(method, arg, table_field, doc, dt, dn, allow_edit, call_back) {\n\tconsole.warn(\"This function 'get_server_fields' has been deprecated and will be removed soon.\");\n\tfrappe.dom.freeze();\n\tif($.isPlainObject(arg)) arg = JSON.stringify(arg);\n\treturn $c('runserverobj', {'method': method, 'docs': JSON.stringify(doc), 'arg': arg },\n\t\tfunction(r) {\n\t\t\tfrappe.dom.unfreeze();\n\t\t\tif (r.message)  {\n\t\t\t\tvar d = locals[dt][dn];\n\t\t\t\tvar field_dict = r.message;\n\t\t\t\tfor(var key in field_dict) {\n\t\t\t\t\td[key] = field_dict[key];\n\t\t\t\t\tif (table_field)\n\t\t\t\t\t\trefresh_field(key, d.name, table_field);\n\t\t\t\t\telse\n\t\t\t\t\t\trefresh_field(key);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(call_back){\n\t\t\t\tdoc = locals[doc.doctype][doc.name];\n\t\t\t\tcall_back(doc, dt, dn);\n\t\t\t}\n\t\t});\n};\n\n\nwindow.set_multiple = function(dt, dn, dict, table_field) {\n\tvar d = locals[dt][dn];\n\tfor(var key in dict) {\n\t\td[key] = dict[key];\n\t\tif (table_field)\n\t\t\trefresh_field(key, d.name, table_field);\n\t\telse\n\t\t\trefresh_field(key);\n\t}\n};\n\nwindow.refresh_many = function(flist, dn, table_field) {\n\tfor(var i in flist) {\n\t\tif (table_field)\n\t\t\trefresh_field(flist[i], dn, table_field);\n\t\telse\n\t\t\trefresh_field(flist[i]);\n\t}\n};\n\nwindow.set_field_tip = function(n,txt) {\n\tvar df = frappe.meta.get_docfield(cur_frm.doctype, n, cur_frm.docname);\n\tif(df)df.description = txt;\n\n\tif(cur_frm && cur_frm.fields_dict) {\n\t\tif(cur_frm.fields_dict[n])\n\t\t\tcur_frm.fields_dict[n].comment_area.innerHTML = frappe.utils.replace_newlines(txt);\n\t\telse\n\t\t\tconsole.log('[set_field_tip] Unable to set field tip: ' + n);\n\t}\n};\n\nwindow.refresh_field = function(n, docname, table_field) {\n\t// multiple\n\tif(typeof n==typeof [])\n\t\trefresh_many(n, docname, table_field);\n\n\tif (n && typeof n==='string' && table_field){\n\t\tvar grid = cur_frm.fields_dict[table_field].grid,\n\t\t\tfield = frappe.utils.filter_dict(grid.docfields, {fieldname: n});\n\t\tif (field && field.length){\n\t\t\tfield = field[0];\n\t\t\tvar meta = frappe.meta.get_docfield(field.parent, field.fieldname, docname);\n\t\t\t$.extend(field, meta);\n\t\t\tif (docname){\n\t\t\t\tcur_frm.fields_dict[table_field].grid.grid_rows_by_docname[docname].refresh_field(n);\n\t\t\t} else {\n\t\t\t\tcur_frm.fields_dict[table_field].grid.refresh();\n\t\t\t}\n\t\t}\n\t} else if(cur_frm) {\n\t\tcur_frm.refresh_field(n);\n\t}\n};\n\nwindow.set_field_options = function(n, txt) {\n\tcur_frm.set_df_property(n, 'options', txt);\n};\n\nwindow.set_field_permlevel = function(n, level) {\n\tcur_frm.set_df_property(n, 'permlevel', level);\n};\n\nwindow.toggle_field = function(n, hidden) {\n\tvar df = frappe.meta.get_docfield(cur_frm.doctype, n, cur_frm.docname);\n\tif(df) {\n\t\tdf.hidden = hidden;\n\t\trefresh_field(n);\n\t} else {\n\t\tconsole.log((hidden ? \"hide_field\" : \"unhide_field\") + \" cannot find field \" + n);\n\t}\n};\n\nwindow.hide_field = function(n) {\n\tif(cur_frm) {\n\t\tif(n.substr) toggle_field(n, 1);\n\t\telse {\n\t\t\tfor(var i in n) toggle_field(n[i], 1);\n\t\t}\n\t}\n};\n\nwindow.unhide_field = function(n) {\n\tif(cur_frm) {\n\t\tif(n.substr) toggle_field(n, 0);\n\t\telse {\n\t\t\tfor(var i in n) toggle_field(n[i], 0);\n\t\t}\n\t}\n};\n\nwindow.get_field_obj = function(fn) {\n\treturn cur_frm.fields_dict[fn];\n};\n\n_f.Frm.prototype.get_doc = function() {\n\treturn locals[this.doctype][this.docname];\n};\n\n_f.Frm.prototype.set_currency_labels = function(fields_list, currency, parentfield) {\n\t// To set the currency in the label\n\t// For example Total Cost(INR), Total Cost(USD)\n\n\tvar me = this;\n\tvar doctype = parentfield ? this.fields_dict[parentfield].grid.doctype : this.doc.doctype;\n\tvar field_label_map = {};\n\tvar grid_field_label_map = {};\n\n\t$.each(fields_list, function(i, fname) {\n\t\tvar docfield = frappe.meta.docfield_map[doctype][fname];\n\t\tif(docfield) {\n\t\t\tvar label = __(docfield.label || \"\").replace(/\\([^\\)]*\\)/g, \"\"); // eslint-disable-line\n\t\t\tif(parentfield) {\n\t\t\t\tgrid_field_label_map[doctype + \"-\" + fname] =\n\t\t\t\t\tlabel.trim() + \" (\" + __(currency) + \")\";\n\t\t\t} else {\n\t\t\t\tfield_label_map[fname] = label.trim() + \" (\" + currency + \")\";\n\t\t\t}\n\t\t}\n\t});\n\n\t$.each(field_label_map, function(fname, label) {\n\t\tme.fields_dict[fname].set_label(label);\n\t});\n\n\t$.each(grid_field_label_map, function(fname, label) {\n\t\tfname = fname.split(\"-\");\n\t\tvar df = frappe.meta.get_docfield(fname[0], fname[1], me.doc.name);\n\t\tif(df) df.label = label;\n\t});\n};\n\n_f.Frm.prototype.field_map = function(fnames, fn) {\n\tif(typeof fnames==='string') {\n\t\tif(fnames == '*') {\n\t\t\tfnames = Object.keys(this.fields_dict);\n\t\t} else {\n\t\t\tfnames = [fnames];\n\t\t}\n\t}\n\tfor (var i=0, l=fnames.length; i<l; i++) {\n\t\tvar fieldname = fnames[i];\n\t\tvar field = frappe.meta.get_docfield(cur_frm.doctype, fieldname, this.docname);\n\t\tif(field) {\n\t\t\tfn(field);\n\t\t\tthis.refresh_field(fieldname);\n\t\t}\n\t}\n};\n\n_f.Frm.prototype.get_docfield = function(fieldname1, fieldname2) {\n\tif(fieldname2) {\n\t\t// for child\n\t\tvar doctype = this.get_docfield(fieldname1).options;\n\t\treturn frappe.meta.get_docfield(doctype, fieldname2, this.docname);\n\t} else {\n\t\t// for parent\n\t\treturn frappe.meta.get_docfield(this.doctype, fieldname1, this.docname);\n\t}\n};\n\n_f.Frm.prototype.set_df_property = function(fieldname, property, value, docname, table_field) {\n\tvar df;\n\tif (!docname && !table_field){\n\t\tdf = this.get_docfield(fieldname);\n\t} else {\n\t\tvar grid = this.fields_dict[table_field].grid,\n\t\t\tfname = frappe.utils.filter_dict(grid.docfields, {'fieldname': fieldname});\n\t\tif (fname && fname.length)\n\t\t\tdf = frappe.meta.get_docfield(fname[0].parent, fieldname, docname);\n\t}\n\tif(df && df[property] != value) {\n\t\tdf[property] = value;\n\t\trefresh_field(fieldname, table_field);\n\t}\n};\n\n_f.Frm.prototype.toggle_enable = function(fnames, enable) {\n\tthis.field_map(fnames, function(field) {\n\t\tfield.read_only = enable ? 0 : 1;\n\t});\n};\n\n_f.Frm.prototype.toggle_reqd = function(fnames, mandatory) {\n\tthis.field_map(fnames, function(field) {\n\t\tfield.reqd = mandatory ? true : false;\n\t});\n};\n\n_f.Frm.prototype.toggle_display = function(fnames, show) {\n\tthis.field_map(fnames, function(field) {\n\t\tfield.hidden = show ? 0 : 1;\n\t});\n};\n\n_f.Frm.prototype.call_server = function(method, args, callback) {\n\treturn $c_obj(this.doc, method, args, callback);\n};\n\n_f.Frm.prototype.get_files = function() {\n\treturn this.attachments\n\t\t? frappe.utils.sort(this.attachments.get_attachments(), \"file_name\", \"string\")\n\t\t: [] ;\n};\n\n_f.Frm.prototype.set_query = function(fieldname, opt1, opt2) {\n\tif(opt2) {\n\t\t// on child table\n\t\t// set_query(fieldname, parent fieldname, query)\n\t\tthis.fields_dict[opt1].grid.get_field(fieldname).get_query = opt2;\n\t} else {\n\t\t// on parent table\n\t\t// set_query(fieldname, query)\n\t\tif(this.fields_dict[fieldname]) {\n\t\t\tthis.fields_dict[fieldname].get_query = opt1;\n\t\t}\n\t}\n};\n\n_f.Frm.prototype.set_value_if_missing = function(field, value) {\n\treturn this.set_value(field, value, true);\n};\n\n_f.Frm.prototype.clear_table = function(fieldname) {\n\tfrappe.model.clear_table(this.doc, fieldname);\n};\n\n_f.Frm.prototype.add_child = function(fieldname, values) {\n\tvar doc = frappe.model.add_child(this.doc, frappe.meta.get_docfield(this.doctype, fieldname).options, fieldname);\n\tif(values) {\n\t\t// Values of unique keys should not be overridden\n\t\tvar d = {};\n\t\tvar unique_keys = [\"idx\", \"name\"];\n\n\t\tObject.keys(values).map((key) => {\n\t\t\tif(!unique_keys.includes(key)) {\n\t\t\t\td[key] = values[key];\n\t\t\t}\n\t\t});\n\n\t\t$.extend(doc, d);\n\t}\n\treturn doc;\n};\n\n_f.Frm.prototype.set_value = function(field, value, if_missing) {\n\tvar me = this;\n\tvar _set = function(f, v) {\n\t\tvar fieldobj = me.fields_dict[f];\n\t\tif(fieldobj) {\n\t\t\tif(!if_missing || !frappe.model.has_value(me.doctype, me.doc.name, f)) {\n\t\t\t\tif(fieldobj.df.fieldtype===\"Table\" && $.isArray(v)) {\n\n\t\t\t\t\tfrappe.model.clear_table(me.doc, fieldobj.df.fieldname);\n\n\t\t\t\t\tfor (var i=0, j=v.length; i < j; i++) {\n\t\t\t\t\t\tvar d = v[i];\n\t\t\t\t\t\tvar child = frappe.model.add_child(me.doc, fieldobj.df.options,\n\t\t\t\t\t\t\tfieldobj.df.fieldname, i+1);\n\t\t\t\t\t\t$.extend(child, d);\n\t\t\t\t\t}\n\n\t\t\t\t\tme.refresh_field(f);\n\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t} else {\n\t\t\t\t\treturn frappe.model.set_value(me.doctype, me.doc.name, f, v);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfrappe.msgprint(__(\"Field {0} not found.\",[f]));\n\t\t\tthrow \"frm.set_value\";\n\t\t}\n\t};\n\n\tif(typeof field==\"string\") {\n\t\treturn _set(field, value);\n\t} else if($.isPlainObject(field)) {\n\t\tlet tasks = [];\n\t\tfor (let f in field) {\n\t\t\tlet v = field[f];\n\t\t\tif(me.get_field(f)) {\n\t\t\t\ttasks.push(() => _set(f, v));\n\t\t\t}\n\t\t}\n\t\treturn frappe.run_serially(tasks);\n\t}\n};\n\n_f.Frm.prototype.call = function(opts, args, callback) {\n\tvar me = this;\n\tif(typeof opts==='string') {\n\t\t// called as frm.call('do_this', {with_arg: 'arg'});\n\t\topts = {\n\t\t\tmethod: opts,\n\t\t\tdoc: this.doc,\n\t\t\targs: args,\n\t\t\tcallback: callback\n\t\t};\n\t}\n\tif(!opts.doc) {\n\t\tif(opts.method.indexOf(\".\")===-1)\n\t\t\topts.method = frappe.model.get_server_module_name(me.doctype) + \".\" + opts.method;\n\t\topts.original_callback = opts.callback;\n\t\topts.callback = function(r) {\n\t\t\tif($.isPlainObject(r.message)) {\n\t\t\t\tif(opts.child) {\n\t\t\t\t\t// update child doc\n\t\t\t\t\topts.child = locals[opts.child.doctype][opts.child.name];\n\n\t\t\t\t\tvar std_field_list = [\"doctype\"].concat(frappe.model.std_fields_list);\n\t\t\t\t\tfor (var key in r.message) {\n\t\t\t\t\t\tif (std_field_list.indexOf(key)===-1) {\n\t\t\t\t\t\t\topts.child[key] = r.message[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tme.fields_dict[opts.child.parentfield].refresh();\n\t\t\t\t} else {\n\t\t\t\t\t// update parent doc\n\t\t\t\t\tme.set_value(r.message);\n\t\t\t\t}\n\t\t\t}\n\t\t\topts.original_callback && opts.original_callback(r);\n\t\t};\n\t} else {\n\t\topts.original_callback = opts.callback;\n\t\topts.callback = function(r) {\n\t\t\tif(!r.exc) me.refresh_fields();\n\n\t\t\topts.original_callback && opts.original_callback(r);\n\t\t};\n\n\t}\n\treturn frappe.call(opts);\n};\n\n_f.Frm.prototype.get_field = function(field) {\n\treturn this.fields_dict[field];\n};\n\n\n_f.Frm.prototype.set_read_only = function() {\n\tvar perm = [];\n\tvar docperms = frappe.perm.get_perm(this.doc.doctype);\n\tfor (var i=0, l=docperms.length; i<l; i++) {\n\t\tvar p = docperms[i];\n\t\tperm[p.permlevel || 0] = {read:1, print:1, cancel:1};\n\t}\n\tthis.perm = perm;\n};\n\n_f.Frm.prototype.trigger = function(event) {\n\treturn this.script_manager.trigger(event);\n};\n\n_f.Frm.prototype.get_formatted = function(fieldname) {\n\treturn frappe.format(this.doc[fieldname],\n\t\tfrappe.meta.get_docfield(this.doctype, fieldname, this.docname),\n\t\t{no_icon:true}, this.doc);\n};\n\n_f.Frm.prototype.open_grid_row = function() {\n\treturn frappe.ui.form.get_open_grid_form();\n};\n\n_f.Frm.prototype.is_new = function() {\n\treturn this.doc.__islocal;\n};\n\n_f.Frm.prototype.get_title = function() {\n\tif(this.meta.title_field) {\n\t\treturn this.doc[this.meta.title_field];\n\t} else {\n\t\treturn this.doc.name;\n\t}\n};\n\n_f.Frm.prototype.get_selected = function() {\n\t// returns list of children that are selected. returns [parentfield, name] for each\n\tvar selected = {}, me = this;\n\tfrappe.meta.get_table_fields(this.doctype).forEach(function(df) {\n\t\tvar _selected = me.fields_dict[df.fieldname].grid.get_selected();\n\t\tif(_selected.length) {\n\t\t\tselected[df.fieldname] = _selected;\n\t\t}\n\t});\n\treturn selected;\n};\n\n_f.Frm.prototype.has_mapper = function() {\n\t// hackalert!\n\t// if open_mapped_doc is mentioned in the custom script, then mapper exists\n\tif(this._has_mapper === undefined) {\n\t\tthis._has_mapper = (this.meta.__js && this.meta.__js.search('open_mapped_doc')!==-1) ?\n\t\t\ttrue: false;\n\t}\n\treturn this._has_mapper;\n};\n\n_f.Frm.prototype.set_indicator_formatter = function(fieldname, get_color, get_text) {\n\t// get doctype from parent\n\tvar doctype;\n\tif(frappe.meta.docfield_map[this.doctype][fieldname]) {\n\t\tdoctype = this.doctype;\n\t} else {\n\t\tfrappe.meta.get_table_fields(this.doctype).every(function(df) {\n\t\t\tif(frappe.meta.docfield_map[df.options][fieldname]) {\n\t\t\t\tdoctype = df.options;\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t}\n\n\tfrappe.meta.docfield_map[doctype][fieldname].formatter =\n\t\tfunction(value, df, options, doc) {\n\t\t\tif(value) {\n\t\t\t\tvar label;\n\t\t\t\tif(get_text) {\n\t\t\t\t\tlabel = get_text(doc);\n\t\t\t\t} else if(frappe.form.link_formatters[df.options]) {\n\t\t\t\t\tlabel = frappe.form.link_formatters[df.options](value, doc);\n\t\t\t\t} else {\n\t\t\t\t\tlabel = value;\n\t\t\t\t}\n\n\t\t\t\tconst escaped_name = encodeURIComponent(value);\n\t\t\t\treturn repl('<a class=\"indicator %(color)s\" href=\"#Form/%(doctype)s/%(name)s\">%(label)s</a>', {\n\t\t\t\t\tcolor: get_color(doc || {}),\n\t\t\t\t\tdoctype: df.options,\n\t\t\t\t\tname: escaped_name,\n\t\t\t\t\tlabel: label\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t};\n};\n\n_f.Frm.prototype.can_create = function(doctype) {\n\t// return true or false if the user can make a particlar doctype\n\t// will check permission, `can_make_methods` if exists, or will decided on\n\t// basis of whether the document is submittable\n\tif(!frappe.model.can_create(doctype)) {\n\t\treturn false;\n\t}\n\n\tif(this.custom_make_buttons && this.custom_make_buttons[doctype]) {\n\t\t// custom buttons are translated and so are the keys\n\t\tconst key = __(this.custom_make_buttons[doctype]);\n\t\t// if the button is present, then show make\n\t\treturn !!this.custom_buttons[key];\n\t}\n\n\tif(this.can_make_methods && this.can_make_methods[doctype]) {\n\t\treturn this.can_make_methods[doctype](this);\n\t} else {\n\t\tif(this.meta.is_submittable && !this.doc.docstatus==1) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t}\n};\n\n_f.Frm.prototype.make_new = function(doctype) {\n\t// make new doctype from the current form\n\t// will handover to `make_methods` if defined\n\t// or will create and match link fields\n\tvar me = this;\n\tif(this.make_methods && this.make_methods[doctype]) {\n\t\treturn this.make_methods[doctype](this);\n\t} else if(this.custom_make_buttons && this.custom_make_buttons[doctype]) {\n\t\tthis.custom_buttons[__(this.custom_make_buttons[doctype])].trigger('click');\n\t} else {\n\t\tfrappe.model.with_doctype(doctype, function() {\n\t\t\tvar new_doc = frappe.model.get_new_doc(doctype);\n\n\t\t\t// set link fields (if found)\n\t\t\tfrappe.get_meta(doctype).fields.forEach(function(df) {\n\t\t\t\tif(df.fieldtype==='Link' && df.options===me.doctype) {\n\t\t\t\t\tnew_doc[df.fieldname] = me.doc.name;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tfrappe.ui.form.make_quick_entry(doctype, null, null, new_doc);\n\t\t\t// frappe.set_route('Form', doctype, new_doc.name);\n\t\t});\n\t}\n};\n\n_f.Frm.prototype.update_in_all_rows = function(table_fieldname, fieldname, value) {\n\t// update the child value in all tables where it is missing\n\tif(!value) return;\n\tvar cl = this.doc[table_fieldname] || [];\n\tfor(var i = 0; i < cl.length; i++){\n\t\tif(!cl[i][fieldname]) cl[i][fieldname] = value;\n\t}\n\trefresh_field(\"items\");\n};\n\n_f.Frm.prototype.get_sum = function(table_fieldname, fieldname) {\n\tlet sum = 0;\n\tfor (let d of (this.doc[table_fieldname] || [])) {\n\t\tsum += d[fieldname];\n\t}\n\treturn sum;\n};\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide(\"frappe.ui.form\");\nfrappe.ui.form.Toolbar = Class.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\t\tthis.refresh();\n\t\tthis.add_update_button_on_dirty();\n\t\tthis.setup_editable_title();\n\t},\n\trefresh: function() {\n\t\tthis.make_menu();\n\t\tthis.set_title();\n\t\tthis.page.clear_user_actions();\n\t\tthis.show_title_as_dirty();\n\t\tthis.set_primary_action();\n\n\t\tif(this.frm.meta.hide_toolbar) {\n\t\t\tthis.page.hide_menu();\n\t\t} else {\n\t\t\tif(this.frm.doc.__islocal) {\n\t\t\t\tthis.page.hide_menu();\n\t\t\t\tthis.print_icon && this.print_icon.addClass(\"hide\");\n\t\t\t} else {\n\t\t\t\tthis.page.show_menu();\n\t\t\t\tthis.print_icon && this.print_icon.removeClass(\"hide\");\n\t\t\t}\n\t\t}\n\t},\n\tset_title: function() {\n\t\tif(this.frm.meta.title_field) {\n\t\t\tvar title = strip_html((this.frm.doc[this.frm.meta.title_field] || \"\").trim() || this.frm.docname);\n\t\t\tif(this.frm.doc.__islocal || title === this.frm.docname || this.frm.meta.autoname===\"hash\") {\n\t\t\t\tthis.page.set_title_sub(\"\");\n\t\t\t} else {\n\t\t\t\tthis.page.set_title_sub(this.frm.docname);\n\t\t\t}\n\t\t} else {\n\t\t\tvar title = this.frm.docname;\n\t\t}\n\n\t\tvar me = this;\n\t\ttitle = __(title);\n\t\tthis.page.set_title(title);\n\t\tif(this.frm.meta.title_field) {\n\t\t\tfrappe.utils.set_title(title + \" - \" + this.frm.docname);\n\t\t}\n\t\tthis.page.$title_area.toggleClass(\"editable-title\",\n\t\t\t!!(this.is_title_editable() || this.can_rename()));\n\n\t\tthis.set_indicator();\n\t},\n\tis_title_editable: function() {\n\t\tif (this.frm.meta.title_field===\"title\"\n\t\t\t&& this.frm.perm[0].write\n\t\t\t&& !this.frm.get_docfield(\"title\").options\n\t\t\t&& !this.frm.doc.__islocal) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\tcan_rename: function() {\n\t\treturn this.frm.perm[0].write && this.frm.meta.allow_rename && !this.frm.doc.__islocal;\n\t},\n\tsetup_editable_title: function() {\n\t\tvar me = this;\n\t\tthis.page.$title_area.find(\".title-text\").on(\"click\", function() {\n\t\t\tif(me.is_title_editable()) {\n\t\t\t\tfrappe.prompt({fieldname: \"title\", fieldtype:\"Data\",\n\t\t\t\t\tlabel: __(\"Title\"), reqd: 1, \"default\": me.frm.doc.title },\n\t\t\t\t\tfunction(data) {\n\t\t\t\t\t\tif(data.title) {\n\t\t\t\t\t\t\tme.frm.set_value(\"title\", data.title);\n\t\t\t\t\t\t\tif(!me.frm.doc.__islocal) {\n\t\t\t\t\t\t\t\tme.frm.save_or_update();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tme.set_title();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}, __(\"Edit Title\"), __(\"Update\"));\n\t\t\t}\n\t\t\tif(me.can_rename()) {\n\t\t\t\tme.frm.rename_doc();\n\t\t\t}\n\t\t});\n\t},\n\tget_dropdown_menu: function(label) {\n\t\treturn this.page.add_dropdown(label);\n\t},\n\tset_indicator: function() {\n\t\tif(this.frm.save_disabled)\n\t\t\treturn;\n\n\t\tvar indicator = frappe.get_indicator(this.frm.doc);\n\t\tif(indicator) {\n\t\t\tthis.page.set_indicator(indicator[0], indicator[1]);\n\t\t} else {\n\t\t\tthis.page.clear_indicator();\n\t\t}\n\t},\n\tmake_menu: function() {\n\t\tthis.page.clear_icons();\n\t\tthis.page.clear_menu();\n\t\tvar me = this;\n\t\tvar p = this.frm.perm[0];\n\t\tvar docstatus = cint(this.frm.doc.docstatus);\n\t\tvar is_submittable = frappe.model.is_submittable(this.frm.doc.doctype)\n\t\tvar issingle = this.frm.meta.issingle;\n\t\tvar print_settings = frappe.model.get_doc(\":Print Settings\", \"Print Settings\")\n\t\tvar allow_print_for_draft = cint(print_settings.allow_print_for_draft);\n\t\tvar allow_print_for_cancelled = cint(print_settings.allow_print_for_cancelled);\n\n\t\t// Print\n\t\tif(!is_submittable || docstatus == 1  ||\n\t\t\t(allow_print_for_cancelled && docstatus == 2)||\n\t\t\t(allow_print_for_draft && docstatus == 0)) {\n\t\t\tif(frappe.model.can_print(null, me.frm) && !issingle) {\n\t\t\t\tthis.page.add_menu_item(__(\"Print\"), function() {\n\t\t\t\t\tme.frm.print_doc();}, true);\n\t\t\t\tthis.print_icon = this.page.add_action_icon(\"fa fa-print\", function() {\n\t\t\t\t\tme.frm.print_doc();});\n\t\t\t}\n\t\t}\n\n\t\t// email\n\t\tif(frappe.model.can_email(null, me.frm) && me.frm.doc.docstatus < 2) {\n\t\t\tthis.page.add_menu_item(__(\"Email\"), function() {\n\t\t\t\tme.frm.email_doc();}, true);\n\t\t}\n\n\t\t// Linked With\n\t\tif(!me.frm.meta.issingle) {\n\t\t\tthis.page.add_menu_item(__('Links'), function() {\n\t\t\t\tme.show_linked_with();\n\t\t\t}, true)\n\t\t}\n\n\t\t// copy\n\t\tif(in_list(frappe.boot.user.can_create, me.frm.doctype) && !me.frm.meta.allow_copy) {\n\t\t\tthis.page.add_menu_item(__(\"Duplicate\"), function() {\n\t\t\t\tme.frm.copy_doc();}, true);\n\t\t}\n\n\t\t// rename\n\t\tif(this.can_rename()) {\n\t\t\tthis.page.add_menu_item(__(\"Rename\"), function() {\n\t\t\t\tme.frm.rename_doc();}, true);\n\t\t}\n\n\t\t// reload\n\t\tthis.page.add_menu_item(__(\"Reload\"), function() {\n\t\t\tme.frm.reload_doc();}, true);\n\n\t\t// add to desktop\n\t\tif(me.frm.meta.issingle) {\n\t\t\tthis.page.add_menu_item(__('Add to Desktop'), function () {\n\t\t\t\tfrappe.add_to_desktop(me.frm.doctype, me.frm.doctype);\n\t\t\t}, true);\n\t\t}\n\n\t\t// delete\n\t\tif((cint(me.frm.doc.docstatus) != 1) && !me.frm.doc.__islocal\n\t\t\t&& frappe.model.can_delete(me.frm.doctype)) {\n\t\t\tthis.page.add_menu_item(__(\"Delete\"), function() {\n\t\t\t\tme.frm.savetrash();}, true);\n\t\t}\n\n\t\tif(frappe.user_roles.includes(\"System Manager\")) {\n\t\t\tthis.page.add_menu_item(__(\"Customize\"), function() {\n\t\t\t\tfrappe.set_route(\"Form\", \"Customize Form\", {\n\t\t\t\t\tdoc_type: me.frm.doctype\n\t\t\t\t})\n\t\t\t}, true);\n\n\t\t\tif (frappe.boot.developer_mode===1 && me.frm.meta.issingle) {\n\t\t\t\t// edit doctype\n\t\t\t\tthis.page.add_menu_item(__(\"Edit DocType\"), function() {\n\t\t\t\t\tfrappe.set_route('Form', 'DocType', me.frm.doctype);\n\t\t\t\t}, true);\n\t\t\t}\n\t\t}\n\n\t\t// feedback\n\t\tif(!this.frm.doc.__unsaved) {\n\t\t\tif(is_submittable && docstatus == 1) {\n\t\t\t\tthis.page.add_menu_item(__(\"Request Feedback\"), function() {\n\t\t\t\t\tvar feedback = new frappe.utils.Feedback();\n\t\t\t\t\tfeedback.manual_feedback_request(me.frm.doc);\n\t\t\t\t}, true)\n\t\t\t}\n\t\t}\n\n\t\t// New\n\t\tif(p[CREATE] && !this.frm.meta.issingle) {\n\t\t\tthis.page.add_menu_item(__(\"New {0} (Ctrl+B)\", [__(me.frm.doctype)]), function() {\n\t\t\t\tfrappe.new_doc(me.frm.doctype, true);}, true);\n\t\t}\n\t},\n\tcan_save: function() {\n\t\treturn this.get_docstatus()===0;\n\t},\n\tcan_submit: function() {\n\t\treturn this.get_docstatus()===0\n\t\t\t&& !this.frm.doc.__islocal\n\t\t\t&& !this.frm.doc.__unsaved\n\t\t\t&& this.frm.perm[0].submit\n\t\t\t&& !this.has_workflow();\n\t},\n\tcan_update: function() {\n\t\treturn this.get_docstatus()===1\n\t\t\t&& !this.frm.doc.__islocal\n\t\t\t&& this.frm.perm[0].submit\n\t\t\t&& this.frm.doc.__unsaved\n\t},\n\tcan_cancel: function() {\n\t\treturn this.get_docstatus()===1\n\t\t\t&& this.frm.perm[0].cancel\n\t\t\t&& !this.read_only;\n\t},\n\tcan_amend: function() {\n\t\treturn this.get_docstatus()===2\n\t\t\t&& this.frm.perm[0].amend\n\t\t\t&& !this.read_only;\n\t},\n\thas_workflow: function() {\n\t\tif(this._has_workflow === undefined)\n\t\t\tthis._has_workflow = frappe.get_list(\"Workflow\", {document_type: this.frm.doctype}).length;\n\t\treturn this._has_workflow;\n\t},\n\tget_docstatus: function() {\n\t\treturn cint(this.frm.doc.docstatus);\n\t},\n\tshow_linked_with: function() {\n\t\tif(!this.frm.linked_with) {\n\t\t\tthis.frm.linked_with = new frappe.ui.form.LinkedWith({\n\t\t\t\tfrm: this.frm\n\t\t\t});\n\t\t}\n\t\tthis.frm.linked_with.show();\n\t},\n\tset_primary_action: function(dirty) {\n\t\tif (!dirty) {\n\t\t\t// don't clear actions menu if dirty\n\t\t\tthis.page.clear_user_actions();\n\t\t}\n\n\t\tvar status = this.get_action_status();\n\t\tif (status) {\n\t\t\tif (status !== this.current_status) {\n\t\t\t\tthis.set_page_actions(status);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.page.clear_actions();\n\t\t\tthis.current_status = null\n\t\t}\n\t},\n\tget_action_status: function() {\n\t\tvar status = null;\n\t\tif (this.frm.page.current_view_name==='print' || this.frm.hidden) {\n\t\t\tstatus = \"Edit\";\n\t\t} else if (this.can_submit()) {\n\t\t\tstatus = \"Submit\";\n\t\t} else if (this.can_save()) {\n\t\t\tif (!this.frm.save_disabled) {\n\t\t\t\t//Show the save button if there is no workflow or if there is a workflow and there are changes\n\t\t\t\tif (this.has_workflow() ? this.frm.doc.__unsaved : true) {\n\t\t\t\t\tstatus = \"Save\";\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (this.can_update()) {\n\t\t\tstatus = \"Update\";\n\t\t} else if (this.can_cancel()) {\n\t\t\tstatus = \"Cancel\";\n\t\t} else if (this.can_amend()) {\n\t\t\tstatus = \"Amend\";\n\t\t}\n\t\treturn status;\n\t},\n\tset_page_actions: function(status) {\n\t\tvar me = this;\n\t\tthis.page.clear_actions();\n\n\t\tif(status!== 'Edit') {\n\t\t\tvar perm_to_check = this.frm.action_perm_type_map[status];\n\t\t\tif(!this.frm.perm[0][perm_to_check]) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif(status === \"Edit\") {\n\t\t\tthis.page.set_primary_action(__(\"Edit\"), function() {\n\t\t\t\tme.frm.page.set_view('main');\n\t\t\t}, 'octicon octicon-pencil');\n\t\t} else if(status === \"Cancel\") {\n\t\t\tthis.page.set_secondary_action(__(status), function() {\n\t\t\t\tme.frm.savecancel(this);\n\t\t\t}, \"octicon octicon-circle-slash\");\n\t\t} else {\n\t\t\tvar click = {\n\t\t\t\t\"Save\": function() {\n\t\t\t\t\treturn me.frm.save('Save', null, this);\n\t\t\t\t},\n\t\t\t\t\"Submit\": function() {\n\t\t\t\t\treturn me.frm.savesubmit(this);\n\t\t\t\t},\n\t\t\t\t\"Update\": function() {\n\t\t\t\t\treturn me.frm.save('Update', null, this);\n\t\t\t\t},\n\t\t\t\t\"Amend\": function() {\n\t\t\t\t\treturn me.frm.amend_doc();\n\t\t\t\t}\n\t\t\t}[status];\n\n\t\t\tvar icon = {\n\t\t\t\t\"Save\": \"octicon octicon-check\",\n\t\t\t\t\"Submit\": \"octicon octicon-lock\",\n\t\t\t\t\"Update\": \"octicon octicon-check\",\n\t\t\t\t\"Amend\": \"octicon octicon-split\"\n\t\t\t}[status];\n\n\t\t\tthis.page.set_primary_action(__(status), click, icon);\n\t\t}\n\n\t\tthis.current_status = status;\n\t},\n\tmake_cancel_amend_button: function() {\n\t\tvar me = this;\n\t\tvar docstatus = cint(this.frm.doc.docstatus);\n\t\tvar p = this.frm.perm[0];\n\t\tvar has_workflow = this.has_workflow();\n\n\t\tif(has_workflow) {\n\t\t\treturn;\n\t\t} else if(docstatus==1 && p[CANCEL]) {\n\t\t\tthis.page.set_secondary_action(__('Cancel'), function() {\n\t\t\t\tme.frm.savecancel(this) }, 'fa fa-ban-circle');\n\t\t} else if(docstatus==2 && p[AMEND]) {\n\t\t\tthis.page.set_secondary_action(__('Amend'), function() {\n\t\t\t\tme.frm.amend_doc() }, 'fa fa-pencil', true);\n\t\t}\n\t},\n\tadd_update_button_on_dirty: function() {\n\t\tvar me = this;\n\t\t$(this.frm.wrapper).on(\"dirty\", function() {\n\t\t\tme.show_title_as_dirty();\n\n\t\t\t// clear workflow actions\n\t\t\tme.frm.page.clear_actions_menu();\n\n\t\t\t// enable save action\n\t\t\tif(!me.frm.save_disabled) {\n\t\t\t\tme.set_primary_action(true);\n\t\t\t}\n\t\t});\n\t},\n\tshow_title_as_dirty: function() {\n\t\tif(this.frm.save_disabled)\n\t\t\treturn;\n\n\t\tif(this.frm.doc.__unsaved) {\n\t\t\tthis.page.set_indicator(__(\"Not Saved\"), \"orange\");\n\t\t}\n\n\t\t$(this.frm.wrapper).attr(\"data-state\", this.frm.doc.__unsaved ? \"dirty\" : \"clean\");\n\t}\n})\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.ui.form.Dashboard = Class.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\t\tthis.section = this.frm.fields_dict._form_dashboard.wrapper;\n\t\tthis.parent = this.section.find('.section-body');\n\t\tthis.wrapper = $(frappe.render_template('form_dashboard',\n\t\t\t{frm: this.frm})).appendTo(this.parent);\n\n\t\tthis.progress_area = this.wrapper.find(\".progress-area\");\n\t\tthis.heatmap_area = this.wrapper.find('.form-heatmap');\n\t\tthis.chart_area = this.wrapper.find('.form-graph');\n\t\tthis.stats_area = this.wrapper.find('.form-stats');\n\t\tthis.stats_area_row = this.stats_area.find('.row');\n\t\tthis.links_area = this.wrapper.find('.form-links');\n\t\tthis.transactions_area = this.links_area.find('.transactions');\n\n\t},\n\treset: function() {\n\t\tthis.section.addClass('hidden');\n\t\tthis.clear_headline();\n\n\t\t// clear progress\n\t\tthis.progress_area.empty().addClass('hidden');\n\n\t\t// clear links\n\t\tthis.links_area.addClass('hidden');\n\t\tthis.links_area.find('.count, .open-notification').addClass('hidden');\n\n\t\t// clear stats\n\t\tthis.stats_area.addClass('hidden')\n\t\tthis.stats_area_row.empty();\n\n\t\t// clear custom\n\t\tthis.wrapper.find('.custom').remove();\n\t},\n\tset_headline: function(html) {\n\t\tthis.frm.layout.show_message(html);\n\t},\n\tclear_headline: function() {\n\t\tthis.frm.layout.show_message();\n\t},\n\n\tadd_comment: function(text, alert_class, permanent) {\n\t\tvar me = this;\n\t\tthis.set_headline_alert(text, alert_class);\n\t\tif(!permanent) {\n\t\t\tsetTimeout(function() {\n\t\t\t\tme.clear_headline();\n\t\t\t}, 10000);\n\t\t}\n\t},\n\n\tclear_comment: function() {\n\t\tthis.clear_headline();\n\t},\n\n\tset_headline_alert: function(text, indicator_color) {\n\t\tif (!indicator_color) {\n\t\t\tindicator_color = 'orange';\n\t\t}\n\t\tif(text) {\n\t\t\tthis.set_headline(`<div><span class=\"indicator ${indicator_color}\">${text}</span></div>`);\n\t\t} else {\n\t\t\tthis.clear_headline();\n\t\t}\n\t},\n\n\tadd_section: function(html) {\n\t\treturn $('<div class=\"form-dashboard-section custom\">'+html+'</div>').appendTo(this.wrapper);\n\t},\n\n\tadd_progress: function(title, percent, message) {\n\t\tvar progress_chart = this.make_progress_chart(title);\n\n\t\tif(!$.isArray(percent)) {\n\t\t\tpercent = this.format_percent(title, percent);\n\t\t}\n\n\t\tvar progress = $('<div class=\"progress\"></div>').appendTo(progress_chart);\n\t\t$.each(percent, function(i, opts) {\n\t\t\t$(repl('<div class=\"progress-bar %(progress_class)s\" style=\"width: %(width)s\" \\\n\t\t\t\ttitle=\"%(title)s\"></div>', opts)).appendTo(progress);\n\t\t});\n\n\t\tif (!message) message = '';\n\t\t$(`<p class=\"progress-message text-muted small\">${message}</p>`).appendTo(progress_chart);\n\n\t\tthis.show();\n\n\t\treturn progress_chart;\n\t},\n\n\tshow_progress: function(title, percent, message) {\n\t\tthis._progress_map = this._progress_map || {};\n\t\tif (!this._progress_map[title]) {\n\t\t\tconst progress_chart = this.add_progress(title, percent, message);\n\t\t\tthis._progress_map[title] = progress_chart;\n\t\t}\n\t\tlet progress_chart = this._progress_map[title];\n\t\tif (!$.isArray(percent)) {\n\t\t\tpercent = this.format_percent(title, percent);\n\t\t}\n\t\tprogress_chart.find('.progress-bar').each((i, progress_bar) => {\n\t\t\tconst { progress_class, width } = percent[i];\n\t\t\t$(progress_bar).css('width', width)\n\t\t\t\t.removeClass('progress-bar-danger progress-bar-success')\n\t\t\t\t.addClass(progress_class);\n\t\t});\n\n\t\tif (!message) message = '';\n\t\tprogress_chart.find('.progress-message').text(message);\n\t},\n\n\thide_progress: function(title) {\n\t\tif (title){\n\t\t\tthis._progress_map[title].remove();\n\t\t\tdelete this._progress_map[title];\n\t\t} else {\n\t\t\tthis._progress_map = {};\n\t\t\tthis.progress_area.empty();\n\t\t}\n\t},\n\n\tformat_percent: function(title, percent) {\n\t\tvar width = cint(percent) < 1 ? 1 : cint(percent);\n\t\tvar progress_class = \"\";\n\t\tif(width < 10)\n\t\t\tprogress_class = \"progress-bar-danger\";\n\t\tif(width > 99.9)\n\t\t\tprogress_class = \"progress-bar-success\";\n\n\t\treturn [{\n\t\t\ttitle: title,\n\t\t\twidth: width + '%',\n\t\t\tprogress_class: progress_class\n\t\t}];\n\t},\n\tmake_progress_chart: function(title) {\n\t\tvar progress_chart = $('<div class=\"progress-chart\" title=\"'+(title || '')+'\"></div>')\n\t\t\t.appendTo(this.progress_area.removeClass('hidden'));\n\t\treturn progress_chart;\n\t},\n\n\trefresh: function() {\n\t\tthis.reset();\n\t\tif(this.frm.doc.__islocal) {\n\t\t\treturn;\n\t\t}\n\n\t\tif(!this.data) {\n\t\t\tthis.init_data();\n\t\t}\n\n\t\tvar show = false;\n\n\t\tif(this.data && (this.data.transactions || []).length) {\n\t\t\tif(this.data.docstatus && this.frm.doc.docstatus !== this.data.docstatus) {\n\t\t\t\t// limited docstatus\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.render_links();\n\t\t\tthis.set_open_count();\n\t\t\tshow = true;\n\t\t}\n\n\t\tif(this.data.heatmap) {\n\t\t\tthis.render_heatmap();\n\t\t\tshow = true;\n\t\t}\n\n\t\tif(this.data.graph) {\n\t\t\tthis.setup_graph();\n\t\t\tshow = true;\n\t\t}\n\n\t\tif(show) {\n\t\t\tthis.show();\n\t\t}\n\t},\n\n\tafter_refresh: function() {\n\t\tvar me = this;\n\t\t// show / hide new buttons (if allowed)\n\t\tthis.links_area.find('.btn-new').each(function() {\n\t\t\tif(me.frm.can_create($(this).attr('data-doctype'))) {\n\t\t\t\t$(this).removeClass('hidden');\n\t\t\t}\n\t\t});\n\t},\n\n\tinit_data: function() {\n\t\tthis.data = this.frm.meta.__dashboard || {};\n\t\tif(!this.data.transactions) this.data.transactions = [];\n\t\tif(!this.data.internal_links) this.data.internal_links = {};\n\t\tthis.filter_permissions();\n\t},\n\n\tadd_transactions: function(opts) {\n\t\t// add additional data on dashboard\n\t\tlet group_added = [];\n\n\t\tif(!Array.isArray(opts)) opts=[opts];\n\n\t\tif(!this.data) {\n\t\t\tthis.init_data();\n\t\t}\n\n\t\tif(this.data && (this.data.transactions || []).length) {\n\t\t\t// check if label already exists, add items to it\n\t\t\tthis.data.transactions.map(group => {\n\t\t\t\topts.map(d => {\n\t\t\t\t\tif(d.label == group.label) {\n\t\t\t\t\t\tgroup_added.push(d.label);\n\t\t\t\t\t\tgroup.items.push(...d.items);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// if label not already present, add new label and items under it\n\t\t\topts.map(d => {\n\t\t\t\tif(!group_added.includes(d.label)) {\n\t\t\t\t\tthis.data.transactions.push(d);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.filter_permissions();\n\t\t}\n\t},\n\n\tfilter_permissions: function() {\n\t\t// filter out transactions for which the user\n\t\t// does not have permission\n\t\tvar transactions = [];\n\t\t(this.data.transactions || []).forEach(function(group) {\n\t\t\tvar items = [];\n\t\t\tgroup.items.forEach(function(doctype) {\n\t\t\t\tif(frappe.model.can_read(doctype)) {\n\t\t\t\t\titems.push(doctype);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// only add thie group, if there is atleast\n\t\t\t// one item with permission\n\t\t\tif(items.length) {\n\t\t\t\tgroup.items = items;\n\t\t\t\ttransactions.push(group);\n\t\t\t}\n\t\t});\n\t\tthis.data.transactions = transactions;\n\t},\n\trender_links: function() {\n\t\tvar me = this;\n\t\tthis.links_area.removeClass('hidden');\n\t\tthis.links_area.find('.btn-new').addClass('hidden');\n\t\tif(this.data_rendered) {\n\t\t\treturn;\n\t\t}\n\n\t\t//this.transactions_area.empty();\n\n\t\tthis.data.frm = this.frm;\n\n\t\t$(frappe.render_template('form_links', this.data))\n\t\t\t.appendTo(this.transactions_area)\n\n\t\t// bind links\n\t\tthis.transactions_area.find(\".badge-link\").on('click', function() {\n\t\t\tme.open_document_list($(this).parent());\n\t\t});\n\n\t\t// bind open notifications\n\t\tthis.transactions_area.find('.open-notification').on('click', function() {\n\t\t\tme.open_document_list($(this).parent(), true);\n\t\t});\n\n\t\t// bind new\n\t\tthis.transactions_area.find('.btn-new').on('click', function() {\n\t\t\tme.frm.make_new($(this).attr('data-doctype'));\n\t\t});\n\n\t\tthis.data_rendered = true;\n\t},\n\topen_document_list: function($link, show_open) {\n\t\t// show document list with filters\n\t\tvar doctype = $link.attr('data-doctype'),\n\t\t\tnames = $link.attr('data-names') || [];\n\n\t\tif(this.data.internal_links[doctype]) {\n\t\t\tif(names.length) {\n\t\t\t\tfrappe.route_options = {'name': ['in', names]};\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else if(this.data.fieldname) {\n\t\t\tfrappe.route_options = this.get_document_filter(doctype);\n\t\t\tif(show_open) {\n\t\t\t\tfrappe.ui.notifications.show_open_count_list(doctype);\n\t\t\t}\n\t\t}\n\n\t\tfrappe.set_route(\"List\", doctype, \"List\");\n\t},\n\tget_document_filter: function(doctype) {\n\t\t// return the default filter for the given document\n\t\t// like {\"customer\": frm.doc.name}\n\t\tvar filter = {};\n\t\tvar fieldname = this.data.non_standard_fieldnames\n\t\t\t? (this.data.non_standard_fieldnames[doctype] || this.data.fieldname)\n\t\t\t: this.data.fieldname;\n\t\tfilter[fieldname] = this.frm.doc.name;\n\t\treturn filter;\n\t},\n\tset_open_count: function() {\n\t\tif(!this.data.transactions || !this.data.fieldname) {\n\t\t\treturn;\n\t\t}\n\n\t\t// list all items from the transaction list\n\t\tvar items = [],\n\t\t\tme = this;\n\n\t\tthis.data.transactions.forEach(function(group) {\n\t\t\tgroup.items.forEach(function(item) { items.push(item); });\n\t\t});\n\n\t\tvar method = this.data.method || 'frappe.desk.notifications.get_open_count';\n\t\tfrappe.call({\n\t\t\ttype: \"GET\",\n\t\t\tmethod: method,\n\t\t\targs: {\n\t\t\t\tdoctype: this.frm.doctype,\n\t\t\t\tname: this.frm.doc.name,\n\t\t\t\titems: items\n\t\t\t},\n\t\t\tcallback: function(r) {\n\t\t\t\tif(r.message.timeline_data) {\n\t\t\t\t\tme.update_heatmap(r.message.timeline_data);\n\t\t\t\t}\n\n\t\t\t\t// update badges\n\t\t\t\t$.each(r.message.count, function(i, d) {\n\t\t\t\t\tme.frm.dashboard.set_badge_count(d.name, cint(d.open_count), cint(d.count));\n\t\t\t\t});\n\n\t\t\t\t// update from internal links\n\t\t\t\t$.each(me.data.internal_links, function(doctype, link) {\n\t\t\t\t\tvar table_fieldname = link[0], link_fieldname = link[1];\n\t\t\t\t\tvar names = [];\n\t\t\t\t\t(me.frm.doc[table_fieldname] || []).forEach(function(d) {\n\t\t\t\t\t\tvar value = d[link_fieldname];\n\t\t\t\t\t\tif(value && names.indexOf(value)===-1) {\n\t\t\t\t\t\t\tnames.push(value);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tme.frm.dashboard.set_badge_count(doctype, 0, names.length, names);\n\t\t\t\t});\n\n\t\t\t\tme.frm.dashboard_data = r.message;\n\t\t\t\tme.frm.trigger('dashboard_update');\n\t\t\t}\n\t\t});\n\n\t},\n\tset_badge_count: function(doctype, open_count, count, names) {\n\t\tvar $link = $(this.transactions_area)\n\t\t\t.find('.document-link[data-doctype=\"'+doctype+'\"]');\n\n\t\tif(open_count) {\n\t\t\t$link.find('.open-notification')\n\t\t\t\t.removeClass('hidden')\n\t\t\t\t.html((open_count > 99) ? '99+' : open_count);\n\t\t}\n\n\t\tif(count) {\n\t\t\t$link.find('.count')\n\t\t\t\t.removeClass('hidden')\n\t\t\t\t.html((count > 99) ? '99+' : count);\n\t\t}\n\n\t\tif(this.data.internal_links[doctype]) {\n\t\t\tif(names && names.length) {\n\t\t\t\t$link.attr('data-names', names ? names.join(',') : '');\n\t\t\t} else {\n\t\t\t\t$link.find('a').attr('disabled', true);\n\t\t\t}\n\t\t}\n\t},\n\n\tupdate_heatmap: function(data) {\n\t\tif(this.heatmap) {\n\t\t\tthis.heatmap.update(data);\n\t\t}\n\t},\n\n\t// heatmap\n\trender_heatmap: function() {\n\t\tif(!this.heatmap) {\n\t\t\tthis.heatmap = new Chart(\"#heatmap-\" + frappe.model.scrub(this.frm.doctype), {\n\t\t\t\ttype: 'heatmap',\n\t\t\t\theight: 120,\n\t\t\t\tstart: new Date(moment().subtract(1, 'year').toDate()),\n\t\t\t\tcount_label: \"interactions\",\n\t\t\t\tdiscreteDomains: 0,\n\t\t\t\tdata: {}\n\t\t\t});\n\n\t\t\t// center the heatmap\n\t\t\tthis.heatmap_area.removeClass('hidden').find('svg').css({'margin': 'auto'});\n\n\t\t\t// message\n\t\t\tvar heatmap_message = this.heatmap_area.find('.heatmap-message');\n\t\t\tif(this.data.heatmap_message) {\n\t\t\t\theatmap_message.removeClass('hidden').html(this.data.heatmap_message);\n\t\t\t} else {\n\t\t\t\theatmap_message.addClass('hidden');\n\t\t\t}\n\t\t}\n\t},\n\n\tadd_indicator: function(label, color) {\n\t\tthis.show();\n\t\tthis.stats_area.removeClass('hidden');\n\n\n\t\t// set colspan\n\t\tvar indicators = this.stats_area_row.find('.indicator-column');\n\t\tvar n_indicators = indicators.length + 1;\n\t\tvar colspan;\n\t\tif(n_indicators > 4) { colspan = 3 }\n\t\telse { colspan = 12 / n_indicators; }\n\n\t\t// reset classes in existing indicators\n\t\tif(indicators.length) {\n\t\t\tindicators.removeClass().addClass('col-sm-'+colspan).addClass('indicator-column');\n\t\t}\n\n\t\tvar indicator = $('<div class=\"col-sm-'+colspan+' indicator-column\"><span class=\"indicator '+color+'\">'\n\t\t\t+label+'</span></div>').appendTo(this.stats_area_row);\n\n\t\treturn indicator;\n\t},\n\n\t// graphs\n\tsetup_graph: function() {\n\t\tvar me = this;\n\t\tvar method = this.data.graph_method;\n\t\tvar args = {\n\t\t\tdoctype: this.frm.doctype,\n\t\t\tdocname: this.frm.doc.name,\n\t\t};\n\t\t$.extend(args, this.data.graph_method_args);\n\n\t\tfrappe.call({\n\t\t\ttype: \"GET\",\n\t\t\tmethod: method,\n\t\t\targs: args,\n\n\t\t\tcallback: function(r) {\n\t\t\t\tif(r.message) {\n\t\t\t\t\tme.render_graph(r.message);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\trender_graph: function(args) {\n\t\tvar me = this;\n\t\tthis.chart_area.empty().removeClass('hidden');\n\t\t$.extend(args, {\n\t\t\ttype: 'line',\n\t\t\tcolors: ['green']\n\t\t});\n\t\tthis.show();\n\n\t\tthis.chart = new Chart('.form-graph', args);\n\t\tif(!this.chart) {\n\t\t\tthis.hide();\n\t\t}\n\t},\n\n\tshow: function() {\n\t\tthis.section.removeClass('hidden');\n\t},\n\n\thide: function() {\n\t\tthis.section.addClass('hidden');\n\t}\n});\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide('frappe.document_flow');\n\nfrappe.ui.form.DocumentFlow = Class.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\n\t\tthis.module = frappe.get_meta(this.frm.doctype).module\n\t\tif (!frappe.document_flow || !frappe.document_flow[this.module]) {\n\t\t\treturn;\n\t\t}\n\t\tthis.doctypes = frappe.document_flow[this.module][this.frm.doctype];\n\t\tif (!this.doctypes) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.wrapper = $('<div class=\"document-flow-wrapper hidden\"></div>').prependTo(this.frm.layout.wrapper);\n\t},\n\n\trefresh: function() {\n\t\tif(this.doctypes) {\n\t\t\tthis.reset();\n\t\t\tthis.render();\n\t\t}\n\t},\n\n\treset: function() {\n\t\tthis.wrapper.empty().addClass('hidden');\n\t\tthis.linked_with = {};\n\t},\n\n\trender: function() {\n\t\tvar me = this;\n\n\t\t$(frappe.render_template('form_document_flow', {\n\t\t\tfrm: this.frm,\n\t\t\tdoctypes: this.doctypes,\n\t\t})).appendTo(this.wrapper.removeClass('hidden'));\n\n\t\tthis.wrapper.on('click', '.document-flow-link', function() {\n\t\t\tvar doctype = $(this).attr(\"data-doctype\");\n\t\t\tif (me.frm.doctype != doctype) {\n\t\t\t\tme.get_linked_docs(doctype);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\n\t\tif (!this.frm.doc.__islocal) {\n\t\t\tthis.mark_completed_flow()\n\t\t}\n\n\t},\n\n\tget_linked_docs: function(for_doctype) {\n\t\tif(!this.linked_with[for_doctype]) {\n\t\t\tthis.linked_with[for_doctype] = new frappe.ui.form.LinkedWith({\n\t\t\t\tfrm: this.frm,\n\t\t\t\tfor_doctype: for_doctype\n\t\t\t});\n\t\t}\n\n\t\tthis.linked_with[for_doctype].show();\n\t},\n\n\tmark_completed_flow: function() {\n\t\tvar me = this;\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.desk.form.document_flow.get_document_completion_status\",\n\t\t\targs: {\n\t\t\t\tdoctypes: me.doctypes,\n\t\t\t\tfrm_doctype: me.frm.doctype,\n\t\t\t\tfrm_docname: me.frm.docname\n\t\t\t},\n\t\t\tcallback: function(r){\n\t\t\t\tif(!r.message) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t$.each(me.doctypes, function(i, doctype) {\n\t\t\t\t\tif (r.message[doctype] && me.frm.doctype!=doctype) {\n\t\t\t\t\t\tme.wrapper.find(\"[data-doctype='\"+doctype+\"']a .indicator\")\n\t\t\t\t\t\t\t.removeClass(\"darkgrey\")\n\t\t\t\t\t\t\t.addClass(\"black\")\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t}\n});\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide(\"frappe.ui.form\");\n\nfrappe.ui.form.save = function (frm, action, callback, btn) {\n\t$(btn).prop(\"disabled\", true);\n\n\t// specified here because there are keyboard shortcuts to save\n\tvar working_label = {\n\t\t\"Save\": __(\"Saving\"),\n\t\t\"Submit\": __(\"Submitting\"),\n\t\t\"Update\": __(\"Updating\"),\n\t\t\"Amend\": __(\"Amending\"),\n\t\t\"Cancel\": __(\"Cancelling\")\n\t}[toTitle(action)];\n\n\tvar freeze_message = working_label ? __(working_label) : \"\";\n\n\tvar save = function () {\n\t\tremove_empty_rows();\n\n\t\t$(frm.wrapper).addClass('validated-form');\n\t\tif (check_mandatory()) {\n\t\t\t_call({\n\t\t\t\tmethod: \"frappe.desk.form.save.savedocs\",\n\t\t\t\targs: { doc: frm.doc, action: action },\n\t\t\t\tcallback: function (r) {\n\t\t\t\t\t$(document).trigger(\"save\", [frm.doc]);\n\t\t\t\t\tcallback(r);\n\t\t\t\t},\n\t\t\t\terror: function (r) {\n\t\t\t\t\tcallback(r);\n\t\t\t\t},\n\t\t\t\tbtn: btn,\n\t\t\t\tfreeze_message: freeze_message\n\t\t\t});\n\t\t} else {\n\t\t\t$(btn).prop(\"disabled\", false);\n\t\t}\n\t};\n\n\tvar remove_empty_rows = function() {\n\t\t/**\n\t\tThis function removes empty rows. Note that in this function, a row is considered\n\t\tempty if the fields with `in_list_view: 1` are undefined or falsy because that's\n\t\twhat users also consider to be an empty row\n\t\t */\n\t\tconst docs = frappe.model.get_all_docs(frm.doc);\n\n\t\t// we should only worry about table data\n\t\tconst tables = docs.filter(function(d){\n\t\t\treturn frappe.model.is_table(d.doctype);\n\t\t});\n\n\t\ttables.map(\n\t\t\tfunction(doc){\n\t\t\t\tconst cells = frappe.meta.docfield_list[doc.doctype] || [];\n\n\t\t\t\tconst in_list_view_cells = cells.filter(function(df) {\n\t\t\t\t\treturn cint(df.in_list_view) === 1;\n\t\t\t\t});\n\n\t\t\t\tvar is_empty_row = function(cells) {\n\t\t\t\t\tfor (var i=0; i < cells.length; i++){\n\t\t\t\t\t\tif(locals[doc.doctype][doc.name][cells[i].fieldname]){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tif (is_empty_row(in_list_view_cells)) {\n\t\t\t\t\tfrappe.model.clear_doc(doc.doctype, doc.name);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n\n\tvar cancel = function () {\n\t\tvar args = {\n\t\t\tdoctype: frm.doc.doctype,\n\t\t\tname: frm.doc.name\n\t\t};\n\n\t\t// update workflow state value if workflow exists\n\t\tvar workflow_state_fieldname = frappe.workflow.get_state_fieldname(frm.doctype);\n\t\tif (workflow_state_fieldname) {\n\t\t\t$.extend(args, {\n\t\t\t\tworkflow_state_fieldname: workflow_state_fieldname,\n\t\t\t\tworkflow_state: frm.doc[workflow_state_fieldname]\n\n\t\t\t});\n\t\t}\n\n\t\t_call({\n\t\t\tmethod: \"frappe.desk.form.save.cancel\",\n\t\t\targs: args,\n\t\t\tcallback: function (r) {\n\t\t\t\t$(document).trigger(\"save\", [frm.doc]);\n\t\t\t\tcallback(r);\n\t\t\t},\n\t\t\tbtn: btn,\n\t\t\tfreeze_message: freeze_message\n\t\t});\n\t};\n\n\tvar check_mandatory = function () {\n\t\tvar me = this;\n\t\tvar has_errors = false;\n\t\tfrm.scroll_set = false;\n\n\t\tif (frm.doc.docstatus == 2) return true; // don't check for cancel\n\n\t\t$.each(frappe.model.get_all_docs(frm.doc), function (i, doc) {\n\t\t\tvar error_fields = [];\n\t\t\tvar folded = false;\n\n\t\t\t$.each(frappe.meta.docfield_list[doc.doctype] || [], function (i, docfield) {\n\t\t\t\tif (docfield.fieldname) {\n\t\t\t\t\tvar df = frappe.meta.get_docfield(doc.doctype,\n\t\t\t\t\t\tdocfield.fieldname, frm.doc.name);\n\n\t\t\t\t\tif (df.fieldtype === \"Fold\") {\n\t\t\t\t\t\tfolded = frm.layout.folded;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (df.reqd && !frappe.model.has_value(doc.doctype, doc.name, df.fieldname)) {\n\t\t\t\t\t\thas_errors = true;\n\t\t\t\t\t\terror_fields[error_fields.length] = __(df.label);\n\t\t\t\t\t\t// scroll to field\n\t\t\t\t\t\tif (!frm.scroll_set) {\n\t\t\t\t\t\t\tscroll_to(doc.parentfield || df.fieldname);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (folded) {\n\t\t\t\t\t\t\tfrm.layout.unfold();\n\t\t\t\t\t\t\tfolded = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (error_fields.length) {\n\t\t\t\tif (doc.parenttype) {\n\t\t\t\t\tvar message = __('Mandatory fields required in table {0}, Row {1}',\n\t\t\t\t\t\t[__(frappe.meta.docfield_map[doc.parenttype][doc.parentfield].label).bold(), doc.idx]);\n\t\t\t\t} else {\n\t\t\t\t\tvar message = __('Mandatory fields required in {0}', [__(doc.doctype)]);\n\n\t\t\t\t}\n\t\t\t\tmessage = message + '<br><br><ul><li>' + error_fields.join('</li><li>') + \"</ul>\";\n\t\t\t\tfrappe.msgprint({\n\t\t\t\t\tmessage: message,\n\t\t\t\t\tindicator: 'red',\n\t\t\t\t\ttitle: __('Missing Fields')\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn !has_errors;\n\t};\n\n\tvar scroll_to = function (fieldname) {\n\t\tvar f = cur_frm.fields_dict[fieldname];\n\t\tif (f) {\n\t\t\t$(document).scrollTop($(f.wrapper).offset().top - 60);\n\t\t}\n\t\tfrm.scroll_set = true;\n\t};\n\n\tvar _call = function (opts) {\n\t\t// opts = {\n\t\t// \tmethod: \"some server method\",\n\t\t// \targs: {args to be passed},\n\t\t// \tcallback: callback,\n\t\t// \tbtn: btn\n\t\t// }\n\n\t\tif (frappe.ui.form.is_saving) {\n\t\t\t// this is likely to happen if the user presses the shortcut cmd+s for a longer duration or uses double click\n\t\t\t// no need to show this to user, as they can see \"Saving\" in freeze message\n\t\t\tconsole.log(\"Already saving. Please wait a few moments.\")\n\t\t\tthrow \"saving\";\n\t\t}\n\n\t\tfrappe.ui.form.remove_old_form_route();\n\t\tfrappe.ui.form.is_saving = true;\n\n\t\treturn frappe.call({\n\t\t\tfreeze: true,\n\t\t\t// freeze_message: opts.freeze_message,\n\t\t\tmethod: opts.method,\n\t\t\targs: opts.args,\n\t\t\tbtn: opts.btn,\n\t\t\tcallback: function (r) {\n\t\t\t\topts.callback && opts.callback(r);\n\t\t\t},\n\t\t\terror: opts.error,\n\t\t\talways: function (r) {\n\t\t\t\t$(btn).prop(\"disabled\", false);\n\t\t\t\tfrappe.ui.form.is_saving = false;\n\t\t\t\tif (r) {\n\t\t\t\t\tvar doc = r.docs && r.docs[0];\n\t\t\t\t\tif (doc) {\n\t\t\t\t\t\tfrappe.ui.form.update_calling_link(doc);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t};\n\n\tif (action === \"cancel\") {\n\t\tcancel();\n\t} else {\n\t\tsave();\n\t}\n}\n\nfrappe.ui.form.remove_old_form_route = () => {\n\tlet index = -1;\n\tlet current_route = frappe.get_route();\n\tfrappe.route_history.map((arr, i) => {\n\t\tif (arr.join(\"/\") === current_route.join(\"/\")) {\n\t\t\tindex = i;\n\t\t}\n\t});\n\tfrappe.route_history.splice(index, 1);\n}\n\nfrappe.ui.form.update_calling_link = (newdoc) => {\n\tif (frappe._from_link && newdoc.doctype === frappe._from_link.df.options) {\n\t\tvar doc = frappe.get_doc(frappe._from_link.doctype, frappe._from_link.docname);\n\t\t// set value\n\t\tif (doc && doc.parentfield) {\n\t\t\t//update values for child table\n\t\t\t$.each(frappe._from_link.frm.fields_dict[doc.parentfield].grid.grid_rows, function (index, field) {\n\t\t\t\tif (field.doc && field.doc.name === frappe._from_link.docname) {\n\t\t\t\t\tfrappe._from_link.set_value(newdoc.name);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tfrappe._from_link.set_value(newdoc.name);\n\t\t}\n\n\t\t// refresh field\n\t\tfrappe._from_link.refresh();\n\n\t\t// if from form, switch\n\t\tif (frappe._from_link.frm) {\n\t\t\tfrappe.set_route(\"Form\",\n\t\t\t\tfrappe._from_link.frm.doctype, frappe._from_link.frm.docname)\n\t\t\t\t.then(() => {\n\t\t\t\t\tfrappe.utils.scroll_to(frappe._from_link_scrollY);\n\t\t\t\t});\n\t\t}\n\n\t\tfrappe._from_link = null;\n\t}\n}\n\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide(\"frappe.ui.form.handlers\");\n\nfrappe.ui.form.get_event_handler_list = function(doctype, fieldname) {\n\tif(!frappe.ui.form.handlers[doctype]) {\n\t\tfrappe.ui.form.handlers[doctype] = {};\n\t}\n\tif(!frappe.ui.form.handlers[doctype][fieldname]) {\n\t\tfrappe.ui.form.handlers[doctype][fieldname] = [];\n\t}\n\treturn frappe.ui.form.handlers[doctype][fieldname];\n}\n\nfrappe.ui.form.on = frappe.ui.form.on_change = function(doctype, fieldname, handler) {\n\tvar add_handler = function(fieldname, handler) {\n\t\tvar handler_list = frappe.ui.form.get_event_handler_list(doctype, fieldname);\n\t\thandler_list.push(handler);\n\n\t\t// add last handler to events so it can be called as\n\t\t// frm.events.handler(frm)\n\t\tif(cur_frm && cur_frm.doctype===doctype) {\n\t\t\tcur_frm.events[fieldname] = handler;\n\t\t}\n\t}\n\n\tif (!handler && $.isPlainObject(fieldname)) {\n\t\t// a dict of handlers {fieldname: handler, ...}\n\t\tfor (var key in fieldname) {\n\t\t\tvar fn = fieldname[key];\n\t\t\tif (typeof fn === \"function\") {\n\t\t\t\tadd_handler(key, fn);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tadd_handler(fieldname, handler);\n\t}\n}\n\n// remove standard event handlers\nfrappe.ui.form.off = function(doctype, fieldname, handler) {\n\tvar handler_list = frappe.ui.form.get_event_handler_list(doctype, fieldname);\n\tif(handler_list.length) {\n\t\tfrappe.ui.form.handlers[doctype][fieldname] = [];\n\t}\n\n\tif(cur_frm && cur_frm.doctype===doctype && cur_frm.events[fieldname]) {\n\t\tdelete cur_frm.events[fieldname];\n\t}\n\n\tif(cur_frm && cur_frm.cscript && cur_frm.cscript[fieldname]) {\n\t\tdelete cur_frm.cscript[fieldname];\n\t}\n}\n\n\nfrappe.ui.form.trigger = function(doctype, fieldname) {\n\tcur_frm.script_manager.trigger(fieldname, doctype);\n}\n\nfrappe.ui.form.ScriptManager = Class.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\t},\n\tmake: function(ControllerClass) {\n\t\tthis.frm.cscript = $.extend(this.frm.cscript,\n\t\t\tnew ControllerClass({frm: this.frm}));\n\t},\n\ttrigger: function(event_name, doctype, name) {\n\t\t// trigger all the form level events that\n\t\t// are bound to this event_name\n\t\tlet me = this;\n\t\tdoctype = doctype || this.frm.doctype;\n\t\tname = name || this.frm.docname;\n\n\t\tlet tasks = [];\n\t\tlet handlers = this.get_handlers(event_name, doctype);\n\n\t\t// helper for child table\n\t\tthis.frm.selected_doc = frappe.get_doc(doctype, name);\n\n\t\tlet runner = (_function, is_old_style) => {\n\t\t\tlet _promise = null;\n\t\t\tif(is_old_style) {\n\t\t\t\t// old style arguments (doc, cdt, cdn)\n\t\t\t\t_promise = me.frm.cscript[_function](me.frm.doc, doctype, name);\n\t\t\t} else {\n\t\t\t\t// new style (frm, doctype, name)\n\t\t\t\t_promise = _function(me.frm, doctype, name);\n\t\t\t}\n\n\t\t\t// if the trigger returns a promise, return it,\n\t\t\t// or use the default promise frappe.after_ajax\n\t\t\tif (_promise && _promise.then) {\n\t\t\t\treturn _promise;\n\t\t\t} else {\n\t\t\t\treturn frappe.after_server_call();\n\t\t\t}\n\t\t};\n\n\t\t// make list of functions to be run serially\n\t\thandlers.new_style.forEach((_function) => {\n\t\t\tif(event_name==='setup') {\n\t\t\t\t// setup must be called immediately\n\t\t\t\trunner(_function, false);\n\t\t\t} else {\n\t\t\t\ttasks.push(() => runner(_function, false));\n\t\t\t}\n\t\t});\n\n\t\thandlers.old_style.forEach((_function) => {\n\t\t\tif(event_name==='setup') {\n\t\t\t\t// setup must be called immediately\n\t\t\t\trunner(_function, true);\n\t\t\t} else {\n\t\t\t\ttasks.push(() => runner(_function, true));\n\t\t\t}\n\t\t});\n\n\t\t// run them serially\n\t\treturn frappe.run_serially(tasks);\n\t},\n\thas_handlers: function(event_name, doctype) {\n\t\tlet handlers = this.get_handlers(event_name, doctype);\n\t\treturn handlers && (handlers.old_style.length || handlers.new_style.length);\n\t},\n\tget_handlers: function(event_name, doctype) {\n\t\t// returns list of all functions to be called (old style and new style)\n\t\tlet me = this;\n\t\tlet handlers = {\n\t\t\told_style: [],\n\t\t\tnew_style: []\n\t\t};\n\t\tif(frappe.ui.form.handlers[doctype] && frappe.ui.form.handlers[doctype][event_name]) {\n\t\t\t$.each(frappe.ui.form.handlers[doctype][event_name], function(i, fn) {\n\t\t\t\thandlers.new_style.push(fn);\n\t\t\t});\n\t\t}\n\t\tif(this.frm.cscript[event_name]) {\n\t\t\thandlers.old_style.push(event_name);\n\t\t}\n\t\tif(this.frm.cscript[\"custom_\" + event_name]) {\n\t\t\thandlers.old_style.push(\"custom_\" + event_name);\n\t\t}\n\t\treturn handlers;\n\t},\n\tsetup: function() {\n\t\tvar doctype = this.frm.meta;\n\t\tvar me = this;\n\n\t\t// js\n\t\tvar cs = doctype.__js;\n\t\tif(cs) {\n\t\t\tvar tmp = eval(cs);\n\t\t}\n\n\t\tif(doctype.__custom_js) {\n\t\t\ttry {\n\t\t\t\teval(doctype.__custom_js);\n\t\t\t} catch(e) {\n\t\t\t\tfrappe.msgprint({\n\t\t\t\t\ttitle: __('Error in Custom Script'),\n\t\t\t\t\tindicator: 'orange',\n\t\t\t\t\tmessage: '<pre class=\"small\"><code>' + e.stack  + '</code></pre>'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfunction setup_add_fetch(df) {\n\t\t\tif((['Data', 'Read Only', 'Text', 'Small Text', 'Currency',\n\t\t\t\t'Text Editor', 'Code', 'Link', 'Float', 'Int', 'Date'].includes(df.fieldtype) || df.read_only==1)\n\t\t\t\t&& df.fetch_from && df.fetch_from.indexOf(\".\")!=-1) {\n\t\t\t\tvar parts = df.fetch_from.split(\".\");\n\t\t\t\tme.frm.add_fetch(parts[0], parts[1], df.fieldname);\n\t\t\t}\n\t\t}\n\n\t\t// setup add fetch\n\t\t$.each(this.frm.fields, function(i, field) {\n\t\t\tsetup_add_fetch(field.df);\n\t\t\tif(field.df.fieldtype===\"Table\") {\n\t\t\t\t$.each(frappe.meta.get_docfields(field.df.options, me.frm.docname), function(i, df) {\n\t\t\t\t\tsetup_add_fetch(df);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// css\n\t\tdoctype.__css && frappe.dom.set_style(doctype.__css);\n\n\t\tthis.trigger('setup');\n\t},\n\tlog_error: function(caller, e) {\n\t\tfrappe.show_alert(\"Error in Client Script.\");\n\t\tconsole.group && console.group();\n\t\tconsole.log(\"----- error in client script -----\");\n\t\tconsole.log(\"method: \" + caller);\n\t\tconsole.log(e);\n\t\tconsole.log(\"error message: \" + e.message);\n\t\tconsole.trace && console.trace();\n\t\tconsole.log(\"----- end of error message -----\");\n\t\tconsole.group && console.groupEnd();\n\t},\n\tcopy_from_first_row: function(parentfield, current_row, fieldnames) {\n\t\tvar data = this.frm.doc[parentfield];\n\t\tif(data.length===1 || data[0]===current_row) return;\n\n\t\tif(typeof fieldnames==='string') {\n\t\t\tfieldnames = [fieldnames];\n\t\t}\n\n\t\t$.each(fieldnames, function(i, fieldname) {\n\t\t\tfrappe.model.set_value(current_row.doctype, current_row.name, fieldname,\n\t\t\t\tdata[0][fieldname]);\n\t\t});\n\t}\n});\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide(\"frappe.ui.form\");\n\nfrappe.ui.form.LinkedWith = class LinkedWith {\n\n\tconstructor(opts) {\n\t\t$.extend(this, opts);\n\t}\n\n\tshow() {\n\t\tif(!this.dialog)\n\t\t\tthis.make_dialog();\n\n\t\t$(this.dialog.body).html(\n\t\t\t`<div class=\"text-muted text-center\" style=\"padding: 30px 0px\">\n\t\t\t\t${__(\"Loading\")}...\n\t\t\t</div>`);\n\n\t\tthis.dialog.show();\n\t}\n\n\tmake_dialog() {\n\n\t\tthis.dialog = new frappe.ui.Dialog({\n\t\t\thide_on_page_refresh: true,\n\t\t\ttitle: __(\"Linked With\")\n\t\t});\n\n\t\tthis.dialog.on_page_show = () => {\n\t\t\t// execute ajax calls sequentially\n\t\t\t// 1. get linked doctypes\n\t\t\t// 2. load all doctypes\n\t\t\t// 3. load linked docs\n\t\t\tthis.get_linked_doctypes()\n\t\t\t\t.then(() => this.load_doctypes())\n\t\t\t\t.then(() => this.links_not_permitted_or_missing())\n\t\t\t\t.then(() => this.get_linked_docs())\n\t\t\t\t.then(() => this.make_html());\n\t\t};\n\t}\n\n\tmake_html() {\n\t\tconst linked_docs = this.frm.__linked_docs;\n\n\t\tlet html = '';\n\n\t\tconst linked_doctypes = Object.keys(linked_docs);\n\n\t\tif (linked_doctypes.length === 0) {\n\t\t\thtml = __(\"Not Linked to any record\");\n\t\t} else {\n\t\t\thtml = linked_doctypes.map(doctype => {\n\t\t\t\tconst docs = linked_docs[doctype];\n\t\t\t\treturn `\n\t\t\t\t\t<div class=\"list-item-table margin-bottom\">\n\t\t\t\t\t\t${this.make_doc_head(doctype)}\n\t\t\t\t\t\t${docs.map(doc => this.make_doc_row(doc, doctype)).join('')}\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t}).join('');\n\t\t}\n\n\t\t$(this.dialog.body).html(html);\n\t}\n\n\tload_doctypes() {\n\t\tconst already_loaded = Object.keys(locals.DocType);\n\t\tlet doctypes_to_load = [];\n\n\t\tif (this.frm.__linked_doctypes) {\n\t\t\tdoctypes_to_load =\n\t\t\t\tObject.keys(this.frm.__linked_doctypes)\n\t\t\t\t\t.filter(doctype => !already_loaded.includes(doctype));\n\t\t}\n\n\t\t// load all doctypes asynchronously using with_doctype\n\t\tconst promises = doctypes_to_load.map(dt => {\n\t\t\treturn frappe.model.with_doctype(dt, () => {\n\t\t\t\tif(frappe.listview_settings[dt]) {\n\t\t\t\t\t// add additional fields to __linked_doctypes\n\t\t\t\t\tthis.frm.__linked_doctypes[dt].add_fields =\n\t\t\t\t\t\tfrappe.listview_settings[dt].add_fields;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\treturn Promise.all(promises);\n\t}\n\n\tlinks_not_permitted_or_missing() {\n\t\tlet links = null;\n\n\t\tif (this.frm.__linked_doctypes) {\n\t\t\tlinks =\n\t\t\t\tObject.keys(this.frm.__linked_doctypes)\n\t\t\t\t\t.filter(frappe.model.can_get_report);\n\t\t}\n\n\t\tlet flag;\n\t\tif(!links) {\n\t\t\t$(this.dialog.body).html(`${this.frm.__linked_doctypes\n\t\t\t\t? __(\"Not enough permission to see links\")\n\t\t\t\t: __(\"Not Linked to any record\")}`);\n\t\t\tflag = true;\n\t\t}\n\t\tflag = false;\n\n\t\t// reject Promise if not_permitted or missing\n\t\treturn new Promise(\n\t\t\t(resolve, reject) => flag ? reject() : resolve()\n\t\t);\n\t}\n\n\tget_linked_doctypes() {\n\t\treturn new Promise((resolve) => {\n\t\t\tif (this.frm.__linked_doctypes) {\n\t\t\t\tresolve();\n\t\t\t}\n\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"frappe.desk.form.linked_with.get_linked_doctypes\",\n\t\t\t\targs: {\n\t\t\t\t\tdoctype: this.frm.doctype\n\t\t\t\t},\n\t\t\t\tcallback: (r) => {\n\t\t\t\t\tthis.frm.__linked_doctypes = r.message;\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tget_linked_docs() {\n\t\treturn frappe.call({\n\t\t\tmethod: \"frappe.desk.form.linked_with.get_linked_docs\",\n\t\t\targs: {\n\t\t\t\tdoctype: this.frm.doctype,\n\t\t\t\tname: this.frm.docname,\n\t\t\t\tlinkinfo: this.frm.__linked_doctypes,\n\t\t\t\tfor_doctype: this.for_doctype\n\t\t\t},\n\t\t\tcallback: (r) => {\n\t\t\t\tthis.frm.__linked_docs = r.message || {};\n\t\t\t}\n\t\t});\n\t}\n\n\tmake_doc_head(heading) {\n\t\treturn `\n\t\t\t<header class=\"level list-row list-row-head text-muted small\">\n\t\t\t\t<div>${__(heading)}</div>\n\t\t\t</header>\n\t\t`;\n\t}\n\n\tmake_doc_row(doc, doctype) {\n\t\treturn `<div class=\"list-row-container\">\n\t\t\t<div class=\"level list-row small\">\n\t\t\t\t<div class=\"level-left bold\">\n\t\t\t\t\t<a href=\"#Form/${doctype}/${doc.name}\">${doc.name}</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>`;\n\t}\n};\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.ui.form.States = Class.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\t\tthis.state_fieldname = frappe.workflow.get_state_fieldname(this.frm.doctype);\n\n\t\t// no workflow?\n\t\tif(!this.state_fieldname)\n\t\t\treturn;\n\n\t\tthis.update_fields = frappe.workflow.get_update_fields(this.frm.doctype);\n\n\t\tvar me = this;\n\t\t$(this.frm.wrapper).bind(\"render_complete\", function() {\n\t\t\tme.refresh();\n\t\t});\n\t},\n\n\tsetup_help: function() {\n\t\tvar me = this;\n\t\tthis.frm.page.add_action_item(__(\"Help\"), function() {\n\t\t\tfrappe.workflow.setup(me.frm.doctype);\n\t\t\tvar state = me.get_state();\n\t\t\tvar d = new frappe.ui.Dialog({\n\t\t\t\ttitle: \"Workflow: \"\n\t\t\t\t\t+ frappe.workflow.workflows[me.frm.doctype].name\n\t\t\t});\n\n\t\t\tfrappe.workflow.get_transitions(me.frm.doc).then((transitions) => {\n\t\t\t\tvar next_html = $.map(transitions,\n\t\t\t\t\tfunction(d) {\n\t\t\t\t\t\treturn d.action.bold() + __(\" by Role \") + d.allowed;\n\t\t\t\t\t}).join(\", \") || __(\"None: End of Workflow\").bold();\n\n\t\t\t\t$(d.body).html(\"<p>\"+__(\"Current status\")+\": \" + state.bold() + \"</p>\"\n\t\t\t\t\t+ \"<p>\"+__(\"Document is only editable by users of role\")+\": \"\n\t\t\t\t\t\t+ frappe.workflow.get_document_state(me.frm.doctype,\n\t\t\t\t\t\t\tstate).allow_edit.bold() + \"</p>\"\n\t\t\t\t\t+ \"<p>\"+__(\"Next actions\")+\": \"+ next_html +\"</p>\"\n\t\t\t\t\t+ (me.frm.doc.__islocal ? (\"<div class='alert alert-info'>\"\n\t\t\t\t\t\t+__(\"Workflow will start after saving.\")+\"</div>\") : \"\")\n\t\t\t\t\t+ \"<p class='help'>\"+__(\"Note: Other permission rules may also apply\")+\"</p>\"\n\t\t\t\t).css({padding: '15px'});\n\t\t\t\td.show();\n\t\t\t});\n\t\t}, true);\n\t},\n\n\trefresh: function() {\n\t\tconst me = this;\n\t\t// hide if its not yet saved\n\t\tif(this.frm.doc.__islocal) {\n\t\t\tthis.set_default_state();\n\t\t\treturn;\n\t\t}\n\n\t\t// state text\n\t\tconst state = this.get_state();\n\n\t\tlet doctype = this.frm.doctype;\n\n\t\tif(state) {\n\t\t\t// show actions from that state\n\t\t\tthis.show_actions(state);\n\t\t}\n\t},\n\n\tshow_actions: function() {\n\t\tvar added = false,\n\t\t\tme = this;\n\n\t\tthis.frm.page.clear_actions_menu();\n\n\t\t// if the loaded doc is dirty, don't show workflow buttons\n\t\tif (this.frm.doc.__unsaved===1) {\n\t\t\treturn;\n\t\t}\n\n\t\tfunction has_approval_access(transition) {\n\t\t\tlet approval_access = false;\n\t\t\tconst user = frappe.session.user;\n\t\t\tif (user === 'Administrator'\n\t\t\t\t|| transition.allow_self_approval\n\t\t\t\t|| user !== me.frm.doc.owner) {\n\t\t\t\tapproval_access = true;\n\t\t\t}\n\t\t\treturn approval_access;\n\t\t}\n\n\t\tfrappe.workflow.get_transitions(this.frm.doc).then(transitions => {\n\t\t\t$.each(transitions, function(i, d) {\n\t\t\t\tif(frappe.user_roles.includes(d.allowed) && has_approval_access(d)) {\n\t\t\t\t\tadded = true;\n\t\t\t\t\tme.frm.page.add_action_item(__(d.action), function() {\n\t\t\t\t\t\tfrappe.xcall('frappe.model.workflow.apply_workflow',\n\t\t\t\t\t\t\t{doc: me.frm.doc, action: d.action})\n\t\t\t\t\t\t\t.then((doc) => {\n\t\t\t\t\t\t\t\tfrappe.model.sync(doc);\n\t\t\t\t\t\t\t\tme.frm.refresh();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tif(added) {\n\t\t\tthis.frm.page.btn_primary.addClass(\"hide\");\n\t\t\tthis.frm.toolbar.current_status = \"\";\n\t\t\tthis.setup_help();\n\t\t}\n\t},\n\n\tset_default_state: function() {\n\t\tvar default_state = frappe.workflow.get_default_state(this.frm.doctype, this.frm.doc.docstatus);\n\t\tif(default_state) {\n\t\t\tthis.frm.set_value(this.state_fieldname, default_state);\n\t\t}\n\t},\n\n\tget_state: function() {\n\t\tif(!this.frm.doc[this.state_fieldname]) {\n\t\t\tthis.set_default_state();\n\t\t}\n\t\treturn this.frm.doc[this.state_fieldname];\n\t}\n});\n","frappe.provide(\"frappe.ui.form\");\n\nfrappe.ui.form.PrintPreview = Class.extend({\n\tinit: function (opts) {\n\t\t$.extend(this, opts);\n\t\tthis.make();\n\t\tthis.bind_events();\n\t},\n\tmake: function () {\n\t\tthis.wrapper = this.frm.page.add_view(\"print\", frappe.render_template(\"print_layout\", {}));\n\n\t\t// only system manager can edit\n\t\tthis.wrapper.find(\".btn-print-edit\").toggle(frappe.user.has_role(\"System Manager\"));\n\t},\n\tbind_events: function () {\n\t\tvar me = this;\n\t\tthis.wrapper.find(\".btn-print-close\").click(function () {\n\t\t\tme.frm.hide_print();\n\t\t});\n\n\t\t// hide print view on pressing escape, only if there is no focus on any input\n\t\t$(document).on(\"keydown\", function (e) {\n\t\t\tif (e.which === 27 && me.frm && e.target === document.body) {\n\t\t\t\tme.frm.hide_print();\n\t\t\t}\n\t\t});\n\n\t\tthis.print_formats = frappe.meta.get_print_formats(this.frm.meta.name);\n\t\tthis.print_letterhead = this.wrapper\n\t\t\t.find(\".print-letterhead\")\n\t\t\t.on(\"change\", function () { me.print_sel.trigger(\"change\"); })\n\t\t\t.prop(\"checked\", cint(\n\t\t\t\t(frappe.model.get_doc(\":Print Settings\", \"Print Settings\")\n\t\t\t\t\t|| { with_letterhead: 1 }).with_letterhead) ? true : false);\n\t\tthis.print_sel = this.wrapper\n\t\t\t.find(\".print-preview-select\")\n\t\t\t.on(\"change\", function () {\n\t\t\t\tme.set_default_print_language();\n\t\t\t\tme.multilingual_preview();\n\t\t\t});\n\n\t\t//On selection of language get code and pass it to preview method\n\t\tthis.language_sel = this.wrapper\n\t\t\t.find(\".languages\")\n\t\t\t.on(\"change\", function () {\n\t\t\t\tme.lang_code = me.language_sel.val()\n\t\t\t\tme.multilingual_preview()\n\t\t\t});\n\n\t\tthis.wrapper.find(\".btn-print-print\").click(function () {\n\t\t\tif (me.is_old_style()) {\n\t\t\t\tme.print_old_style();\n\t\t\t} else {\n\t\t\t\tme.printit();\n\t\t\t}\n\t\t});\n\n\t\tthis.wrapper.find(\".btn-print-preview\").click(function () {\n\t\t\tif (me.is_old_style()) {\n\t\t\t\tme.new_page_preview_old_style();\n\t\t\t} else {\n\t\t\t\tme.new_page_preview();\n\t\t\t}\n\t\t});\n\n\t\tthis.wrapper.find(\".btn-download-pdf\").click(function () {\n\t\t\tif (!me.is_old_style()) {\n\t\t\t\tvar w = window.open(\n\t\t\t\t\tfrappe.urllib.get_full_url(\"/api/method/frappe.utils.print_format.download_pdf?\"\n\t\t\t\t\t\t+ \"doctype=\" + encodeURIComponent(me.frm.doc.doctype)\n\t\t\t\t\t\t+ \"&name=\" + encodeURIComponent(me.frm.doc.name)\n\t\t\t\t\t\t+ \"&format=\" + me.selected_format()\n\t\t\t\t\t\t+ \"&no_letterhead=\" + (me.with_letterhead() ? \"0\" : \"1\")\n\t\t\t\t\t\t+ (me.lang_code ? (\"&_lang=\" + me.lang_code) : \"\"))\n\t\t\t\t);\n\t\t\t\tif (!w) {\n\t\t\t\t\tfrappe.msgprint(__(\"Please enable pop-ups\")); return;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.wrapper.find(\".btn-print-edit\").on(\"click\", function () {\n\t\t\tlet print_format = me.get_print_format();\n\t\t\tif (print_format && print_format.name) {\n\t\t\t\tif (print_format.print_format_builder) {\n\t\t\t\t\tfrappe.set_route(\"print-format-builder\", print_format.name);\n\t\t\t\t} else {\n\t\t\t\t\tfrappe.set_route(\"Form\", \"Print Format\", print_format.name);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// start a new print format\n\t\t\t\tfrappe.prompt({\n\t\t\t\t\tfieldname: \"print_format_name\", fieldtype: \"Data\", reqd: 1,\n\t\t\t\t\tlabel: \"New Print Format Name\"\n\t\t\t\t}, function (data) {\n\t\t\t\t\tfrappe.route_options = {\n\t\t\t\t\t\tmake_new: true,\n\t\t\t\t\t\tdoctype: me.frm.doctype,\n\t\t\t\t\t\tname: data.print_format_name\n\t\t\t\t\t};\n\t\t\t\t\tfrappe.set_route(\"print-format-builder\");\n\t\t\t\t}, __(\"New Custom Print Format\"), __(\"Start\"));\n\t\t\t}\n\t\t});\n\t},\n\tset_user_lang: function () {\n\t\tthis.lang_code = this.frm.doc.language;\n\t\t// Load all languages in the field\n\t\tthis.language_sel.empty()\n\t\t\t.add_options([{value:'', label:__(\"Select Language...\")}]\n\t\t\t\t.concat(frappe.get_languages()))\n\t\t\t.val(this.lang_code);\n\t\tthis.preview();\n\t},\n\tset_default_print_language: function () {\n \t\tvar print_format = this.get_print_format();\n\n \t\tif (print_format.default_print_language) {\n \t\t\tthis.lang_code = print_format.default_print_language;\n \t\t\tthis.language_sel.val(this.lang_code);\n \t\t} else {\n\t\t\tthis.language_sel.val(frappe.boot.lang);\n\t\t}\n \t},\n\tmultilingual_preview: function () {\n\t\tvar me = this;\n\t\tif (this.is_old_style()) {\n\t\t\tme.wrapper.find(\".btn-download-pdf\").toggle(false);\n\t\t\tme.set_style();\n\t\t\tme.preview_old_style();\n\t\t} else {\n\t\t\tme.wrapper.find(\".btn-download-pdf\").toggle(true);\n\t\t\tme.preview();\n\t\t}\n\t},\n\tpreview: function () {\n\t\tvar me = this;\n\t\tthis.get_print_html(function (out) {\n\t\t\tme.wrapper.find(\".print-format\").html(out.html);\n\t\t\tme.show_footer();\n\t\t\tme.set_style(out.style);\n\t\t});\n\t},\n\tshow_footer: function() {\n\t\t// footer is hidden by default as reqd by pdf generation\n\t\t// simple hack to show it in print preview\n\t\tthis.wrapper.find('.page-break').css({\n\t\t\t'display': 'flex',\n\t\t\t'flex-direction': 'column'\n\t\t});\n\t\tthis.wrapper.find('#footer-html').attr('style', `\n\t\t\tdisplay: block !important;\n\t\t\torder: 1;\n\t\t\tmargin-top: 20px;\n\t\t`);\n\t},\n\tprintit: function () {\n\t\tlet print_server ;\n\t\tvar me = this;\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.printing.doctype.print_settings.print_settings.is_print_server_enabled\",\n\t\t\tcallback: function (data) {\n\t\t\t\tif (data.message) {\n\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\t\"method\": \"frappe.utils.print_format.print_by_server\",\n\t\t\t\t\t\targs: {\n\t\t\t\t\t\t\tdoctype: me.frm.doc.doctype,\n\t\t\t\t\t\t\tname: me.frm.doc.name,\n\t\t\t\t\t\t\tprint_format:  me.selected_format(),\n\t\t\t\t\t\t\tno_letterhead: me.with_letterhead()\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcallback: function (data) {\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tme.new_page_preview(true);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\tnew_page_preview: function (printit) {\n\t\tvar me = this;\n\t\tvar w = window.open(frappe.urllib.get_full_url(\"/printview?\"\n\t\t\t+ \"doctype=\" + encodeURIComponent(me.frm.doc.doctype)\n\t\t\t+ \"&name=\" + encodeURIComponent(me.frm.doc.name)\n\t\t\t+ (printit ? \"&trigger_print=1\" : \"\")\n\t\t\t+ \"&format=\" + me.selected_format()\n\t\t\t+ \"&no_letterhead=\" + (me.with_letterhead() ? \"0\" : \"1\")\n\t\t\t+ (me.lang_code ? (\"&_lang=\" + me.lang_code) : \"\")));\n\t\tif (!w) {\n\t\t\tfrappe.msgprint(__(\"Please enable pop-ups\")); return;\n\t\t}\n\t},\n\tget_print_html: function (callback) {\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.www.printview.get_html_and_style\",\n\t\t\targs: {\n\t\t\t\tdoc: this.frm.doc,\n\t\t\t\tprint_format: this.selected_format(),\n\t\t\t\tno_letterhead: !this.with_letterhead() ? 1 : 0,\n\t\t\t\t_lang: this.lang_code\n\t\t\t},\n\t\t\tcallback: function (r) {\n\t\t\t\tif (!r.exc) {\n\t\t\t\t\tcallback(r.message);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\tpreview_old_style: function () {\n\t\tvar me = this;\n\t\tthis.with_old_style({\n\t\t\tformat: me.print_sel.val(),\n\t\t\tcallback: function (html) {\n\t\t\t\tme.wrapper.find(\".print-format\").html('<div class=\"alert alert-warning\">'\n\t\t\t\t\t+ __(\"Warning: This Print Format is in old style and cannot be generated via the API.\")\n\t\t\t\t\t+ '</div>'\n\t\t\t\t\t+ html);\n\t\t\t},\n\t\t\tno_letterhead: !this.with_letterhead(),\n\t\t\tonly_body: true,\n\t\t\tno_heading: true\n\t\t});\n\t},\n\trefresh_print_options: function () {\n\t\tthis.print_formats = frappe.meta.get_print_formats(this.frm.doctype);\n\t\treturn this.print_sel\n\t\t\t.empty().add_options(this.print_formats);\n\n\t},\n\twith_old_style: function (opts) {\n\t\tfrappe.require(\"/assets/js/print_format_v3.min.js\", function () {\n\t\t\t_p.build(opts.format, opts.callback, opts.no_letterhead, opts.only_body, opts.no_heading);\n\t\t});\n\t},\n\tprint_old_style: function () {\n\t\tvar me = this;\n\t\tfrappe.require(\"/assets/js/print_format_v3.min.js\", function () {\n\t\t\t_p.build(me.print_sel.val(), _p.go,\n\t\t\t\t!me.with_letterhead());\n\t\t});\n\t},\n\tnew_page_preview_old_style: function () {\n\t\tvar me = this;\n\t\tfrappe.require(\"/assets/js/print_format_v3.min.js\", function () {\n\t\t\t_p.build(me.print_sel.val(), _p.preview, !me.with_letterhead());\n\t\t});\n\t},\n\tselected_format: function () {\n\t\treturn this.print_sel.val() || this.frm.meta.default_print_format || \"Standard\";\n\t},\n\tis_old_style: function (format) {\n\t\treturn this.get_print_format(format).print_format_type === \"Client\";\n\t},\n\tget_print_format: function (format) {\n\t\tif (!format) {\n\t\t\tformat = this.selected_format();\n\t\t}\n\n\t\tif (locals[\"Print Format\"] && locals[\"Print Format\"][format]) {\n\t\t\treturn locals[\"Print Format\"][format]\n\t\t} else {\n\t\t\treturn {}\n\t\t}\n\t},\n\twith_letterhead: function () {\n\t\treturn this.print_letterhead.is(\":checked\") ? 1 : 0;\n\t},\n\tset_style: function (style) {\n\t\tfrappe.dom.set_style(style || frappe.boot.print_css, \"print-style\");\n\t}\n});\n\nfrappe.ui.get_print_settings = function (pdf, callback, letter_head) {\n\tvar print_settings = locals[\":Print Settings\"][\"Print Settings\"];\n\n\tvar default_letter_head = locals[\":Company\"] && frappe.defaults.get_default('company')\n\t\t? locals[\":Company\"][frappe.defaults.get_default('company')][\"default_letter_head\"]\n\t\t: '';\n\n\tvar columns = [{\n\t\tfieldtype: \"Check\",\n\t\tfieldname: \"with_letter_head\",\n\t\tlabel: __(\"With Letter head\")\n\t}, {\n\t\tfieldtype: \"Select\",\n\t\tfieldname: \"letter_head\",\n\t\tlabel: __(\"Letter Head\"),\n\t\tdepends_on: \"with_letter_head\",\n\t\toptions: $.map(frappe.boot.letter_heads, function (i, d) { return d }),\n\t\tdefault: letter_head || default_letter_head\n\t}, {\n\t\tfieldtype: \"Select\",\n\t\tfieldname: \"orientation\",\n\t\tlabel: __(\"Orientation\"),\n\t\toptions: \"Landscape\\nPortrait\",\n\t\tdefault: \"Landscape\"\n\t}];\n\n\tfrappe.prompt(columns, function (data) {\n\t\tvar data = $.extend(print_settings, data);\n\t\tif (!data.with_letter_head) {\n\t\t\tdata.letter_head = null;\n\t\t}\n\t\tif (data.letter_head) {\n\t\t\tdata.letter_head = frappe.boot.letter_heads[print_settings.letter_head];\n\t\t}\n\t\tcallback(data);\n\t}, __(\"Print Settings\"));\n}\n","frappe.provide(\"frappe.ui.form\");\nfrappe.ui.form.Sidebar = Class.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\t},\n\n\tmake: function() {\n\t\tvar sidebar_content = frappe.render_template(\"form_sidebar\", {doctype: this.frm.doctype, frm:this.frm});\n\n\t\tthis.sidebar = $('<div class=\"form-sidebar overlay-sidebar hidden-xs hidden-sm\"></div>')\n\t\t\t.html(sidebar_content)\n\t\t\t.appendTo(this.page.sidebar.empty());\n\n\t\tthis.ratings = this.sidebar.find(\".sidebar-rating\");\n\t\tthis.comments = this.sidebar.find(\".sidebar-comments\");\n\t\tthis.user_actions = this.sidebar.find(\".user-actions\");\n\t\tthis.image_section = this.sidebar.find(\".sidebar-image-section\");\n\t\tthis.image_wrapper = this.image_section.find('.sidebar-image-wrapper');\n\n\t\tthis.make_assignments();\n\t\tthis.make_attachments();\n\t\tthis.make_shared();\n\t\tthis.make_viewers();\n\t\tthis.make_tags();\n\t\tthis.make_like();\n\n\t\tthis.bind_events();\n\t\tfrappe.ui.form.setup_user_image_event(this.frm);\n\n\t\tthis.refresh();\n\n\t},\n\n\tbind_events: function() {\n\t\tvar me = this;\n\n\t\t// scroll to comments\n\t\tthis.comments.on(\"click\", function() {\n\t\t\tfrappe.utils.scroll_to(me.frm.footer.wrapper.find(\".form-comments\"), true);\n\t\t});\n\n\t\tthis.like_icon.on(\"click\", function() {\n\t\t\tfrappe.ui.toggle_like(me.like_icon, me.frm.doctype, me.frm.doc.name, function() {\n\t\t\t\tme.refresh_like();\n\t\t\t});\n\t\t})\n\t},\n\n\trefresh: function() {\n\t\tif(this.frm.doc.__islocal) {\n\t\t\tthis.sidebar.toggle(false);\n\t\t} else {\n\t\t\tthis.sidebar.toggle(true);\n\t\t\tthis.frm.assign_to.refresh();\n\t\t\tthis.frm.attachments.refresh();\n\t\t\tthis.frm.shared.refresh();\n\t\t\tthis.frm.viewers.refresh();\n\t\t\tthis.frm.tags && this.frm.tags.refresh(this.frm.doc._user_tags);\n\t\t\tthis.sidebar.find(\".modified-by\").html(__(\"{0} edited this {1}\",\n\t\t\t\t[\"<strong>\" + frappe.user.full_name(this.frm.doc.modified_by) + \"</strong>\",\n\t\t\t\t\t\"<br>\" + comment_when(this.frm.doc.modified)]));\n\t\t\tthis.sidebar.find(\".created-by\").html(__(\"{0} created this {1}\",\n\t\t\t\t[\"<strong>\" + frappe.user.full_name(this.frm.doc.owner) + \"</strong>\",\n\t\t\t\t\t\"<br>\" + comment_when(this.frm.doc.creation)]));\n\n\t\t\tthis.refresh_like();\n\t\t\tthis.setup_ratings();\n\t\t\tfrappe.ui.form.set_user_image(this.frm);\n\t\t}\n\t},\n\n\trefresh_comments: function() {\n\t\t$.map(this.frm.timeline.get_communications(), function(c) {\n\t\t\treturn (c.communication_type===\"Communication\" || (c.communication_type==\"Comment\" && c.comment_type===\"Comment\")) ? c : null;\n\t\t});\n\t\tthis.comments.find(\".n-comments\").html(this.frm.get_docinfo().total_comments);\n\t},\n\n\tmake_tags: function() {\n\t\tvar me = this;\n\t\tif (this.frm.meta.issingle) {\n\t\t\tthis.sidebar.find(\".form-tags\").toggle(false);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.frm.tags = new frappe.ui.TagEditor({\n\t\t\tparent: this.sidebar.find(\".tag-area\"),\n\t\t\tfrm: this.frm,\n\t\t\ton_change: function(user_tags) {\n\t\t\t\tme.frm.doc._user_tags = user_tags;\n\t\t\t}\n\t\t});\n\t},\n\tmake_attachments: function() {\n\t\tvar me = this;\n\t\tthis.frm.attachments = new frappe.ui.form.Attachments({\n\t\t\tparent: me.sidebar.find(\".form-attachments\"),\n\t\t\tfrm: me.frm\n\t\t});\n\t},\n\tmake_assignments: function() {\n\t\tthis.frm.assign_to = new frappe.ui.form.AssignTo({\n\t\t\tparent: this.sidebar.find(\".form-assignments\"),\n\t\t\tfrm: this.frm\n\t\t});\n\t},\n\tmake_shared: function() {\n\t\tthis.frm.shared = new frappe.ui.form.Share({\n\t\t\tfrm: this.frm,\n\t\t\tparent: this.sidebar.find(\".form-shared\")\n\t\t});\n\t},\n\tmake_viewers: function() {\n\t\tthis.frm.viewers = new frappe.ui.form.Viewers({\n\t\t\tfrm: this.frm,\n\t\t\tparent: this.sidebar.find(\".form-viewers\")\n\t\t});\n\t},\n\tadd_user_action: function(label, click) {\n\t\treturn $('<a>').html(label).appendTo($('<li class=\"user-action-row\">')\n\t\t\t.appendTo(this.user_actions.removeClass(\"hidden\"))).on(\"click\", click);\n\t},\n\tclear_user_actions: function() {\n\t\tthis.user_actions.addClass(\"hidden\")\n\t\tthis.user_actions.find(\".user-action-row\").remove();\n\t},\n\n\tmake_like: function() {\n\t\tthis.like_wrapper = this.sidebar.find(\".liked-by\");\n\t\tthis.like_icon = this.sidebar.find(\".liked-by .octicon-heart\");\n\t\tthis.like_count = this.sidebar.find(\".liked-by .likes-count\");\n\t\tfrappe.ui.setup_like_popover(this.sidebar.find(\".liked-by-parent\"), \".liked-by\");\n\t},\n\n\trefresh_like: function() {\n\t\tif (!this.like_icon) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.like_wrapper.attr(\"data-liked-by\", this.frm.doc._liked_by);\n\n\t\tthis.like_icon.toggleClass(\"text-extra-muted not-liked\",\n\t\t\t!frappe.ui.is_liked(this.frm.doc))\n\t\t\t.attr(\"data-doctype\", this.frm.doctype)\n\t\t\t.attr(\"data-name\", this.frm.doc.name);\n\n\t\tthis.like_count.text(JSON.parse(this.frm.doc._liked_by || \"[]\").length);\n\t},\n\n\trefresh_image: function() {\n\t},\n\n\tsetup_ratings: function() {\n\t\tvar _ratings = this.frm.get_docinfo().rating || 0;\n\n\t\tif(_ratings) {\n\t\t\tthis.ratings.removeClass(\"hide\");\n\t\t\tvar rating_icons = frappe.render_template(\"rating_icons\", {rating: _ratings, show_label: false});\n\t\t\tthis.ratings.find(\".rating-icons\").html(rating_icons);\n\t\t}\n\t}\n});\n","frappe.ui.form.set_user_image = function(frm) {\n\n\tvar image_section = frm.sidebar.image_section;\n\tvar image_field = frm.meta.image_field;\n\tvar image = frm.doc[image_field];\n\tvar title_image = frm.page.$title_area.find('.title-image');\n\n\n\timage_section.toggleClass('hide', image_field ? false : true);\n\ttitle_image.toggleClass('hide', image_field ? false : true);\n\n\tif(!image_field) {\n\t\treturn;\n\t}\n\n\t// if image field has value\n\tif (image) {\n\t\timage = (window.cordova && image.indexOf('http')===-1) ?\n\t\t\tfrappe.base_url + image : image;\n\n\t\timage_section\n\t\t\t.find(\".sidebar-image\")\n\t\t\t.css(\"background-image\", 'url(\"' + image + '\")')\n\t\t\t.removeClass(\"hide\");\n\n\t\timage_section\n\t\t\t.find('.sidebar-standard-image')\n\t\t\t.addClass('hide');\n\n\t\ttitle_image\n\t\t\t.css('background-color', '')\n\t\t\t.css(\"background-image\", 'url(\"' + image + '\")')\n\t\t\t.html('');\n\n\t} else {\n\t\timage_section\n\t\t\t.find(\".sidebar-image\")\n\t\t\t.css(\"background-image\", null)\n\t\t\t.addClass(\"hide\");\n\n\t\tvar title = frm.get_title();\n\n\t\timage_section\n\t\t\t.find('.sidebar-standard-image')\n\t\t\t.removeClass('hide')\n\t\t\t.find('.standard-image')\n\t\t\t.css({'background-color': frappe.get_palette(title)})\n\t\t\t.html(frappe.get_abbr(title));\n\n\t\ttitle_image.css(\"background-image\", '')\n\t\t\t.css({'background-color': frappe.get_palette(title)})\n\t\t\t.html(frappe.get_abbr(title));\n\n\t}\n\n}\n\nfrappe.ui.form.setup_user_image_event = function(frm) {\n\t// re-draw image on change of user image\n\tif(frm.meta.image_field) {\n\t\tfrappe.ui.form.on(frm.doctype, frm.meta.image_field, function(frm) {\n\t\t\tfrappe.ui.form.set_user_image(frm);\n\t\t});\n\t}\n\n\t// bind click on image_wrapper\n\tfrm.sidebar.image_wrapper.on('click', function() {\n\t\tvar field = frm.get_field(frm.meta.image_field);\n\t\tif(!field.$input) {\n\t\t\tfield.make_input();\n\t\t}\n\t\tfield.$input.trigger('click');\n\t});\n}","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide(\"frappe.ui.form\");\n\nfrappe.ui.form.Share = Class.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\t},\n\trefresh: function() {\n\t\tthis.render_sidebar();\n\t},\n\trender_sidebar: function() {\n\t\tvar me = this;\n\t\tthis.parent.empty();\n\n\t\tvar shared = this.shared || this.frm.get_docinfo().shared;\n\t\tshared = shared.filter(function(d) { return d });\n\t\tvar users = [];\n\t\tfor (var i=0, l=shared.length; i < l; i++) {\n\t\t\tvar s = shared[i];\n\n\t\t\tif (s.everyone) {\n\t\t\t\tusers.push({\n\t\t\t\t\ticon: \"octicon octicon-megaphone text-muted\",\n\t\t\t\t\tavatar_class: \"avatar-empty share-doc-btn shared-with-everyone\",\n\t\t\t\t\ttitle: __(\"Shared with everyone\")\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tvar user_info = frappe.user_info(s.user);\n\t\t\t\tusers.push({\n\t\t\t\t\timage: user_info.image,\n\t\t\t\t\tfullname: user_info.fullname,\n\t\t\t\t\tabbr: user_info.abbr,\n\t\t\t\t\tcolor: user_info.color,\n\t\t\t\t\ttitle: __(\"Shared with {0}\", [user_info.fullname])\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (!me.frm.doc.__islocal) {\n\t\t\tusers.push({\n\t\t\t\ticon: \"octicon octicon-plus text-muted\",\n\t\t\t\tavatar_class: \"avatar-empty share-doc-btn\",\n\t\t\t\ttitle: __(\"Share\")\n\t\t\t});\n\t\t}\n\n\t\tthis.parent.append(frappe.render_template(\"users_in_sidebar\", {\"users\": users}));\n\t\tthis.parent.find(\".avatar\").on(\"click\", function() {\n\t\t\tme.frm.share_doc();\n\t\t});\n\t},\n\tshow: function() {\n\t\tvar me = this;\n\t\tvar d = new frappe.ui.Dialog({\n\t\t\ttitle: __(\"Share {0} with\", [this.frm.doc.name]),\n\t\t});\n\n\t\tthis.dialog = d;\n\t\tthis.dirty = false;\n\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.share.get_users\",\n\t\t\targs: {\n\t\t\t\tdoctype: this.frm.doctype,\n\t\t\t\tname: this.frm.doc.name\n\t\t\t},\n\t\t\tcallback: function(r) {\n\t\t\t\tme.render_shared(r.message || []);\n\t\t\t}\n\t\t});\n\n\t\t$(d.body).html('<p class=\"text-muted\">' + __(\"Loading...\") + '</p>');\n\n\t\td.onhide = function() {\n\t\t\t// reload comments\n\t\t\tif(me.dirty) me.frm.reload_docinfo();\n\t\t}\n\n\t\td.show();\n\t},\n\trender_shared: function(shared) {\n\t\tif(shared)\n\t\t\tthis.shared = shared;\n\t\tvar d = this.dialog;\n\t\t$(d.body).empty();\n\n\t\tvar everyone = {};\n\t\t$.each(this.shared, function(i, s) {\n\t\t\t// pullout everyone record from shared list\n\t\t\tif (s && s.everyone) {\n\t\t\t\teveryone = s;\n\t\t\t}\n\t\t});\n\n\t\t$(frappe.render_template(\"set_sharing\", {frm: this.frm, shared: this.shared, everyone: everyone}))\n\t\t\t.appendTo(d.body);\n\n\t\tif(frappe.model.can_share(null, this.frm)) {\n\t\t\tthis.make_user_input();\n\t\t\tthis.add_share_button();\n\t\t\tthis.set_edit_share_events();\n\t\t} else {\n\t\t\t// if cannot share, disable sharing settings.\n\t\t\t$(d.body).find(\".edit-share\").prop(\"disabled\", true);\n\t\t}\n\t},\n\tmake_user_input: function() {\n\t\t// make add-user input\n\t\tthis.dialog.share_with = frappe.ui.form.make_control({\n\t\t\tparent: $(this.dialog.body).find(\".input-wrapper-add-share\"),\n\t\t\tdf: {\n\t\t\t\tfieldtype: \"Link\",\n\t\t\t\tlabel: __(\"Share With\"),\n\t\t\t\tfieldname: \"share_with\",\n\t\t\t\toptions: \"User\",\n\t\t\t\tfilters: {\n\t\t\t\t\t\"user_type\": \"System User\",\n\t\t\t\t\t\"name\": [\"!=\", frappe.session.user]\n\t\t\t\t}\n\t\t\t},\n\t\t\tonly_input: true,\n\t\t\trender_input: true\n\t\t});\n\n\t},\n\tadd_share_button: function() {\n\t\tvar me = this, d = this.dialog;\n\t\t$(d.body).find(\".btn-add-share\").on(\"click\", function() {\n\t\t\tvar user = d.share_with.get_value();\n\t\t\tif(!user) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"frappe.share.add\",\n\t\t\t\targs: {\n\t\t\t\t\tdoctype: me.frm.doctype,\n\t\t\t\t\tname: me.frm.doc.name,\n\t\t\t\t\tuser: user,\n\t\t\t\t\tread: $(d.body).find(\".add-share-read\").prop(\"checked\") ? 1 : 0,\n\t\t\t\t\twrite: $(d.body).find(\".add-share-write\").prop(\"checked\") ? 1 : 0,\n\t\t\t\t\tshare: $(d.body).find(\".add-share-share\").prop(\"checked\") ? 1 : 0,\n\t\t\t\t\tnotify: $(d.body).find(\".add-share-notify\").prop(\"checked\") ? 1 : 0\n\t\t\t\t},\n\t\t\t\tbtn: this,\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\t$.each(me.shared, function(i, s) {\n\t\t\t\t\t\tif(s && s.user===r.message.user) {\n\t\t\t\t\t\t\t// re-adding / remove the old share rule.\n\t\t\t\t\t\t\tdelete me.shared[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tme.dirty = true;\n\t\t\t\t\tme.shared.push(r.message);\n\t\t\t\t\tme.render_shared();\n\t\t\t\t\tme.frm.shared.refresh();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tset_edit_share_events: function() {\n\t\tvar me = this, d = this.dialog;\n\t\t$(d.body).find(\".edit-share\").on(\"click\", function() {\n\t\t\tvar user = $(this).parents(\".shared-user:first\").attr(\"data-user\") || \"\",\n\t\t\t\tvalue = $(this).prop(\"checked\") ? 1 : 0,\n\t\t\t\tproperty = $(this).attr(\"name\"),\n\t\t\t\teveryone = cint($(this).parents(\".shared-user:first\").attr(\"data-everyone\"));\n\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"frappe.share.set_permission\",\n\t\t\t\targs: {\n\t\t\t\t\tdoctype: me.frm.doctype,\n\t\t\t\t\tname: me.frm.doc.name,\n\t\t\t\t\tuser: user,\n\t\t\t\t\tpermission_to: property,\n\t\t\t\t\tvalue: value,\n\t\t\t\t\teveryone: everyone\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tvar found = null;\n\t\t\t\t\t$.each(me.shared, function(i, s) {\n\t\t\t\t\t\t// update shared object\n\t\t\t\t\t\tif(s && (s.user===user || (everyone && s.everyone===1))) {\n\t\t\t\t\t\t\tif(!r.message) {\n\t\t\t\t\t\t\t\tdelete me.shared[i];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tme.shared[i] = $.extend(s, r.message);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tif (!found) {\n\t\t\t\t\t\tme.shared.push(r.message);\n\t\t\t\t\t}\n\n\t\t\t\t\tme.dirty = true;\n\t\t\t\t\tme.render_shared();\n\t\t\t\t\tme.frm.shared.refresh();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n});\n","frappe.provide(\"frappe.ui.form\");\n\nfrappe.ui.form.Viewers = Class.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\t},\n\tget_viewers: function() {\n\t\tlet docinfo = this.frm.get_docinfo();\n\t\tif (docinfo) {\n\t\t\treturn docinfo.viewers || {};\n\t\t} else {\n\t\t\treturn {};\n\t\t}\n\t},\n\trefresh: function(data_updated) {\n\t\tthis.parent.empty();\n\n\t\tvar viewers = this.get_viewers();\n\n\t\tvar users = [];\n\t\tvar new_users = [];\n\t\tfor (var i=0, l=(viewers.current || []).length; i < l; i++) {\n\t\t\tvar username = viewers.current[i];\n\t\t\tif (username===frappe.session.user) {\n\t\t\t\t// current user\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar user_info = frappe.user_info(username);\n\t\t\tusers.push({\n\t\t\t\timage: user_info.image,\n\t\t\t\tfullname: user_info.fullname,\n\t\t\t\tabbr: user_info.abbr,\n\t\t\t\tcolor: user_info.color,\n\t\t\t\ttitle: __(\"{0} is currently viewing this document\", [user_info.fullname])\n\t\t\t});\n\n\t\t\tif (viewers.new.indexOf(username)!==-1) {\n\t\t\t\tnew_users.push(user_info.fullname);\n\t\t\t}\n\t\t}\n\n\t\tif (users.length) {\n\t\t\tthis.parent.parent().removeClass(\"hidden\");\n\t\t\tthis.parent.append(frappe.render_template(\"users_in_sidebar\", {\"users\": users}));\n\t\t} else {\n\t\t\tthis.parent.parent().addClass(\"hidden\");\n\t\t}\n\n\t\tif (data_updated && new_users.length) {\n\t\t\t// new user viewing this document, who wasn't viewing in the past\n\t\t\tif (new_users.length===1) {\n\t\t\t\tfrappe.show_alert(__(\"{0} is currently viewing this document\", [new_users[0]]));\n\t\t\t} else {\n\t\t\t\tfrappe.show_alert(__(\"{0} are currently viewing this document\", [frappe.utils.comma_and(new_users)]));\n\t\t\t}\n\n\t\t}\n\t}\n});\n\nfrappe.ui.form.set_viewers = function(data) {\n\tvar doctype = data.doctype;\n\tvar docname = data.docname;\n\tvar docinfo = frappe.model.get_docinfo(doctype, docname);\n\tvar past_viewers = ((docinfo && docinfo.viewers) || {}).past || [];\n\tvar viewers = data.viewers || [];\n\n\tvar new_viewers = viewers.filter(viewer => !past_viewers.includes(viewer));\n\n\tfrappe.model.set_docinfo(doctype, docname, \"viewers\", {\n\t\tpast: past_viewers.concat(new_viewers),\n\t\tnew: new_viewers,\n\t\tcurrent: viewers\n\t});\n\n\tif (cur_frm && cur_frm.doc && cur_frm.doc.doctype===doctype && cur_frm.doc.name==docname) {\n\t\tcur_frm.viewers.refresh(true);\n\t}\n}\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.ui.form.Footer = Class.extend({\n\tinit: function(opts) {\n\t\tvar me = this;\n\t\t$.extend(this, opts);\n\t\tthis.make();\n\t\tthis.make_comments();\n\t\t// render-complete\n\t\t$(this.frm.wrapper).on(\"render_complete\", function() {\n\t\t\tme.refresh();\n\t\t});\n\t},\n\tmake: function() {\n\t\tvar me = this;\n\t\tthis.wrapper = $(frappe.render_template(\"form_footer\", {}))\n\t\t\t.appendTo(this.parent);\n\t\tthis.wrapper.find(\".btn-save\").click(function() {\n\t\t\tme.frm.save('Save', null, this);\n\t\t})\n\n\t},\n\tmake_comments: function() {\n\t\tthis.frm.timeline = new frappe.ui.form.Timeline({\n\t\t\tparent: this.wrapper.find(\".form-comments\"),\n\t\t\tfrm: this.frm\n\t\t});\n\t},\n\trefresh: function() {\n\t\tif(this.frm.doc.__islocal) {\n\t\t\tthis.parent.addClass(\"hide\");\n\t\t} else {\n\t\t\tthis.parent.removeClass(\"hide\");\n\t\t\tthis.frm.timeline.refresh();\n\t\t}\n\t},\n});\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide(\"frappe.ui.form\");\n\nfrappe.ui.form.Attachments = Class.extend({\n\tinit: function(opts) {\n\t\t$.extend(this, opts);\n\t\tthis.make();\n\t},\n\tmake: function() {\n\t\tvar me = this;\n\t\tthis.parent.find(\".add-attachment\").click(function() {\n\t\t\tme.new_attachment();\n\t\t});\n\t\tthis.add_attachment_wrapper = this.parent.find(\".add_attachment\").parent();\n\t\tthis.attachments_label = this.parent.find(\".attachments-label\");\n\t},\n\tmax_reached: function() {\n\t\t// no of attachments\n\t\tvar n = Object.keys(this.get_attachments()).length;\n\n\t\t// button if the number of attachments is less than max\n\t\tif(n < this.frm.meta.max_attachments || !this.frm.meta.max_attachments) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\trefresh: function() {\n\t\tvar me = this;\n\n\t\tif(this.frm.doc.__islocal) {\n\t\t\tthis.parent.toggle(false);\n\t\t\treturn;\n\t\t}\n\t\tthis.parent.toggle(true);\n\t\tthis.parent.find(\".attachment-row\").remove();\n\n\t\tvar max_reached = this.max_reached();\n\t\tthis.add_attachment_wrapper.toggleClass(\"hide\", !max_reached);\n\n\t\t// add attachment objects\n\t\tvar attachments = this.get_attachments();\n\t\tif(attachments.length) {\n\t\t\tattachments.forEach(function(attachment) {\n\t\t\t\tme.add_attachment(attachment)\n\t\t\t});\n\t\t} else {\n\t\t\tthis.attachments_label.removeClass(\"has-attachments\");\n\t\t}\n\n\t},\n\tget_attachments: function() {\n\t\treturn this.frm.get_docinfo().attachments;\n\t},\n\tadd_attachment: function(attachment) {\n\t\tvar file_name = attachment.file_name;\n\t\tvar file_url = this.get_file_url(attachment);\n\t\tvar fileid = attachment.name;\n\t\tif (!file_name) {\n\t\t\tfile_name = file_url;\n\t\t}\n\n\t\tvar me = this;\n\n\t\tvar $attach = $(frappe.render_template(\"attachment\", { \n\t\t\t\"file_path\": \"/desk#Form/File/\" + fileid,\n\t\t\t\"icon\": attachment.is_private ? \"fa fa-lock\" : \"fa fa-unlock-alt\",\n\t\t\t\"file_name\": file_name,\n\t\t\t\"file_url\": frappe.urllib.get_full_url(file_url)\n\t\t})).insertAfter(this.attachments_label.addClass(\"has-attachments\"));\t\t\t\n\n\t\tvar $close =\n\t\t\t$attach.find(\".close\")\n\t\t\t.data(\"fileid\", fileid)\n\t\t\t.click(function() {\n\t\t\t\tvar remove_btn = this;\n\t\t\t\tfrappe.confirm(__(\"Are you sure you want to delete the attachment?\"),\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\tme.remove_attachment($(remove_btn).data(\"fileid\"))\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn false\n\t\t\t});\n\n\t\tif(!frappe.model.can_write(this.frm.doctype, this.frm.name)) {\n\t\t\t$close.remove();\n\t\t}\n\t},\n\tget_file_url: function(attachment) {\n\t\tvar file_url = attachment.file_url;\n\t\tif (!file_url) {\n\t\t\tif (attachment.file_name.indexOf('files/') === 0) {\n\t\t\t\tfile_url = '/' + attachment.file_name;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfile_url = '/files/' + attachment.file_name;\n\t\t\t}\n\t\t}\n\t\t// hash is not escaped, https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURI\n\t\treturn encodeURI(file_url).replace(/#/g, '%23');\n\t},\n\tget_file_id_from_file_url: function(file_url) {\n\t\tvar fid;\n\t\t$.each(this.get_attachments(), function(i, attachment) {\n\t\t\tif (attachment.file_url === file_url) {\n\t\t\t\tfid = attachment.name;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\treturn fid;\n\t},\n\tremove_attachment_by_filename: function(filename, callback) {\n\t\tthis.remove_attachment(this.get_file_id_from_file_url(filename), callback);\n\t},\n\tremove_attachment: function(fileid, callback) {\n\t\tif (!fileid) {\n\t\t\tif (callback) callback();\n\t\t\treturn;\n\t\t}\n\n\t\tvar me = this;\n\t\treturn frappe.call({\n\t\t\tmethod: 'frappe.desk.form.utils.remove_attach',\n\t\t\targs: {\n\t\t\t\tfid: fileid,\n\t\t\t\tdt: me.frm.doctype,\n\t\t\t\tdn: me.frm.docname\n\t\t\t},\n\t\t\tcallback: function(r,rt) {\n\t\t\t\tif(r.exc) {\n\t\t\t\t\tif(!r._server_messages)\n\t\t\t\t\t\tfrappe.msgprint(__(\"There were errors\"));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tme.remove_fileid(fileid);\n\t\t\t\tme.frm.get_docinfo().communications.push(r.message);\n\t\t\t\tme.frm.timeline && me.frm.timeline.refresh();\n\t\t\t\tif (callback) callback();\n\t\t\t}\n\t\t});\n\t},\n\tnew_attachment: function(fieldname) {\n\t\tvar me = this;\n\t\tif (this.dialog) {\n\t\t\t// remove upload dialog\n\t\t\tthis.dialog.$wrapper.remove();\n\t\t}\n\n\t\t// make upload dialog\n\t\tthis.dialog = frappe.ui.get_upload_dialog({\n\t\t\t\"args\": me.get_args(),\n\t\t\t\"callback\": function(attachment, r) { me.attachment_uploaded(attachment, r) },\n\t\t\t\"max_width\": me.frm.cscript ? me.frm.cscript.attachment_max_width : null,\n\t\t\t\"max_height\": me.frm.cscript ? me.frm.cscript.attachment_max_height : null\n\t\t});\n\t},\n\tget_args: function() {\n\t\treturn {\n\t\t\tfrom_form: 1,\n\t\t\tdoctype: this.frm.doctype,\n\t\t\tdocname: this.frm.docname,\n\t\t}\n\t},\n\tattachment_uploaded:  function(attachment, r) {\n\t\tthis.dialog && this.dialog.hide();\n\t\tthis.update_attachment(attachment, r.message.comment);\n\n\t\tif(this.fieldname) {\n\t\t\tthis.frm.set_value(this.fieldname, attachment.file_url);\n\t\t}\n\t},\n\tupdate_attachment: function(attachment, comment) {\n\t\tif(attachment.name) {\n\t\t\tthis.add_to_attachments(attachment);\n\t\t\tthis.refresh();\n\t\t\tif(comment) {\n\t\t\t\tthis.frm.get_docinfo().communications.push(comment);\n\t\t\t\tthis.frm.timeline.refresh();\n\t\t\t}\n\t\t}\n\t},\n\tadd_to_attachments: function (attachment) {\n\t\tvar form_attachments = this.get_attachments();\n\t\tfor(var i in form_attachments) {\n\t\t\t// prevent duplicate\n\t\t\tif(form_attachments[i][\"name\"] === attachment.name) return;\n\t\t}\n\t\tform_attachments.push(attachment);\n\t},\n\tremove_fileid: function(fileid) {\n\t\tvar attachments = this.get_attachments();\n\t\tvar new_attachments = [];\n\t\t$.each(attachments, function(i, attachment) {\n\t\t\tif(attachment.name!=fileid) {\n\t\t\t\tnew_attachments.push(attachment);\n\t\t\t}\n\t\t});\n\t\tthis.frm.get_docinfo().attachments = new_attachments;\n\t\tthis.refresh();\n\t}\n});\n\nfrappe.ui.get_upload_dialog = function(opts){\n\tvar dialog = new frappe.ui.Dialog({\n\t\ttitle: __('Upload Attachment'),\n\t\tno_focus: true,\n\t\tfields: [\n\t\t\t{\n\t\t\t\t\"fieldtype\": \"Section Break\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"fieldtype\": \"Link\" ,\n\t\t\t\t\"fieldname\": \"file\" ,\n\t\t\t\t\"label\": __(\"Select uploaded file\"),\n\t\t\t\t\"options\": \"File\",\n\t\t\t\tonchange: function() {\n\t\t\t\t\tfrappe.call({\n\t\t\t\t\t\t'method': 'frappe.client.get_value',\n\t\t\t\t\t\t'args': {\n\t\t\t\t\t\t\t'doctype': 'File',\n\t\t\t\t\t\t\t'fieldname': ['file_url','file_name','is_private'],\n\t\t\t\t\t\t\t'filters': {\n\t\t\t\t\t\t\t\t'name': dialog.get_value(\"file\")\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcallback: function(r){\n\t\t\t\t\t\t\tif(!r.message) {\n\t\t\t\t\t\t\t\tdialog.$wrapper.find('[name=\"file_url\"]').val(\"\");\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdialog.$wrapper.find('[name=\"file_url\"]').val(r.message.file_url);\n\t\t\t\t\t\t\tdialog.$wrapper.find('.private-file input').prop('checked', r.message.is_private);\n\t\t\t\t\t\t\topts.args.filename = r.message.file_name;\n\t\t\t\t\t\t\topts.args.is_private = r.message.is_private;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"hidden\": !opts.args.doctype || !frappe.boot.gsuite_enabled,\n\t\t\t\t\"fieldtype\": \"Section Break\",\n\t\t\t\t\"label\": __(\"GSuite Document\"),\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"fieldtype\": \"Link\" ,\n\t\t\t\t\"fieldname\": \"gs_template\" ,\n\t\t\t\t\"label\": __(\"Select template\"),\n\t\t\t\t\"options\": \"GSuite Templates\",\n\t\t\t\t\"reqd\" : false,\n\t\t\t\t\"filters\": {\n\t\t\t\t\t'related_doctype': opts.args.doctype\n\t\t\t\t},\n\t\t\t\tonchange: function(){\n\t\t\t\t\topts.args.gs_template = this.get_value();\n\t\t\t\t}\n\t\t\t},\n\t\t],\n\t});\n\n\n\n\n\tvar btn = dialog.set_primary_action(__(\"Attach\"));\n\tbtn.removeClass(\"btn-primary\").addClass(\"btn-default\");\n\n\tdialog.show();\n\tvar upload_area = $('<div></div>').prependTo(dialog.body);\n\n\t\n\n\tfrappe.upload.make({\n\t\tparent: upload_area,\n\t\targs: opts.args,\n\t\tcallback: function(attachment, r) {\n\t\t\tdialog.hide();\n\t\t\tif(opts.callback){\n\t\t\t\topts.callback(attachment, r);\n\t\t\t}\n\t\t},\n\t\ton_select: function() {\n\t\t\tbtn.removeClass(\"btn-default\").addClass(\"btn-primary\");\n\t\t},\n\t\tonerror: function() {\n\t\t\tdialog.hide();\n\t\t},\n\t\tbtn: btn,\n\t\tmax_width: opts.max_width,\n\t\tmax_height: opts.max_height,\n\t});\n\n\treturn dialog;\n}\n","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide('frappe.timeline');\nfrappe.separator_element = '<div>---</div>';\n\nfrappe.ui.form.Timeline = class Timeline {\n\tconstructor(opts) {\n\t\t$.extend(this, opts);\n\t\tthis.make();\n\t}\n\n\tmake() {\n\t\tvar me = this;\n\t\tthis.wrapper = $(frappe.render_template(\"timeline\",\n\t\t\t{doctype: me.frm.doctype, allow_events_in_timeline: me.frm.meta.allow_events_in_timeline})).appendTo(me.parent);\n\n\t\tthis.list = this.wrapper.find(\".timeline-items\");\n\n\t\tthis.comment_area = frappe.ui.form.make_control({\n\t\t\tparent: this.wrapper.find('.timeline-head'),\n\t\t\tdf: {\n\t\t\t\tfieldtype: 'Comment',\n\t\t\t\tfieldname: 'comment',\n\t\t\t\tlabel: 'Comment'\n\t\t\t},\n\t\t\tmentions: this.get_names_for_mentions(),\n\t\t\trender_input: true,\n\t\t\tonly_input: true,\n\t\t\ton_submit: (val) => {\n\t\t\t\tval && this.insert_comment(\"Comment\", val, this.comment_area.button);\n\t\t\t}\n\t\t});\n\n\t\tthis.setup_email_button();\n\t\tthis.setup_interaction_button();\n\n\t\tthis.list.on(\"click\", \".toggle-blockquote\", function() {\n\t\t\t$(this).parent().siblings(\"blockquote\").toggleClass(\"hidden\");\n\t\t});\n\n\t\tthis.setup_comment_like();\n\n\t\tthis.list.on(\"click\", \".btn-more\", function() {\n\t\t\tvar communications = me.get_communications();\n\t\t\tfrappe.call({\n\t\t\t\tbtn: this,\n\t\t\t\tmethod: \"frappe.desk.form.load.get_communications\",\n\t\t\t\targs: {\n\t\t\t\t\tdoctype: me.frm.doc.doctype,\n\t\t\t\t\tname: me.frm.doc.name,\n\t\t\t\t\tstart: communications.length\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif (!r.exc) {\n\t\t\t\t\t\tif (r.message) {\n\t\t\t\t\t\t\tvar new_communications = r.message;\n\t\t\t\t\t\t\tvar communications = me.get_communications().concat(new_communications);\n\t\t\t\t\t\t\tfrappe.model.set_docinfo(me.frm.doc.doctype, me.frm.doc.name, \"communications\", communications);\n\n\t\t\t\t\t\t\tif (new_communications.length < 20) {\n\t\t\t\t\t\t\t\tme.more = false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tme.more = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tme.refresh();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t}\n\n\tsetup_email_button() {\n\t\tvar me = this;\n\t\tvar selector = this.frm.doctype === \"Communication\"? \".btn-reply-email\": \".btn-new-email\";\n\t\tthis.email_button = this.wrapper.find(selector)\n\t\t\t.on(\"click\", function() {\n\t\t\t\tconst $btn = $(this);\n\t\t\t\tlet is_a_reply = true;\n\t\t\t\tif ($btn.is('.btn-new-email')) {\n\t\t\t\t\tis_a_reply = false;\n\t\t\t\t}\n\n\t\t\t\tvar args = {\n\t\t\t\t\tdoc: me.frm.doc,\n\t\t\t\t\tfrm: me.frm,\n\t\t\t\t\trecipients: me.get_recipient(),\n\t\t\t\t\tis_a_reply\n\t\t\t\t}\n\n\t\t\t\tif(me.frm.doctype === \"Communication\") {\n\t\t\t\t\t$.extend(args, {\n\t\t\t\t\t\ttxt: \"\",\n\t\t\t\t\t\tlast_email: me.frm.doc,\n\t\t\t\t\t\trecipients: me.frm.doc.sender,\n\t\t\t\t\t\tsubject: __(\"Re: {0}\", [me.frm.doc.subject]),\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconst comment_value = frappe.markdown(me.comment_area.get_value());\n\t\t\t\t\t$.extend(args, {\n\t\t\t\t\t\ttxt: strip_html(comment_value) ? comment_value : ''\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tnew frappe.views.CommunicationComposer(args)\n\t\t\t});\n\t}\n\n\tsetup_interaction_button() {\n\t\tvar me = this;\n\t\tvar selector = \".btn-new-interaction\";\n\t\tthis.activity_button = this.wrapper.find(selector)\n\t\t\t.on(\"click\", function() {\n\t\t\t\tvar args = {\n\t\t\t\t\tdoc: me.frm.doc,\n\t\t\t\t\tfrm: me.frm,\n\t\t\t\t\trecipients: me.get_recipient()\n\t\t\t\t}\n\t\t\t\t$.extend(args, {\n\t\t\t\t\ttxt: frappe.markdown(me.comment_area.get_value())\n\t\t\t\t});\n\t\t\t\tnew frappe.views.InteractionComposer(args);\n\t\t\t});\n\t}\n\n\tsetup_editing_area() {\n\t\tthis.$editing_area = $('<div class=\"timeline-editing-area\">');\n\n\t\tthis.editing_area = new frappe.ui.CommentArea({\n\t\t\tparent: this.$editing_area,\n\t\t\tmentions: this.get_names_for_mentions(),\n\t\t\tno_wrapper: true\n\t\t});\n\n\t\tthis.editing_area.destroy();\n\t}\n\n\trefresh(scroll_to_end) {\n\t\tvar me = this;\n\t\tthis.last_type = \"Comment\";\n\n\t\tif(this.frm.doc.__islocal) {\n\t\t\tthis.wrapper.toggle(false);\n\t\t\treturn;\n\t\t}\n\t\tthis.wrapper.toggle(true);\n\t\tthis.list.empty();\n\t\tthis.comment_area.set_value('');\n\t\tlet communications = this.get_communications(true);\n\t\tvar views = this.get_view_logs();\n\n\t\tvar timeline = communications.concat(views);\n\t\ttimeline\n\t\t\t.filter(a => a.content)\n\t\t\t.sort((b, c) => me.compare_dates(b, c))\n\t\t\t.forEach(d => {\n\t\t\t\td.frm = me.frm;\n\t\t\t\tme.render_timeline_item(d);\n\t\t\t});\n\n\n\n\t\t// more btn\n\t\tif (this.more===undefined && timeline.length===20) {\n\t\t\tthis.more = true;\n\t\t}\n\n\t\tif (this.more) {\n\t\t\t$('<div class=\"timeline-item\">\\\n\t\t\t\t<button class=\"btn btn-default btn-xs btn-more\">More</button>\\\n\t\t\t</div>').appendTo(me.list);\n\t\t}\n\n\t\t// created\n\t\tme.render_timeline_item({\n\t\t\tcontent: __(\"created\"),\n\t\t\tcomment_type: \"Created\",\n\t\t\tcommunication_type: \"Comment\",\n\t\t\tsender: this.frm.doc.owner,\n\t\t\tcommunication_date: this.frm.doc.creation,\n\t\t\tcreation: this.frm.doc.creation,\n\t\t\tfrm: this.frm\n\t\t});\n\n\t\tthis.wrapper.find(\".is-email\").prop(\"checked\", this.last_type===\"Email\").change();\n\n\t\tthis.frm.sidebar.refresh_comments();\n\n\t\tthis.frm.trigger('timeline_refresh');\n\t}\n\n\tcompare_dates(b, c) {\n\t\tlet b_date = b.communication_date ? b.communication_date : b.creation;\n\t\tlet c_date = c.communication_date ? c.communication_date : c.creation;\n\t\tlet comparison = new Date(b_date) > new Date(c_date) ? -1 : 1;\n\t\treturn comparison;\n\t}\n\n\tmake_editing_area(container) {\n\t\treturn frappe.ui.form.make_control({\n\t\t\tparent: container,\n\t\t\tdf: {\n\t\t\t\tfieldtype: 'Comment',\n\t\t\t\tfieldname: 'comment',\n\t\t\t\tlabel: 'Comment'\n\t\t\t},\n\t\t\tmentions: this.get_names_for_mentions(),\n\t\t\trender_input: true,\n\t\t\tonly_input: true,\n\t\t\tno_wrapper: true\n\t\t});\n\t}\n\n\trender_timeline_item(c) {\n\t\tvar me = this;\n\t\tthis.prepare_timeline_item(c);\n\t\tvar $timeline_item = $(frappe.render_template(\"timeline_item\", {data:c, frm:this.frm}))\n\t\t\t.appendTo(me.list)\n\t\t\t.on(\"click\", \".delete-comment\", function() {\n\t\t\t\tvar name = $timeline_item.data('name');\n\t\t\t\tme.delete_comment(name);\n\t\t\t\treturn false;\n\t\t\t})\n\t\t\t.on('click', '.edit-comment', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\tvar name = $timeline_item.data('name');\n\n\t\t\t\tif($timeline_item.hasClass('is-editing')) {\n\t\t\t\t\tme.current_editing_area.submit();\n\t\t\t\t} else {\n\t\t\t\t\tconst $edit_btn = $(this);\n\t\t\t\t\tconst $timeline_content = $timeline_item.find('.timeline-item-content');\n\t\t\t\t\tconst $timeline_edit = $timeline_item.find('.timeline-item-edit');\n\t\t\t\t\tconst content = $timeline_content.html();\n\n\t\t\t\t\t// update state\n\t\t\t\t\t$edit_btn\n\t\t\t\t\t\t.text(__(\"Save\"))\n\t\t\t\t\t\t.find('i')\n\t\t\t\t\t\t.removeClass('octicon-pencil')\n\t\t\t\t\t\t.addClass('octicon-check');\n\t\t\t\t\t$timeline_content.hide();\n\t\t\t\t\t$timeline_item.addClass('is-editing');\n\n\t\t\t\t\t// initialize editing area\n\t\t\t\t\tme.current_editing_area = me.make_editing_area($timeline_edit);\n\t\t\t\t\tme.current_editing_area.set_value(content);\n\n\t\t\t\t\t// submit handler\n\t\t\t\t\tme.current_editing_area.on_submit = (value) => {\n\t\t\t\t\t\t$timeline_edit.empty();\n\t\t\t\t\t\t$timeline_content.show();\n\n\t\t\t\t\t\t// set content to new val so that on save and refresh the new content is shown\n\t\t\t\t\t\tc.content = value;\n\t\t\t\t\t\tfrappe.timeline.update_communication(c);\n\t\t\t\t\t\tme.update_comment(name, value);\n\t\t\t\t\t\t// all changes to the timeline_item for editing are reset after calling refresh\n\t\t\t\t\t\tme.refresh();\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t});\n\n\n\t\tif(c.communication_type==\"Communication\" && c.communication_medium===\"Email\") {\n\t\t\tthis.last_type = c.communication_medium;\n\t\t\tthis.add_reply_btn_event($timeline_item, c);\n\t\t}\n\n\t}\n\n\tadd_reply_btn_event($timeline_item, c) {\n\t\tvar me = this;\n\t\t$timeline_item.find(\".reply-link\").on(\"click\", function() {\n\t\t\tvar name = $(this).attr(\"data-name\");\n\t\t\tvar last_email = null;\n\n\t\t\t// find the email tor reply to\n\t\t\tme.get_communications().forEach(function(c) {\n\t\t\t\tif(c.name==name) {\n\t\t\t\t\tlast_email = c;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// make the composer\n\t\t\tnew frappe.views.CommunicationComposer({\n\t\t\t\tdoc: me.frm.doc,\n\t\t\t\ttxt: \"\",\n\t\t\t\ttitle: __('Reply'),\n\t\t\t\tfrm: me.frm,\n\t\t\t\tlast_email: last_email,\n\t\t\t\tis_a_reply: true\n\t\t\t});\n\t\t});\n\t}\n\n\tprepare_timeline_item(c) {\n\t\tif(!c.sender) c.sender = c.owner;\n\n\t\tif(c.sender && c.sender.indexOf(\"<\")!==-1) {\n\t\t\tc.sender = c.sender.split(\"<\")[1].split(\">\")[0];\n\t\t}\n\n\t\tc.user_info = frappe.user_info(c.sender);\n\n\t\tc[\"delete\"] = \"\";\n\t\tc[\"edit\"] = \"\";\n\t\tif(c.communication_type==\"Comment\" && (c.comment_type || \"Comment\") === \"Comment\") {\n\t\t\tif(frappe.model.can_delete(\"Communication\")) {\n\t\t\t\tc[\"delete\"] = '<a class=\"close delete-comment\" title=\"Delete\"  href=\"#\"><i class=\"octicon octicon-x\"></i></a>';\n\t\t\t}\n\n\t\t\tif(frappe.user.name == c.sender || (frappe.user.name == 'Administrator')) {\n\t\t\t\tc[\"edit\"] = '<a class=\"edit-comment text-muted\" title=\"Edit\" href=\"#\">Edit</a>';\n\t\t\t}\n\t\t}\n\t\tlet communication_date = c.communication_date || c.creation;\n\t\tc.comment_on_small = comment_when(communication_date, true);\n\t\tc.comment_on = comment_when(communication_date);\n\t\tc.futur_date = communication_date > frappe.datetime.now_datetime() ? true : false;\n\t\tif(!c.fullname) {\n\t\t\tc.fullname = c.sender_full_name || frappe.user.full_name(c.sender);\n\t\t}\n\n\t\tif(c.attachments && typeof c.attachments===\"string\")\n\t\t\tc.attachments = JSON.parse(c.attachments);\n\n\t\tif(c.communication_type==\"Comment\" && !c.comment_type) {\n\t\t\tc.comment_type = \"Comment\";\n\t\t}\n\n\t\tthis.set_icon_and_color(c);\n\n\t\t// label view\n\t\tif(c.comment_type===\"Workflow\" || c.comment_type===\"Label\") {\n\t\t\tc.comment_html = repl('<span class=\"label label-%(style)s\">%(text)s</span>', {\n\t\t\t\tstyle: frappe.utils.guess_style(c.content),\n\t\t\t\ttext: __(c.content)\n\t\t\t});\n\t\t} else {\n\t\t\tif(c.communication_type==\"Communication\" && c.communication_medium==\"Email\") {\n\t\t\t\tc.content = c.content.split(frappe.separator_element)[0];\n\t\t\t\tc.content = frappe.utils.strip_original_content(c.content);\n\n\t\t\t\tc.original_content = c.content;\n\t\t\t\tc.content = frappe.utils.toggle_blockquote(c.content);\n\t\t\t} else if (c.communication_type===\"Feedback\") {\n\t\t\t\tc.content = frappe.utils.strip_original_content(c.content);\n\n\t\t\t\tc.original_content = c.content;\n\t\t\t\tc.content = frappe.utils.toggle_blockquote(c.content);\n\t\t\t}\n\t\t\tif(!frappe.utils.is_html(c.content)) {\n\t\t\t\tc.content_html = frappe.markdown(__(c.content));\n\t\t\t} else {\n\t\t\t\tc.content_html = c.content;\n\t\t\t\tc.content_html = frappe.utils.strip_whitespace(c.content_html);\n\t\t\t\tc.content_html = c.content_html.replace(/&lt;/g,\"<\").replace(/&gt;/g,\">\");\n\t\t\t}\n\n\t\t\t// bold @mentions\n\t\t\tif(c.comment_type===\"Comment\" &&\n\t\t\t\t// avoid adding <b> tag a 2nd time\n\t\t\t\t!c.content_html.match(/(^|\\W)<b>(@[^\\s]+)<\\/b>/)\n\t\t\t) {\n\t\t\t\t/*\n\t\t\t\t\tReplace the email ids by only displaying the string which\n\t\t\t\t\toccurs before the second `@` to enhance the mentions.\n\t\t\t\t\tEg.\n\t\t\t\t\t@abc@a-example.com will be converted to\n\t\t\t\t\t@abc with the below line of code.\n\t\t\t\t*/\n\n\t\t\t\tc.content_html = c.content_html.replace(/(<[a][^>]*>)/g, \"\");\n\t\t\t\t// bold the @mentions\n\t\t\t\tc.content_html = c.content_html.replace(/(@[^\\s@]*)@[^\\s@|<]*/g, \"<b>$1</b>\");\n\t\t\t}\n\n\t\t\tif (this.is_communication_or_comment(c)) {\n\t\t\t\tc.user_content = true;\n\t\t\t\tif (!$.isArray(c._liked_by)) {\n\t\t\t\t\tc._liked_by = JSON.parse(c._liked_by || \"[]\");\n\t\t\t\t}\n\n\t\t\t\tc.liked_by_user = c._liked_by.indexOf(frappe.session.user)!==-1;\n\t\t\t}\n\t\t}\n\n\t\t// basic level of XSS protection\n\t\tc.content_html = frappe.dom.remove_script_and_style(c.content_html);\n\n\t\t// subject\n\t\tc.show_subject = false;\n\t\tif(c.subject && c.communication_type===\"Communication\") {\n\t\t\tif(this.frm.doc.subject && !this.frm.doc.subject.includes(c.subject)) {\n\t\t\t\tc.show_subject = true;\n\t\t\t} else if(this.frm.meta.title_field && this.frm.doc[this.frm.meta.title_field]\n\t\t\t\t&& !!this.frm.doc[this.frm.meta.title_field].includes(c.subject)) {\n\t\t\t\tc.show_subject = true;\n\t\t\t} else if(!this.frm.doc.name.includes(c.subject)) {\n\t\t\t\tc.show_subject = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tis_communication_or_comment(c) {\n\t\treturn c.communication_type===\"Communication\"\n\t\t|| c.communication_type===\"Feedback\"\n\t\t|| (c.communication_type===\"Comment\" && (c.comment_type===\"Comment\"||c.comment_type===\"Relinked\"));\n\t}\n\n\tset_icon_and_color(c) {\n\t\tif(c.communication_type == \"Feedback\"){\n\t\t\tc.icon = \"octicon octicon-comment-discussion\"\n\t\t\tc.rating_icons = frappe.render_template(\"rating_icons\", {rating: c.rating, show_label: true})\n\t\t\tc.color = \"#f39c12\"\n\t\t} else {\n\t\t\tc.icon = {\n\t\t\t\t\"Email\": \"octicon octicon-mail\",\n\t\t\t\t\"Chat\": \"octicon octicon-comment-discussion\",\n\t\t\t\t\"Phone\": \"octicon octicon-device-mobile\",\n\t\t\t\t\"SMS\": \"octicon octicon-comment\",\n\t\t\t\t\"Event\": \"fa fa-calendar\",\n\t\t\t\t\"Meeting\": \"octicon octicon-briefcase\",\n\t\t\t\t\"ToDo\": \"fa fa-check\",\n\t\t\t\t\"Created\": \"octicon octicon-plus\",\n\t\t\t\t\"Submitted\": \"octicon octicon-lock\",\n\t\t\t\t\"Cancelled\": \"octicon octicon-x\",\n\t\t\t\t\"Assigned\": \"octicon octicon-person\",\n\t\t\t\t\"Assignment Completed\": \"octicon octicon-check\",\n\t\t\t\t\"Comment\": \"octicon octicon-comment-discussion\",\n\t\t\t\t\"Workflow\": \"octicon octicon-git-branch\",\n\t\t\t\t\"Label\": \"octicon octicon-tag\",\n\t\t\t\t\"Attachment\": \"octicon octicon-cloud-upload\",\n\t\t\t\t\"Attachment Removed\": \"octicon octicon-trashcan\",\n\t\t\t\t\"Shared\": \"octicon octicon-eye\",\n\t\t\t\t\"Unshared\": \"octicon octicon-circle-slash\",\n\t\t\t\t\"Like\": \"octicon octicon-heart\",\n\t\t\t\t\"Edit\": \"octicon octicon-pencil\",\n\t\t\t\t\"Relinked\": \"octicon octicon-check\",\n\t\t\t\t\"Reply\": \"octicon octicon-mail-reply\"\n\t\t\t}[c.comment_type || c.communication_medium]\n\n\t\t\tc.color = {\n\t\t\t\t\"Email\": \"#3498db\",\n\t\t\t\t\"Chat\": \"#3498db\",\n\t\t\t\t\"Phone\": \"#3498db\",\n\t\t\t\t\"SMS\": \"#3498db\",\n\t\t\t\t\"Created\": \"#1abc9c\",\n\t\t\t\t\"Submitted\": \"#1abc9c\",\n\t\t\t\t\"Cancelled\": \"#c0392b\",\n\t\t\t\t\"Assigned\": \"#f39c12\",\n\t\t\t\t\"Assignment Completed\": \"#16a085\",\n\t\t\t\t\"Comment\": \"#f39c12\",\n\t\t\t\t\"Workflow\": \"#2c3e50\",\n\t\t\t\t\"Label\": \"#2c3e50\",\n\t\t\t\t\"Attachment\": \"#7f8c8d\",\n\t\t\t\t\"Attachment Removed\": \"#eee\",\n\t\t\t\t\"Relinked\": \"#16a085\",\n\t\t\t\t\"Reply\": \"#8d99a6\"\n\t\t\t}[c.comment_type || c.communication_medium];\n\n\t\t\tc.icon_fg = {\n\t\t\t\t\"Attachment Removed\": \"#333\",\n\t\t\t}[c.comment_type || c.communication_medium]\n\n\t\t}\n\t\tif(!c.icon_fg)\n\t\t\tc.icon_fg = \"#fff\";\n\t}\n\n\tget_communications(with_versions) {\n\t\tvar docinfo = this.frm.get_docinfo(),\n\t\t\tme = this,\n\t\t\tout = [].concat(docinfo.communications);\n\t\tif(with_versions) {\n\t\t\tthis.build_version_comments(docinfo, out);\n\t\t}\n\n\t\treturn out;\n\t}\n\n\tget_view_logs(){\n\t\tvar docinfo = this.frm.get_docinfo(),\n\t\t\tme = this,\n\t\t\tout = [];\n\t\tfor(let c of docinfo.views){\n\t\t\tc.content = `<a href=\"#Form/View Log/${c.name}\"> ${__(\"viewed\")}</a>`;\n\t\t\tc.comment_type = \"Info\";\n\t\t\tout.push(c);\n\t\t};\n\t\treturn out;\n\t}\n\n\tbuild_version_comments(docinfo, out) {\n\t\tvar me = this;\n\t\tdocinfo.versions.forEach(function(version) {\n\t\t\tif(!version.data) return;\n\t\t\tvar data = JSON.parse(version.data);\n\n\t\t\t// comment\n\t\t\tif(data.comment) {\n\t\t\t\tout.push(me.get_version_comment(version, data.comment, data.comment_type));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// value changed in parent\n\t\t\tif(data.changed && data.changed.length) {\n\t\t\t\tvar parts = [];\n\t\t\t\tdata.changed.every(function(p) {\n\t\t\t\t\tif(p[0]==='docstatus') {\n\t\t\t\t\t\tif(p[2]==1) {\n\t\t\t\t\t\t\tout.push(me.get_version_comment(version, __('submitted this document')));\n\t\t\t\t\t\t} else if (p[2]==2) {\n\t\t\t\t\t\t\tout.push(me.get_version_comment(version, __('cancelled this document')));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar df = frappe.meta.get_docfield(me.frm.doctype, p[0], me.frm.docname);\n\n\t\t\t\t\t\tif(df && !df.hidden) {\n\t\t\t\t\t\t\tvar field_display_status = frappe.perm.get_field_display_status(df, null,\n\t\t\t\t\t\t\t\tme.frm.perm);\n\t\t\t\t\t\t\tif(field_display_status === 'Read' || field_display_status === 'Write') {\n\t\t\t\t\t\t\t\tparts.push(__('{0} from {1} to {2}', [\n\t\t\t\t\t\t\t\t\t__(df.label),\n\t\t\t\t\t\t\t\t\t(frappe.ellipsis(p[1], 40) || '\"\"').bold(),\n\t\t\t\t\t\t\t\t\t(frappe.ellipsis(p[2], 40) || '\"\"').bold()\n\t\t\t\t\t\t\t\t]));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn parts.length < 3;\n\t\t\t\t});\n\t\t\t\tif(parts.length) {\n\t\t\t\t\tout.push(me.get_version_comment(version, __(\"changed value of {0}\", [parts.join(', ')])));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// value changed in table field\n\t\t\tif(data.row_changed && data.row_changed.length) {\n\t\t\t\tvar parts = [], count = 0;\n\t\t\t\tdata.row_changed.every(function(row) {\n\t\t\t\t\trow[3].every(function(p) {\n\t\t\t\t\t\tvar df = me.frm.fields_dict[row[0]] &&\n\t\t\t\t\t\t\tfrappe.meta.get_docfield(me.frm.fields_dict[row[0]].grid.doctype,\n\t\t\t\t\t\t\t\tp[0], me.frm.docname);\n\n\t\t\t\t\t\tif(df && !df.hidden) {\n\t\t\t\t\t\t\tvar field_display_status = frappe.perm.get_field_display_status(df,\n\t\t\t\t\t\t\t\tnull, me.frm.perm);\n\n\t\t\t\t\t\t\tif(field_display_status === 'Read' || field_display_status === 'Write') {\n\t\t\t\t\t\t\t\tparts.push(__('{0} from {1} to {2} in row #{3}', [\n\t\t\t\t\t\t\t\t\tfrappe.meta.get_label(me.frm.fields_dict[row[0]].grid.doctype,\n\t\t\t\t\t\t\t\t\t\tp[0]),\n\t\t\t\t\t\t\t\t\t(frappe.ellipsis(p[1], 40) || '\"\"').bold(),\n\t\t\t\t\t\t\t\t\t(frappe.ellipsis(p[2], 40) || '\"\"').bold(),\n\t\t\t\t\t\t\t\t\trow[1]\n\t\t\t\t\t\t\t\t]));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn parts.length < 3;\n\t\t\t\t\t});\n\t\t\t\t\treturn parts.length < 3;\n\t\t\t\t});\n\t\t\t\tif(parts.length) {\n\t\t\t\t\tout.push(me.get_version_comment(version, __(\"changed values for {0}\",\n\t\t\t\t\t\t[parts.join(', ')])));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// rows added / removed\n\t\t\t// __('added'), __('removed') # for translation, don't remove\n\t\t\t['added', 'removed'].forEach(function(key) {\n\t\t\t\tif(data[key] && data[key].length) {\n\t\t\t\t\tparts = (data[key] || []).map(function(p) {\n\t\t\t\t\t\tvar df = frappe.meta.get_docfield(me.frm.doctype, p[0], me.frm.docname);\n\t\t\t\t\t\tif(df && !df.hidden) {\n\t\t\t\t\t\t\tvar field_display_status = frappe.perm.get_field_display_status(df, null,\n\t\t\t\t\t\t\t\tme.frm.perm);\n\n\t\t\t\t\t\t\tif(field_display_status === 'Read' || field_display_status === 'Write') {\n\t\t\t\t\t\t\t\treturn frappe.meta.get_label(me.frm.doctype, p[0])\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tparts = parts.filter(function(p) { return p; });\n\t\t\t\t\tif(parts.length) {\n\t\t\t\t\t\tout.push(me.get_version_comment(version, __(\"{0} rows for {1}\",\n\t\t\t\t\t\t\t[__(key), parts.join(', ')])));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tget_version_comment(version, text, comment_type) {\n\t\tif(!comment_type) {\n\t\t\ttext = '<a href=\"#Form/Version/'+version.name+'\">' + text + '</a>';\n\t\t}\n\t\treturn {\n\t\t\tcomment_type: comment_type || 'Edit',\n\t\t\tcreation: version.creation,\n\t\t\towner: version.owner,\n\t\t\tversion_name: version.name,\n\t\t\tsender: version.owner,\n\t\t\tcomment_by: version.owner,\n\t\t\tcontent: text\n\t\t};\n\t}\n\n\tinsert_comment(comment_type, comment, btn) {\n\t\tvar me = this;\n\t\treturn frappe.call({\n\t\t\tmethod: \"frappe.desk.form.utils.add_comment\",\n\t\t\targs: {\n\t\t\t\tdoc:{\n\t\t\t\t\tdoctype: \"Communication\",\n\t\t\t\t\tcommunication_type: \"Comment\",\n\t\t\t\t\tcomment_type: comment_type || \"Comment\",\n\t\t\t\t\treference_doctype: this.frm.doctype,\n\t\t\t\t\treference_name: this.frm.docname,\n\t\t\t\t\tcontent: comment,\n\t\t\t\t\tsender: frappe.session.user\n\t\t\t\t}\n\t\t\t},\n\t\t\tbtn: btn,\n\t\t\tcallback: function(r) {\n\t\t\t\tif(!r.exc) {\n\t\t\t\t\tme.comment_area.set_value('');\n\t\t\t\t\tfrappe.utils.play_sound(\"click\");\n\n\t\t\t\t\tvar comment = r.message;\n\t\t\t\t\tvar comments = me.get_communications();\n\t\t\t\t\tvar comment_exists = false;\n\t\t\t\t\tfor (var i=0, l=comments.length; i<l; i++) {\n\t\t\t\t\t\tif (comments[i].name==comment.name) {\n\t\t\t\t\t\t\tcomment_exists = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (comment_exists) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tme.frm.get_docinfo().communications = comments.concat([r.message]);\n\t\t\t\t\tme.refresh(true);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t}\n\n\tdelete_comment(name) {\n\t\tvar me = this;\n\n\t\tfrappe.confirm(__('Delete comment?'), function() {\n\t\t\treturn frappe.call({\n\t\t\t\tmethod: \"frappe.client.delete\",\n\t\t\t\targs: {\n\t\t\t\t\tdoctype: \"Communication\",\n\t\t\t\t\tname: name\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tif(!r.exc) {\n\t\t\t\t\t\tfrappe.utils.play_sound(\"delete\");\n\n\t\t\t\t\t\tme.frm.get_docinfo().communications =\n\t\t\t\t\t\t\t$.map(me.frm.get_docinfo().communications,\n\t\t\t\t\t\t\t\tfunction(v) {\n\t\t\t\t\t\t\t\t\tif(v.name==name) return null;\n\t\t\t\t\t\t\t\t\telse return v;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\tme.refresh(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Update comment\n\t *\n\t * @param {string} name\n\t * @param {string} content\n\t *\n\t * @returns {boolean}\n\t */\n\tupdate_comment(name, content){\n\t\treturn frappe.call({\n\t\t\tmethod: 'frappe.desk.form.utils.update_comment',\n\t\t\targs: { name, content },\n\t\t\tcallback: function(r) {\n\t\t\t\tif(!r.exc) {\n\t\t\t\t\tfrappe.utils.play_sound('click');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tget_recipient() {\n\t\tif (this.frm.email_field) {\n\t\t\treturn this.frm.doc[this.frm.email_field];\n\t\t} else {\n\t\t\treturn this.frm.doc.email_id || this.frm.doc.email || \"\";\n\t\t}\n\t}\n\n\tget_last_email(from_recipient) {\n\t\tvar last_email = null,\n\t\t\tcommunications = this.frm.get_docinfo().communications,\n\t\t\temail = this.get_recipient();\n\n\t\t$.each(communications && communications.sort(function(a, b) { return a.creation > b.creation ? -1 : 1 }), function(i, c) {\n\t\t\tif(c.communication_type=='Communication' && c.communication_medium==\"Email\") {\n\t\t\t\tif(from_recipient) {\n\t\t\t\t\tif(c.sender.indexOf(email)!==-1) {\n\t\t\t\t\t\tlast_email = c;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlast_email = c;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn last_email;\n\t}\n\n\tget_names_for_mentions() {\n\t\tvar valid_users = Object.keys(frappe.boot.user_info)\n\t\t\t.filter(user => ![\"Administrator\", \"Guest\"].includes(user));\n\n\t\treturn valid_users.map(user => frappe.boot.user_info[user].name);\n\t}\n\n\tsetup_comment_like() {\n\t\tthis.wrapper.on(\"click\", \".comment-likes .octicon-heart\", frappe.ui.click_toggle_like);\n\n\t\tfrappe.ui.setup_like_popover(this.wrapper, \".comment-likes\");\n\t}\n};\n\n$.extend(frappe.timeline, {\n\tnew_communication: function(communication) {\n\t\tvar docinfo = frappe.model.get_docinfo(communication.reference_doctype, communication.reference_name);\n\t\tif (docinfo && docinfo.communications) {\n\t\t\tvar communications = docinfo.communications;\n\t\t\tvar communication_exists = false;\n\t\t\tfor (var i=0, l=communications.length; i<l; i++) {\n\t\t\t\tif (communications[i].name==communication.name) {\n\t\t\t\t\tcommunication_exists = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!communication_exists) {\n\t\t\t\tdocinfo.communications = communications.concat([communication]);\n\t\t\t}\n\t\t}\n\n\t\tif (cur_frm.doctype === communication.reference_doctype && cur_frm.docname === communication.reference_name) {\n\t\t\tcur_frm.timeline && cur_frm.timeline.refresh();\n\t\t}\n\t},\n\n\tdelete_communication: function(communication) {\n\t\tvar docinfo = frappe.model.get_docinfo(communication.reference_doctype, communication.reference_name);\n\t\tvar index = frappe.timeline.index_of_communication(communication, docinfo);\n\t\tif (index !== -1) {\n\t\t\t// remove it from communications list\n\t\t\tdocinfo.communications.splice(index, 1);\n\t\t}\n\n\t\tif (cur_frm.doctype === communication.reference_doctype && cur_frm.docname === communication.reference_name) {\n\t\t\tcur_frm.timeline && cur_frm.timeline.refresh();\n\t\t}\n\t},\n\n\tupdate_communication: function(communication) {\n\t\tvar docinfo = frappe.model.get_docinfo(communication.reference_doctype, communication.reference_name);\n\t\tvar index = frappe.timeline.index_of_communication(communication, docinfo);\n\n\t\tif (index !== -1) {\n\t\t\t// update\n\t\t\t$.extend(docinfo.communications[index], communication);\n\t\t}\n\n\t\tif (cur_frm.doctype === communication.reference_doctype && cur_frm.docname === communication.reference_name) {\n\t\t\tcur_frm.timeline && cur_frm.timeline.refresh();\n\t\t}\n\t},\n\n\tindex_of_communication: function(communication, docinfo) {\n\t\tvar index = -1;\n\n\t\tif (docinfo && docinfo.communications) {\n\t\t\tvar communications = docinfo.communications;\n\n\t\t\tfor (var i=0, l=communications.length; i<l; i++) {\n\t\t\t\tif (communications[i].name==communication.name) {\n\t\t\t\t\tindex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn index;\n\t}\n})","// Copyright (c) 2015, Frappe Technologies Pvt. Ltd. and Contributors\n// MIT License. See license.txt\n\nfrappe.provide(\"frappe.ui.form\");\n\nfrappe.ui.form.AssignTo = Class.extend({\n\tinit: function(opts) {\n\t\tvar me = this;\n\n\t\t$.extend(this, opts);\n\t\tthis.btn = this.parent.find(\".add-assignment\").on(\"click\", function() { me.add(); });\n\t\tthis.btn_wrapper = this.btn.parent();\n\n\t\tthis.refresh();\n\t},\n\trefresh: function() {\n\t\tif(this.frm.doc.__islocal) {\n\t\t\tthis.parent.toggle(false);\n\t\t\treturn;\n\t\t}\n\t\tthis.parent.toggle(true);\n\t\tthis.render(this.frm.get_docinfo().assignments);\n\t},\n\trender: function(d) {\n\t\tvar me = this;\n\t\tthis.frm.get_docinfo().assignments = d;\n\t\tthis.parent.find(\".assignment-row\").remove();\n\n\t\tif(me.primary_action) {\n\t\t\tme.primary_action.remove();\n\t\t\tme.primary_action = null;\n\t\t}\n\n\t\tif(this.dialog) {\n\t\t\tthis.dialog.hide();\n\t\t}\n\n\t\tif(d && d.length) {\n\t\t\tfor(var i=0; i<d.length; i++) {\n\t\t\t\tvar info = frappe.user_info(d[i].owner);\n\t\t\t\tinfo.assign_to_name = d[i].name\n\t\t\t\tinfo.owner = d[i].owner;\n\t\t\t\tinfo.avatar = frappe.avatar(d[i].owner);\n\t\t\t\tinfo.description = d[i].description || \"\";\n\n\t\t\t\tinfo._fullname = info.fullname;\n\t\t\t\tif(info.fullname.length > 10) {\n\t\t\t\t\tinfo._fullname = info.fullname.substr(0, 10) + '...';\n\t\t\t\t}\n\n\t\t\t\t$(repl('<li class=\"assignment-row\">\\\n\t\t\t\t\t<a class=\"close\" data-owner=\"%(owner)s\">&times;</a>\\\n\t\t\t\t\t%(avatar)s\\\n\t\t\t\t\t<span><a href=\"#Form/ToDo/%(assign_to_name)s\">%(_fullname)s</a></span>\\\n\t\t\t\t</li>', info))\n\t\t\t\t\t.insertBefore(this.parent.find('.add-assignment'));\n\n\t\t\t\tif(d[i].owner===frappe.session.user) {\n\t\t\t\t\tme.primary_action = this.frm.page.add_menu_item(__(\"Assignment Complete\"), function() {\n\t\t\t\t\t\tme.remove(frappe.session.user);\n\t\t\t\t\t}, \"fa fa-check\", \"btn-success\")\n\t\t\t\t}\n\n\t\t\t\tif(!(d[i].owner === frappe.session.user || me.frm.perm[0].write)) {\n\t\t\t\t\tme.parent.find('a.close').remove();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// set remove\n\t\t\tthis.parent.find('a.close').click(function() {\n\t\t\t\tme.remove($(this).attr('data-owner'));\n\t\t\t\treturn false;\n\t\t\t});\n\n\t\t\t//this.btn_wrapper.addClass(\"hide\");\n\t\t} else {\n\t\t\t//this.btn_wrapper.removeClass(\"hide\");\n\t\t}\n\t},\n\tadd: function() {\n\t\tvar me = this;\n\n\t\tif(this.frm.is_new()) {\n\t\t\tfrappe.throw(__(\"Please save the document before assignment\"));\n\t\t\treturn;\n\t\t}\n\n\t\tif(!me.assign_to) {\n\t\t\tme.assign_to = new frappe.ui.form.AssignToDialog({\n\t\t\t\tobj: me,\n\t\t\t\tmethod: 'frappe.desk.form.assign_to.add',\n\t\t\t\tdoctype: me.frm.doctype,\n\t\t\t\tdocname: me.frm.docname,\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tme.render(r.message);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tme.assign_to.dialog.clear();\n\n\t\tif(me.frm.meta.title_field) {\n\t\t\tme.assign_to.dialog.set_value(\"description\", me.frm.doc[me.frm.meta.title_field])\n\t\t}\n\n\t\tme.assign_to.dialog.show();\n\t\tme.assign_to = null;\n\t},\n\tremove: function(owner) {\n\t\tvar me = this;\n\n\t\tif(this.frm.is_new()) {\n\t\t\tfrappe.throw(__(\"Please save the document before removing assignment\"));\n\t\t\treturn;\n\t\t}\n\n\t\tfrappe.call({\n\t\t\tmethod:'frappe.desk.form.assign_to.remove',\n\t\t\targs: {\n\t\t\t\tdoctype: me.frm.doctype,\n\t\t\t\tname: me.frm.docname,\n\t\t\t\tassign_to: owner\n\t\t\t},\n\t\t\tcallback:function(r,rt) {\n\t\t\t\tme.render(r.message);\n\t\t\t}\n\t\t});\n\t}\n});\n\n\nfrappe.ui.form.AssignToDialog = Class.extend({\n\tinit: function(opts){\n\t\tvar me = this\n\t\tvar dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __('Add to To Do'),\n\t\t\tfields: [\n\t\t\t\t{fieldtype: 'Link', fieldname:'assign_to', options:'User',\n\t\t\t\t\tlabel:__(\"Assign To\"), reqd:true, filters: {'user_type': 'System User'}},\n\t\t\t\t{fieldtype:'Check', fieldname:'myself', label:__(\"Assign to me\"), \"default\":0},\n\t\t\t\t{fieldtype:'Small Text', fieldname:'description', label:__(\"Comment\")},\n\t\t\t\t{fieldtype: 'Section Break'},\n\t\t\t\t{fieldtype: 'Column Break'},\n\t\t\t\t{fieldtype:'Date', fieldname:'date', label: __(\"Complete By\")},\n\t\t\t\t{fieldtype:'Check', fieldname:'notify',\n\t\t\t\t\tlabel:__(\"Notify by Email\")},\n\t\t\t\t{fieldtype: 'Column Break'},\n\t\t\t\t{fieldtype:'Select', fieldname:'priority', label: __(\"Priority\"),\n\t\t\t\t\toptions:[\n\t\t\t\t\t\t{value:'Low', label:__('Low')},\n\t\t\t\t\t\t{value:'Medium', label:__('Medium')},\n\t\t\t\t\t\t{value:'High', label:__('High')}],\n\t\t\t\t\t'default':'Medium'},\n\t\t\t],\n\t\t\tprimary_action: function() { frappe.ui.add_assignment(opts, this) },\n\t\t\tprimary_action_label: __(\"Add\")\n\t\t})\n\t\t$.extend(me, dialog);\n\n\t\tme.dialog = dialog;\n\n\t\tme.dialog.fields_dict.assign_to.get_query = \"frappe.core.doctype.user.user.user_query\";\n\n\t\tvar myself = me.dialog.get_input(\"myself\").on(\"click\", function() {\n\t\t\tme.toggle_myself(this);\n\t\t});\n\t\tme.toggle_myself(myself);\n\t},\n\ttoggle_myself: function(myself) {\n\t\tvar me = this;\n\t\tif($(myself).prop(\"checked\")) {\n\t\t\tme.dialog.set_value(\"assign_to\", frappe.session.user);\n\t\t\tme.dialog.set_value(\"notify\", 0);\n\t\t\tme.dialog.get_field(\"notify\").$wrapper.toggle(false);\n\t\t\tme.dialog.get_field(\"assign_to\").$wrapper.toggle(false);\n\t\t} else {\n\t\t\tme.dialog.set_value(\"assign_to\", \"\");\n\t\t\tme.dialog.get_field(\"notify\").$wrapper.toggle(true);\n\t\t\tme.dialog.get_field(\"assign_to\").$wrapper.toggle(true);\n\t\t}\n\t},\n\n});\n\nfrappe.ui.add_assignment = function(opts, dialog) {\n\tvar assign_to = dialog.fields_dict.assign_to.get_value();\n\tvar args = dialog.get_values();\n\tif(args && assign_to) {\n\t\treturn frappe.call({\n\t\t\tmethod: opts.method,\n\t\t\targs: $.extend(args, {\n\t\t\t\tdoctype: opts.doctype,\n\t\t\t\tname: opts.docname,\n\t\t\t\tassign_to: assign_to,\n\t\t\t\tbulk_assign:  opts.bulk_assign || false,\n\t\t\t\tre_assign: opts.re_assign || false\n\t\t\t}),\n\t\t\tcallback: function(r,rt) {\n\t\t\t\tif(!r.exc) {\n\t\t\t\t\tif(opts.callback){\n\t\t\t\t\t\topts.callback(r);\n\t\t\t\t\t}\n\t\t\t\t\tdialog && dialog.hide();\n\t\t\t\t}\n\t\t\t},\n\t\t\tbtn: this\n\t\t});\n\t}\n}\n","frappe.provide('frappe.ui.form');\n\nfrappe.ui.form.make_quick_entry = (doctype, after_insert, init_callback, doc) => {\n\tvar trimmed_doctype = doctype.replace(/ /g, '');\n\tvar controller_name = \"QuickEntryForm\";\n\n\tif(frappe.ui.form[trimmed_doctype + \"QuickEntryForm\"]){\n\t\tcontroller_name = trimmed_doctype + \"QuickEntryForm\";\n\t}\n\n\tfrappe.quick_entry = new frappe.ui.form[controller_name](doctype, after_insert, init_callback, doc);\n\treturn frappe.quick_entry.setup();\n};\n\nfrappe.ui.form.QuickEntryForm = Class.extend({\n\tinit: function(doctype, after_insert, init_callback, doc) {\n\t\tthis.doctype = doctype;\n\t\tthis.after_insert = after_insert;\n\t\tthis.init_callback = init_callback;\n\t\tthis.doc = doc;\n\t},\n\n\tsetup: function() {\n\t\tlet me = this;\n\t\treturn new Promise(resolve => {\n\t\t\tfrappe.model.with_doctype(this.doctype, function() {\n\t\t\t\tme.set_meta_and_mandatory_fields();\n\t\t\t\tif(me.is_quick_entry()) {\n\t\t\t\t\tme.render_dialog();\n\t\t\t\t\tresolve(me);\n\t\t\t\t} else {\n\t\t\t\t\tfrappe.quick_entry = null;\n\t\t\t\t\tfrappe.set_route('Form', me.doctype, me.doc.name)\n\t\t\t\t\t\t.then(() => resolve(me));\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\tset_meta_and_mandatory_fields: function(){\n\t\tlet fields = frappe.get_meta(this.doctype).fields;\n\t\tif (fields.length < 7) {\n\t\t\t// if less than 7 fields, then show everything\n\t\t\tthis.mandatory = fields;\n\t\t} else {\n\t\t\t// prepare a list of mandatory and bold fields\n\t\t\tthis.mandatory = $.map(fields,\n\t\t\t\tfunction(d) { return ((d.reqd || d.bold || d.allow_in_quick_entry) && !d.read_only) ? $.extend({}, d) : null; });\n\t\t}\n\t\tthis.meta = frappe.get_meta(this.doctype);\n\t\tif (!this.doc) {\n\t\t\tthis.doc = frappe.model.get_new_doc(this.doctype, null, null, true);\n\t\t}\n\t},\n\n\tis_quick_entry: function(){\n\t\tif(this.meta.quick_entry != 1) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.validate_for_prompt_autoname();\n\n\t\tif (this.has_child_table()\n\t\t\t|| !this.mandatory.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t},\n\n\ttoo_many_mandatory_fields: function(){\n\t\tif(this.mandatory.length > 7) {\n\t\t\t// too many fields, show form\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\thas_child_table: function(){\n\t\tif($.map(this.mandatory, function(d) {\n\t\t\treturn d.fieldtype==='Table' ? d : null; }).length) {\n\t\t\t// has mandatory table, quit!\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\tvalidate_for_prompt_autoname: function(){\n\t\tif(this.meta.autoname && this.meta.autoname.toLowerCase()==='prompt') {\n\t\t\tthis.mandatory = [{fieldname:'__newname', label:__('{0} Name', [this.meta.name]),\n\t\t\t\treqd: 1, fieldtype:'Data'}].concat(this.mandatory);\n\t\t}\n\t},\n\n\trender_dialog: function(){\n\t\tvar me = this;\n\t\tthis.dialog = new frappe.ui.Dialog({\n\t\t\ttitle: __(\"New {0}\", [__(this.doctype)]),\n\t\t\tfields: this.mandatory,\n\t\t});\n\t\tthis.dialog.doc = this.doc;\n\n\t\tthis.register_primary_action();\n\t\tthis.render_edit_in_full_page_link();\n\t\t// ctrl+enter to save\n\t\tthis.dialog.wrapper.keydown(function(e) {\n\t\t\tif((e.ctrlKey || e.metaKey) && e.which==13) {\n\t\t\t\tif(!frappe.request.ajax_count) {\n\t\t\t\t\t// not already working -- double entry\n\t\t\t\t\tme.dialog.get_primary_btn().trigger(\"click\");\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.dialog.onhide = () => frappe.quick_entry = null;\n\t\tthis.dialog.show();\n\t\tthis.dialog.$wrapper.on('shown.bs.modal', function() {\n\t\t\t$(document).trigger('quick-entry-dialog-open');\n\t\t});\n\n\t\tthis.dialog.refresh_dependency();\n\t\tthis.set_defaults();\n\n\t\tif (this.init_callback) {\n\t\t\tthis.init_callback(this.dialog);\n\t\t}\n\t},\n\n\tregister_primary_action: function(){\n\t\tvar me = this;\n\t\tthis.dialog.set_primary_action(__('Save'), function() {\n\t\t\tif(me.dialog.working) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar data = me.dialog.get_values();\n\n\t\t\tif(data) {\n\t\t\t\tme.dialog.working = true;\n\t\t\t\tme.dialog.set_message(__('Saving...'));\n\t\t\t\tme.insert().then(() => {\n\t\t\t\t\tme.dialog.clear_message();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\n\tinsert: function() {\n\t\tlet me = this;\n\t\treturn new Promise(resolve => {\n\t\t\tme.update_doc();\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"frappe.client.insert\",\n\t\t\t\targs: {\n\t\t\t\t\tdoc: me.dialog.doc\n\t\t\t\t},\n\t\t\t\tcallback: function(r) {\n\t\t\t\t\tme.dialog.hide();\n\t\t\t\t\t// delete the old doc\n\t\t\t\t\tfrappe.model.clear_doc(me.dialog.doc.doctype, me.dialog.doc.name);\n\t\t\t\t\tme.dialog.doc = r.message;\n\t\t\t\t\tif(frappe._from_link) {\n\t\t\t\t\t\tfrappe.ui.form.update_calling_link(me.dialog.doc);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif(me.after_insert) {\n\t\t\t\t\t\t\tme.after_insert(me.dialog.doc);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tme.open_form_if_not_list();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function() {\n\t\t\t\t\tme.open_doc();\n\t\t\t\t},\n\t\t\t\talways: function() {\n\t\t\t\t\tme.dialog.working = false;\n\t\t\t\t\tresolve(me.dialog.doc);\n\t\t\t\t},\n\t\t\t\tfreeze: true\n\t\t\t});\n\t\t});\n\t},\n\n\topen_form_if_not_list: function() {\n\t\tlet route = frappe.get_route();\n\t\tlet doc = this.dialog.doc;\n\t\tif (route && !(route[0]==='List' && route[1]===doc.doctype)) {\n\t\t\tfrappe.run_serially([\n\t\t\t\t() => frappe.set_route('Form', doc.doctype, doc.name)\n\t\t\t]);\n\t\t}\n\t},\n\n\tupdate_doc: function(){\n\t\tvar me = this;\n\t\tvar data = this.dialog.get_values(true);\n\t\t$.each(data, function(key, value) {\n\t\t\tif(key==='__newname') {\n\t\t\t\tme.dialog.doc.name = value;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif(!is_null(value)) {\n\t\t\t\t\tme.dialog.doc[key] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn this.dialog.doc;\n\t},\n\n\topen_doc: function(){\n\t\tthis.dialog.hide();\n\t\tthis.update_doc();\n\t\tfrappe.set_route('Form', this.doctype, this.doc.name);\n\t},\n\n\trender_edit_in_full_page_link: function(){\n\t\tvar me = this;\n\t\tvar $link = $('<div style=\"padding-left: 7px; padding-top: 30px; padding-bottom: 10px;\">' +\n\t\t\t'<button class=\"edit-full btn-default btn-sm\">' + __(\"Edit in full page\") + '</button></div>').appendTo(this.dialog.body);\n\n\t\t$link.find('.edit-full').on('click', function() {\n\t\t\t// edit in form\n\t\t\tme.open_doc();\n\t\t});\n\t},\n\n\tset_defaults: function(){\n\t\tvar me = this;\n\t\t// set defaults\n\t\t$.each(this.dialog.fields_dict, function(fieldname, field) {\n\t\t\tfield.doctype = me.doc.doctype;\n\t\t\tfield.docname = me.doc.name;\n\n\t\t\tif(!is_null(me.doc[fieldname])) {\n\t\t\t\tfield.set_input(me.doc[fieldname]);\n\t\t\t}\n\t\t});\n\t}\n});\n","frappe.provide('frappe.ui.form');\nfrappe.provide('frappe.success_action');\n\nfrappe.ui.form.SuccessAction = class SuccessAction {\n\tconstructor(form) {\n\t\tthis.form = form;\n\t\tthis.load_setting();\n\t}\n\n\tload_setting() {\n\t\tthis.setting = frappe.boot.success_action\n\t\t\t.find(setting => setting.ref_doctype === this.form.doctype);\n\t}\n\n\tshow() {\n\t\tif (!this.setting) return;\n\t\tif (this.form.doc.docstatus === 0 && !this.form.is_first_creation()) return;\n\n\t\tthis.prepare_dom();\n\t\tthis.show_alert();\n\t}\n\n\tprepare_dom() {\n\t\tthis.container = $(document.body).find('.success-container');\n\t\tif (!this.container.length) {\n\t\t\tthis.container = $('<div class=\"success-container\">').appendTo(document.body);\n\t\t}\n\t}\n\n\tshow_alert() {\n\t\tfrappe.db.count(this.form.doctype)\n\t\t\t.then(count => {\n\t\t\t\tconst setting = this.setting;\n\t\t\t\tlet message = count === 1 ?\n\t\t\t\t\tsetting.first_success_message :\n\t\t\t\t\tsetting.message;\n\n\t\t\t\tconst $buttons = this.get_actions().map(action => {\n\t\t\t\t\tconst $btn = $(`<button class=\"next-action\"><span>${action.label}</span></button>`);\n\t\t\t\t\t$btn.click(() => action.action(this.form));\n\t\t\t\t\treturn $btn;\n\t\t\t\t});\n\n\t\t\t\tconst next_action_container = $(`<div class=\"next-action-container\"></div>`);\n\t\t\t\tnext_action_container.append($buttons);\n\t\t\t\tconst html = next_action_container;\n\n\t\t\t\tfrappe.show_alert({\n\t\t\t\t\tmessage: message,\n\t\t\t\t\tbody: html,\n\t\t\t\t\tindicator: 'green',\n\t\t\t\t}, setting.action_timeout);\n\t\t\t});\n\t}\n\n\tget_actions() {\n\t\tconst actions = [];\n\t\tconst checked_actions = this.setting.next_actions.split(\"\\n\");\n\t\tchecked_actions\n\t\t\t.forEach(action => {\n\t\t\t\tif (typeof action === 'string' && this.default_actions[action]) {\n\t\t\t\t\tactions.push(this.default_actions[action]);\n\t\t\t\t} else if (typeof action === 'object') {\n\t\t\t\t\tactions.push(action);\n\t\t\t\t}\n\t\t\t});\n\n\t\treturn actions;\n\t}\n\n\tget default_actions() {\n\t\treturn {\n\t\t\t'new': {\n\t\t\t\tlabel: __('New'),\n\t\t\t\taction: (frm) => frappe.new_doc(frm.doctype)\n\t\t\t},\n\t\t\t'print': {\n\t\t\t\tlabel: __('Print'),\n\t\t\t\taction: (frm) => frm.print_doc()\n\t\t\t},\n\t\t\t'email': {\n\t\t\t\tlabel: __('Email'),\n\t\t\t\taction: (frm) => frm.email_doc()\n\t\t\t},\n\t\t\t'list': {\n\t\t\t\tlabel: __('View All'),\n\t\t\t\taction: (frm) => {\n\t\t\t\t\tfrappe.set_route('List', frm.doctype);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n};\n"],"names":["let","this","const","progress_chart"],"mappings":"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"}